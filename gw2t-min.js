$(window).on("load",function(){var O,U,X,E,D,C,M,P,G,W,T,K,I={};O={lengthOfPrefixes:3,prefixOption:"opt_",legalLocalStorageKeys:new Array,isServerReset:!1,Utilities:{programVersion:{key:"int_utlProgramVersion",value:151004},lastLocalResetTimestamp:{key:"int_utlLastLocalResetTimestamp",value:0},personalPins:{key:"str_utlPersonalPins",value:""}},enforceProgramVersion:function(){var a=O.Utilities.programVersion.value,b=parseInt(localStorage[O.Utilities.programVersion.key]);if(isFinite(b)&&b!==a){var c=I.ModeCurrent===I.ModeEnum.Overlay?15:30;I.clear(),I.greet(I.cSiteName+" was updated since your last visit.<br />This version: "+a+"<br />Your version: "+b+"<br />Would you like to see the <a class='urlUpdates' href='"+U.URL_META.News+"'>changes</a>?<br /><br /><b>Right click on the map</b> to see the new world completion features.<br />Use the <a class='urlUpdates' href='"+U.URL_META.Overlay+"'>GPS overlay app</a> for fast world completion!<br />",c),U.convertExternalLink(".urlUpdates")}localStorage[O.Utilities.programVersion.key]=O.Utilities.programVersion.value},Options:{enu_Language:"en",enu_Server:"1008",bol_hideChecked:!1,bol_expandWB:!0,bol_collapseChains:!0,int_setClock:0,int_setDimming:0,int_setPredictor:0,bol_alignPanelRight:!0,bol_showPanel:!0,bol_showMap:!0,bol_showDashboard:!0,int_setFloor:1,bol_showZoneRectangles:!1,bol_showPersonalPaths:!0,bol_showChainPaths:!0,bol_tourPrediction:!0,bol_showWorldCompletion:!1,bol_displaySectors:!0,bol_displayWaypoints:!0,bol_displayPOIs:!0,bol_displayVistas:!0,bol_displayChallenges:!0,bol_displayHearts:!0,bol_displayEvents:!1,bol_showWorldCompletionWvW:!1,bol_displaySectorsWvW:!0,bol_displayWaypointsWvW:!0,bol_displayPOIsWvW:!0,bol_displayVistasWvW:!0,bol_displayChallengesWvW:!0,bol_displayCharacter:!0,bol_followCharacter:!0,bol_displayCharacterWvW:!0,bol_followCharacterWvW:!1,int_msecGPSRefresh:100,int_setAlarm:0,int_setVolume:100,bol_alertArrival:!0,bol_alertAtStart:!0,bol_alertAtEnd:!0,bol_alertChecked:!1,int_alertSubscribedFirst:1,int_alertSubscribedSecond:15,bol_alertAutosubscribe:!0,bol_alertUnsubscribe:!0,int_sizeNotepadFont:12,int_sizeNotepadHeight:400,bol_refreshPrices:!0,bol_useMainTPSearch:!0,int_numTradingCalculators:25,int_numTradingResults:30,int_secTradingRefresh:60,int_shiftLogin:0,bol_clearChainChecklistOnReset:!0,bol_clearPersonalChecklistOnReset:!0,bol_use24Hour:!0,bol_detectDST:!0,bol_useSiteTag:!0},OptionRange:{},LanguageCode:{en:"en-US",de:"de-DE",es:"es-ES",fr:"fr-FR",cs:"cs-CZ",it:"it-IT",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",zh:"zh-CN"},OptionEnum:{Language:{Default:"en",English:"en",German:"de",Spanish:"es",French:"fr",Czech:"cs",Italian:"it",Polish:"pl",Portuguese:"pt",Russian:"ru",Mandarin:"zh"},Server:{AnvilRock:"1001",BorlisPass:"1002",YaksBend:"1003",HengeofDenravi:"1004",Maguuma:"1005",SorrowsFurnace:"1006",GateofMadness:"1007",JadeQuarry:"1008",FortAspenwood:"1009",EhmryBay:"1010",StormbluffIsle:"1011",Darkhaven:"1012",SanctumofRall:"1013",CrystalDesert:"1014",IsleofJanthir:"1015",SeaofSorrows:"1016",TarnishedCoast:"1017",NorthernShiverpeaks:"1018",Blackgate:"1019",FergusonsCrossing:"1020",Dragonbrand:"1021",Kaineng:"1022",DevonasRest:"1023",EredonTerrace:"1024",FissureofWoe:"2001",Desolation:"2002",Gandara:"2003",Blacktide:"2004",RingofFire:"2005",Underworld:"2006",FarShiverpeaks:"2007",WhitesideRidge:"2008",RuinsofSurmia:"2009",SeafarersRest:"2010",Vabbi:"2011",PikenSquare:"2012",AuroraGlade:"2013",GunnarsHold:"2014",JadeSea:"2101",FortRanik:"2102",AuguryRock:"2103",VizunahSquare:"2104",Arborstone:"2105",Kodash:"2201",Riverside:"2202",ElonaReach:"2203",AbaddonsMouth:"2204",DrakkarLake:"2205",MillersSound:"2206",Dzagonur:"2207",BaruchBay:"2301"}},IntEnum:{Predictor:{Auto:0,Min:1,MinAvg:2,Avg:3},Clock:{Compact:0,Full:1,Bar:2,None:3},Alarm:{Off:0,Checklist:1,Subscription:2}},validateEnum:function(a,b){var c,d=O.OptionEnum[U.getVariableSuffix(a)];for(c in d)if(d[c]===b)return b;return O.Options[a]},TypeEnum:{isBoolean:"bol",isInteger:"int",isFloat:"flt",isEnum:"enu",isString:"str"},initializeLegalLocalStorageKeys:function(){var a;for(a in O.Utilities)O.legalLocalStorageKeys.push(O.Utilities[a].key);for(a in O.Options)O.legalLocalStorageKeys.push(a);for(a in X.Checklists)O.legalLocalStorageKeys.push(X.Checklists[a].key);for(a in X.Collectibles)O.legalLocalStorageKeys.push(X.Collectibles[a].key);for(a in X.Textlists)O.legalLocalStorageKeys.push(X.Textlists[a].key)},cleanLocalStorage:function(){var a,b,c,d;for(a=0;a<localStorage.length;a++){c=localStorage.key(a);for(b in O.legalLocalStorageKeys)if(c===O.legalLocalStorageKeys[b]){d=!0;break}d!==!0?localStorage.removeItem(c):d=!1}},convertLocalStorageDataType:function(a){var b=a.toLowerCase();return"true"===b?!0:"false"===b?!1:isFinite(b)?b%0===0?parseInt(b):parseFloat(b):a},getObjectLength:function(a){var b=0;for(var c in a)b++;return b},intToBool:function(a){return a>0?!0:!1},boolToInt:function(a){return a?1:0},stringToBool:function(a){return"true"===a.toLowerCase()?!0:!1},boolToString:function(a){return a?"true":"false"},randomBool:function(){return Math.random()>.5?!0:!1},isInteger:function(a){return!isNaN(a)&&function(a){return(0|a)===a}(parseFloat(a))},objToBool:function(a){return a?!0:!1},updateLocalResetTimestamp:function(){O.Utilities.lastLocalResetTimestamp.value=T.getUNIXSeconds(),localStorage[O.Utilities.lastLocalResetTimestamp.key]=O.Utilities.lastLocalResetTimestamp.value},checkResetTimestamp:function(a){var b=T.getTimeSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Seconds),c=T.getUNIXSeconds()-b,d=c-T.cSECONDS_IN_DAY*a.getUTCDay(),e=0===b,f=O.Utilities.lastLocalResetTimestamp.value<d;O.Utilities.lastLocalResetTimestamp.value<c&&O.clearServerSensitiveOptions(e,f)},getIndexOfSelectedRadioButton:function(a){var b=$("fieldset[name="+a+"] input:radio[name="+a+"]");return b.index(b.filter(":checked"))},initializeOptions:function(){O.initializeLegalLocalStorageKeys();var a,b,c;for(a in O.Options)$("#"+O.prefixOption+a).each(function(){b=$(this).attr("type"),c=U.getVariablePrefix(a),"radio"===b?O.OptionRange[a]=new Array(0,$("fieldset[name="+a+"] input").length-1):("number"===b||"range"===b)&&(O.OptionRange[a]=new Array($(this).prop("min"),$(this).prop("max")))}),I.isProgramEmbedded?void 0!==U.Args[a]&&(O.Options[a]=O.convertLocalStorageDataType(U.sanitizeURLOptionsValue(a,U.Args[a]))):(void 0!==U.Args[a]&&(localStorage[a]=U.sanitizeURLOptionsValue(a,U.Args[a])),void 0===localStorage[a]?localStorage[a]=O.Options[a]:O.Options[a]=O.convertLocalStorageDataType(localStorage[a])),$("#"+O.prefixOption+a).each(function(){b=$(this).attr("type"),c=U.getVariablePrefix(a),"checkbox"===b?$(this).prop("checked",O.Options[a]):"number"===b||"range"===b?$(this).val(O.Options[a]):"radio"===b&&$("input:radio[name="+a+"]:eq("+O.Options[a]+")").prop("checked",!0),"radio"===b?$("fieldset[name="+a+"]").change(function(){var a=$(this).attr("name");O.Options[a]=O.getIndexOfSelectedRadioButton(a),localStorage[a]=O.Options[a]}):$(this).change(function(){var a=$(this).attr("type"),b=$(this).attr("id").slice(O.prefixOption.length);if("checkbox"===a)O.Options[b]=$(this).prop("checked");else if("number"===a||"range"===a){var c=$(this).val(),d=parseInt(c);isFinite(c)&&d>=O.OptionRange[b][0]&&d<=O.OptionRange[b][1]?O.Options[b]=d:O.Options[b]=O.OptionRange[b][0],$(this).val(O.Options[b])}else O.Options[b]=$(this).val();localStorage[b]=O.Options[b]})});O.bindOptionsInputs(),U.initializeAPIURLs()},clearServerSensitiveOptions:function(a,b){O.isServerReset=!0;var c=10,d=a?"Daily Reset!":"Daily Timestamp Expired!";if(I.greet(d,c),b){var e=a?"Weekly Reset!":"Weekly Timestamp Expired!";I.greet(e,c)}var f,g,h;if(O.Options.bol_clearChainChecklistOnReset){for(f in C.Chains)g=C.Chains[f],$("#chnCheck_"+g.nexus).removeClass("chnChecked"),$("#chnBar_"+g.nexus).css({opacity:1}),X.getChecklistItem(X.Checklists.Chain,g.nexus)!==X.ChecklistEnum.Disabled&&$("#chnBar_"+g.nexus).show();X.clearChecklist(X.Checklists.Chain,X.ChecklistJob.UncheckTheChecked)}O.Options.bol_alertAutosubscribe&&O.Options.int_setAlarm===O.IntEnum.Alarm.Subscription&&(C.updateChainToday(),C.ChainToday&&(h=$("#chnTime_"+C.ChainToday.nexus),h.hasClass("chnTimeSubscribed")||h.trigger("click"))),O.Options.bol_clearPersonalChecklistOnReset&&(X.clearCustomChecklistDaily(),b&&X.clearCustomChecklistWeekly()),I.isSectionLoaded_Daily&&(G.shiftLoginTrack(),G.regenerateDailiesCalendar()),I.write("",c),O.updateLocalResetTimestamp()},bindOptionsInputs:function(){var a;for(a in O.Enact)!function(a){var b,c=O.prefixOption+a,d=$("#"+c).attr("type");b="radio"===d?"fieldset[name="+a+"]":"#"+c,$(b).change(function(){O.Enact[a]()})}(a);$("#opt_bol_showWorldCompletion").change(function(){O.Options.bol_showWorldCompletion===!0&&M.isMappingIconsGenerated===!1&&location.reload(),O.Options.bol_showWorldCompletion===!1&&M.toggleLayer(M.Layer.Overview,!1),$("#mapOptionsCompletion label input").each(function(){X.setCheckboxEnumState($(this),X.boolToChecklistEnum(O.Options.bol_showWorldCompletion))})}),$("#opt_bol_displayEvents").change(function(){O.Options.bol_displayEvents===!0&&M.isEventIconsGenerated===!1&&location.reload(),M.isEventIconsGenerated&&M.refreshCurrentZone()}),$("#mapOptionsCompletion label input").each(function(){$(this).change(function(){M.isAPIRetrieved_MAPFLOOR&&M.refreshCurrentZone()})}),O.Enact.int_setAlarm(),O.Enact.bol_detectDST(),O.Enact.bol_useSiteTag(),O.Enact.bol_alignPanelRight(!0),O.Enact.bol_showPanel(),I.ModeCurrent!==I.ModeEnum.Simple&I.ModeCurrent!==I.ModeEnum.Tile&&(O.Enact.int_setClock(),O.Enact.int_setDimming(),O.Enact.bol_showMap()),$("#optRestoreAllChains").click(function(){var a,b=I.ModeCurrent===I.ModeEnum.Tile?"inline-block":"block";for(var c in C.Chains)a=C.Chains[c],$("#chnCheck_"+a.nexus).removeClass("chnChecked"),$("#chnBar_"+a.nexus).show().css({opacity:1}).css({display:b}),C.isTimetableGenerated&&$(".chnSlot_"+a.nexus).show().css({opacity:1}).css({display:b}).find(".chnCheck").removeClass("chnChecked");for(X.clearChecklist(X.Checklists.Chain),c=0;c<T.cNUM_TIMEFRAMES_IN_HOUR;c++){K.checkoffChainIcon(T.getStandardChain(c).nexus);var d=T.getHardcoreChain(c);d&&K.checkoffChainIcon(d.nexus)}}),$("#optChainsExpand").click(function(){$(".chnDetails").show()}),$("#optChainsCollapse").click(function(){$(".chnDetails").hide(),I.scrollToElement($("#plateChains"))}),$("#optClearLocalStorage").click(function(){confirm(I.cSiteName+" Reset: This is will clear all options and everything you have written in this website. Continue?")&&(localStorage.clear(),location.reload())}),$("#optPrintLocalStorage").click(function(){var a,b=new Array;for(a=0;a<localStorage.length;a++){var c=U.escapeHTML(localStorage.key(a));b.push(c)}b.sort();var d="";for(a in b){var e=U.escapeHTML(localStorage.getItem(b[a]));d+=b[a]+": "+e+"<br />"}I.write(d,30,!0)})},Enact:{int_setAlarm:function(){var a="img/ui/placeholder.png";switch(O.Options.int_setAlarm){case O.IntEnum.Alarm.Checklist:a="img/ui/check.png";break;case O.IntEnum.Alarm.Subscription:a="img/ui/subscription.png"}O.Options.int_setAlarm===O.IntEnum.Alarm.Off?$("#optAlarmSpeaker").attr("src","img/ui/mute.png"):$("#optAlarmSpeaker").attr("src","img/ui/speaker.png"),$("#optAlarmIcon").attr("src",a)},int_setVolume:function(){D.isSpeaking()===!1&&D.speak(D.getWord("alarm"))},bol_hideChecked:function(){$(".chnBar").each(function(){X.hideCheckedChainBar(U.getSubintegerFromHTMLID($(this)))})},bol_expandWB:function(){for(var a in C.CurrentChains)C.isChainRegular(C.CurrentChains[a])&&$("#chnDetails_"+C.CurrentChains[a].nexus).toggle(O.Options.bol_expandWB)},bol_use24Hour:function(){C.initializeTimetableHTML(),C.updateChainsTimeHTML(),K.updateDigitalClockMinutely()},bol_detectDST:function(){T.checkDST()},int_setClock:function(){K.setClock()},int_setDimming:function(){switch(O.Options.int_setDimming){case 1:$("#paneClockBackground").css({opacity:1});break;case 2:$("#paneClockBackground").css({opacity:0})}},int_setFloor:function(){M.changeFloor(O.Options.int_setFloor)},bol_showZoneRectangles:function(){M.toggleLayer(M.Layer.ZoneRectangle,O.Options.bol_showZoneRectangles)},bol_showPersonalPaths:function(){M.isMapInitialized&&M.drawPersonalPath(),W.isMapInitialized&&W.drawPersonalPath()},bol_showChainPaths:function(){M.toggleLayerArray(P.LayerArray.ChainPath,O.Options.bol_showChainPaths)},bol_displayCharacter:function(){O.Options.bol_displayCharacter?(M.tickGPS(),M.updateCharacter(0)):(M.movePin(M.Pin.Character),M.movePin(M.Pin.Camera))},bol_showPanel:function(){O.Options.bol_showMap&&I.isMapEnabled&&($("#panelApp").toggle(O.Options.bol_showPanel),M.refreshMap(),W.isMapInitialized&&W.refreshMap())},bol_alignPanelRight:function(a){I.isMapEnabled&&(O.Options.bol_alignPanelRight?a!==!0&&($("#panelApp").insertAfter("#panelMap"),$(".paneApp").css({right:"0px",borderLeft:"1px solid #444",borderRight:"none",boxShadow:"-5px 0px 5px #223"}),$("#itemLanguagePopup").css({left:"-98px"}),$("#cslContent").css({left:"24px"})):($("#panelApp").insertBefore("#panelMap"),$(".paneApp").css({right:"auto",borderLeft:"none",borderRight:"1px solid #444",boxShadow:"5px 0px 5px #223"}),$("#itemLanguagePopup").css({left:"64px"}),$("#cslContent").css({left:I.cPANEL_WIDTH+24+"px"})))},bol_showMap:function(){I.isMapEnabled&&($("#panelMap").toggle(O.Options.bol_showMap),M.refreshMap())},bol_refreshPrices:function(){O.Options.bol_refreshPrices&&E.isTradingCalculatorsInitialized?E.loopRefresh():E.cancelLoopRefresh()},int_shiftLogin:function(){G.shiftLoginTrack()},bol_useSiteTag:function(){O.Options.bol_useSiteTag?I.siteTagCurrent=I.siteTagDefault:I.siteTagCurrent=""}}},U={URL_META:{News:"http://forum.renaka.com/topic/5500046/",Overlay:"http://forum.renaka.com/topic/5546166/"},URL_API:{TilesTyria:"https://tiles.guildwars2.com/1/1/{z}/{x}/{y}.jpg",MapFloorTyria:"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=2",TilesMists:"https://tiles.guildwars2.com/2/1/{z}/{x}/{y}.jpg",MapFloorMists:"https://api.guildwars2.com/v1/map_floor.json?continent_id=2&floor=1",MapsList:"https://api.guildwars2.com/v1/maps.json",EventNames:"https://api.guildwars2.com/v1/event_names.json",EventDetails:"https://api.guildwars2.com/v1/event_details.json",ItemListing:"https://api.guildwars2.com/v2/commerce/listings/",ItemPrices:"https://api.guildwars2.com/v2/commerce/prices/",ItemDetails:"https://api.guildwars2.com/v2/items/",ItemRender:"https://render.guildwars2.com/file/",CoinPrice:"https://api.guildwars2.com/v2/commerce/exchange/gems?quantity=",GemPrice:"https://api.guildwars2.com/v2/commerce/exchange/coins?quantity=",ItemSearch:"http://www.gw2spidy.com/api/v0.9/json/item-search/",ItemSearchFallback:"http://www.gw2shinies.com/api/json/idbyname/",ItemData:"http://www.gw2spidy.com/api/v0.9/json/item/",Matches:"https://api.guildwars2.com/v1/wvw/matches.json",MatchDetails:"https://api.guildwars2.com/v1/wvw/match_details.json?match_id=",GuildDetails:"https://api.guildwars2.com/v1/guild_details.json?guild_id="},URL_IMG:{Placeholder:"img/ui/placeholder.png",Waypoint:"img/map/waypoint.png",WaypointOver:"img/map/waypoint_h.png",Landmark:"img/map/landmark.png",LandmarkOver:"img/map/landmark_h.png",Vista:"img/map/vista.png",Challenge:"img/map/challenge.png",Heart:"img/map/heart.png"},URL_DATA:{WvW:"data/wvw.js",Itinerary:"data/itinerary.js",DryTop:"data/drytop.js",Resource:"data/resource.js",JP:"data/jp.js",Collectible:"data/collectible.js",Guild:"data/guild.js"},initializeAPIURLs:function(){var a=D.getPartiallySupportedLanguage();U.URL_API.MapFloorTyria+="&lang="+a,U.URL_API.MapFloorMists+="&lang="+a,U.URL_API.EventNames+="?lang="+a},Args:{},KeyEnum:{Page:"page",Section:"section",Article:"article",Mode:"mode",Go:"go"},CaseEnum:{Original:-1,None:0,Lower:1,Sentence:2,Title:3,Every:4,All:5},isEnumWithin:function(a,b){for(var c in b)if(b[c].toLowerCase()===a.toLowerCase())return!0;return!1},getURLArguments:function(){var a=window.location.search.substr(1).split("&");if(""===a)return{};for(var b={},c=0;c<a.length;++c){var d=a[c].split("=");2===d.length&&(b[d[0]]=decodeURIComponent(d[1].replace(/\+/g," ")))}return b},enforceURLArgumentsFirst:function(){U.Args=U.getURLArguments(),U.enforceURLArgumentsSpecial();var a,b=U.Args[U.KeyEnum.Mode];if(b)for(a in I.ModeEnum)if(I.ModeEnum[a].toLowerCase()===b.toLowerCase()){I.ModeCurrent=I.ModeEnum[a];break}null===I.ModeCurrent&&(I.ModeCurrent=I.ModeEnum.Website),I.ArticleCurrent=U.Args[U.KeyEnum.Article]},enforceURLArgumentsLast:function(){U.openPageFromURL()},enforceURLArgumentsSpecial:function(){var a,b,c,d=function(a){$("body").hide(),document.location=a},e=U.Args[U.KeyEnum.Page];if(e&&U.isEnumWithin(e,I.PageEnum)===!1)if(e=e.toLowerCase(),"navi"===e||"overlay"===e)d(U.URL_META.Overlay);else if("m"===e||"mobile"===e)U.Args[U.KeyEnum.Mode]=I.ModeEnum.Mobile;else if("s"===e||"simple"===e)U.Args[U.KeyEnum.Mode]=I.ModeEnum.Simple;else if("t"===e||"tile"===e)U.Args[U.KeyEnum.Mode]=I.ModeEnum.Tile;else{for(a in I.SectionEnum){c=I.SectionEnum[a];for(b in c)if(b.toLowerCase()===e)return void 0!==U.Args[U.KeyEnum.Section]&&(U.Args[U.KeyEnum.Article]=U.Args[U.KeyEnum.Section]),U.Args[U.KeyEnum.Page]=a,void(U.Args[U.KeyEnum.Section]=b)}for(a in M.Zones)if(-1!==e.indexOf(a))return void(U.Args[U.KeyEnum.Go]=a)}for(a in X.Collectibles)if(c=X.Collectibles[a].urlkey,c===e||void 0!==U.Args[c])return U.Args[U.KeyEnum.Page]=I.PageEnum.Map,U.Args[U.KeyEnum.Section]=I.SectionEnum.Map.Collectible,void(U.Args[U.KeyEnum.Article]=c)},sanitizeURLOptionsValue:function(a,b){var c=a.substring(0,O.lengthOfPrefixes),d=b.toLowerCase();switch(c){case O.TypeEnum.isBoolean:return"true"===d||"false"===d?d:O.Options[a].toString();case O.TypeEnum.isInteger:if(isFinite(d)){var e=parseInt(d);if(e>=O.OptionRange[a][0]&&e<=O.OptionRange[a][1])return e.toString()}return O.Options[a].toString();case O.TypeEnum.isFloat:if(isFinite(d)){var f=parseFloat(d);if(f>=O.OptionRange[a][0]&&f<=O.OptionRange[a][1])return f.toString()}return O.Options[a].toString();case O.TypeEnum.isEnum:return O.validateEnum(a,b);case O.TypeEnum.isString:return U.escapeHTML(b)}return"null"},stripToAlphanumeric:function(a){return a.replace(/\W/g,"")},stripToSentence:function(a){return a.replace(/[^\w\s\'\"\:\,]/gi,"")},stripToCalculation:function(a){return a.replace(/[^0-9.()\-+/*]/gi,"")},toFirstUpperCase:function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},toEveryUpperCase:function(a){var b=a.split(" ");if(b.length>1){for(var c in b)b[c]=U.toFirstUpperCase(b[c]);return b.join(" ")}return U.toFirstUpperCase(a)},toCase:function(a,b){var c,d=[];if(void 0===b||b===U.CaseEnum.None)return a;switch((b===U.CaseEnum.Title||b===U.CaseEnum.Every)&&(d=a.split(" ")),b){case U.CaseEnum.Lower:return a.toLowerCase();case U.CaseEnum.Sentence:return U.toFirstUpperCase(a);case U.CaseEnum.Title:if(d.length>1){for(d[0]=U.toFirstUpperCase(d[0]),c=1;c<d.length;c++)2!==d[c].length&&(d[c]=U.toFirstUpperCase(d[c]));return d.join(" ")}return U.toFirstUpperCase(a);case U.CaseEnum.Every:if(d.length>1){for(c in d)d[c]=U.toFirstUpperCase(d[c]);return d.join(" ")}return U.toFirstUpperCase(a);case U.CaseEnum.All:return a.toUpperCase()}return a},wrapSubstringHTML:function(a,b,c){var d=a.toLowerCase().indexOf(b.toLowerCase()),e=d+b.length,f="";return-1!==d?(void 0===c&&(c="u"),f=a.substring(0,d)+"<"+c+">"+a.substring(d,e)+"</"+c+">"+a.substring(e,a.length)):f=a,f},escapeHTML:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},replaceCharAt:function(a,b,c){return a.substr(0,b)+c+a.substr(b+c.length)},repeatChar:function(a,b){return Array(b+1).join(a)},countOccurrence:function(a,b){return a.split(b).length-1},updateAddressBar:function(a){history.replaceState("",null,a),K.reapplyFilters()},updateQueryString:function(){if(""!==I.PageCurrent){var a=I[I.sectionPrefix+I.PageCurrent],b=I.ArticleCurrent,c=U.Args[U.KeyEnum.Go],d="?"+U.KeyEnum.Page+"="+I.PageCurrent,e="",f="",g="",h="",i=I.PageCurrent;I.ModeCurrent!==I.ModeEnum.Website&&(h="&mode="+I.ModeCurrent),a&&(e="&"+U.KeyEnum.Section+"="+a,i=a),b&&(f="&"+U.KeyEnum.Article+"="+b),c&&(g="&"+U.KeyEnum.Go+"="+c),U.updateAddressBar(d+e+f+g+h),U.updateTitle(i)}},updateTitle:function(a){document.title=I.cSiteName+"/"+a},openSectionFromURL:function(){setTimeout(function(){if(void 0!==U.Args[U.KeyEnum.Section]){var a=U.stripToAlphanumeric(U.Args[U.KeyEnum.Section]),b=$(I.cHeaderPrefix+I.PageCurrent+"_"+U.toFirstUpperCase(a));b.length||(b=$(I.cHeaderPrefix+I.PageCurrent+"_"+a.toUpperCase())),I.PageCurrent===I.PageEnum.Chains&&$("#headerChains_Scheduled").trigger("click"),b.trigger("click")}},0)},openPageFromURL:function(){if(void 0!==U.Args[U.KeyEnum.Page]){var a=U.stripToAlphanumeric(U.Args[U.KeyEnum.Page]);for(var b in I.PageEnum)if(a.toLowerCase()===I.PageEnum[b].toLowerCase())return void $(I.cMenuPrefix+I.PageEnum[b]).trigger("click");switch(a=a.toLowerCase()){case"wvw":$("#mapSwitchButton").trigger("click")}}},convertExternalLink:function(a){$(a).each(function(){$(this).attr("href",I.cSiteURL+"out/?u="+U.encodeURL($(this).attr("href"))),$(this).attr("target","_blank")})},convertExternalURL:function(a){return I.cSiteURL+"out/?u="+U.encodeURL(a)},openExternalURL:function(a){var b=a;I.ModeCurrent!==I.ModeEnum.Overlay&&(b=I.cSiteURL+"out/?u="+U.encodeURL(a)),window.open(b,"_blank")},getVariableSuffix:function(a){var b=a.indexOf("_");return a.substring(b+1,a.length)},getVariablePrefix:function(a){var b=a.indexOf("_");return a.substring(0,b)},getSubstringFromHTMLID:function(a){return U.getVariableSuffix(a.attr("id"))},getSubintegerFromHTMLID:function(a){return parseInt(U.getVariableSuffix(a.attr("id")))},getPageSrc:function(a){return a.toLowerCase()+"src.html"},getImageHosted:function(a){return I.cImageHost+a+I.cPNG},encodeURL:function(a){return encodeURI(a).replace(/'/g,"%27")},getWikiLink:function(a){return a=a.replace(/ /g,"_"),"http://wiki.guildwars2.com/wiki/"+U.encodeURL(a)},getWikiLanguageLink:function(a){return a=a.replace(/ /g,"_"),"http://wiki-"+D.getFullySupportedLanguage()+".guildwars2.com/wiki/"+U.encodeURL(a)},getWikiSearchLink:function(a){return a=a.replace(/ /g,"+"),"http://wiki.guildwars2.com/index.php?title=Special%3ASearch&search="+U.encodeURL(a)},getGW2NewsLink:function(a){return"https://www.guildwars2.com/"+D.getFullySupportedLanguage()+"/news/"+a},getYouTubeLink:function(a){return"http://www.youtube.com/results?search_query="+U.encodeURL(a)},getTradingSearchLink:function(a){return"https://www.gw2tp.com/search?name="+U.encodeURL(a)},getTradingItemLink:function(a,b){return"http://www.gw2spidy.com/item/"+U.encodeURL(a)+"#"+U.stripToSentence(b)},getChatlinkFromPoiID:function(a){for(var b=String.fromCharCode(4),c=0;4>c;c++)b+=String.fromCharCode(a>>8*c&255);return"[&"+btoa(b)+"]"},getChatlinkFromItemID:function(a){var b="";try{b="[&"+btoa(String.fromCharCode(2)+String.fromCharCode(1)+String.fromCharCode(a%256)+String.fromCharCode(Math.floor(a/256))+String.fromCharCode(0)+String.fromCharCode(0))+"]"}catch(c){}return b}},X={Checklists:{Chain:{key:"str_chlChain",value:""},ChainSubscription:{key:"str_chlChainSubscription",value:""},JP:{key:"str_chlJP",value:""},ResourceRich:{key:"str_chlResourceRich",value:""},ResourceRegular:{key:"str_chlResourceRegular",value:""},ResourceZone:{key:"str_chlResourceZone",value:""},Dungeon:{key:"str_chlDungeon",value:"",money:0},CustomDaily:{key:"str_chlCustomDaily",value:""},CustomWeekly:{key:"str_chlCustomWeekly",value:""},TradingOverwrite:{key:"str_chlTradingOverwrite",value:""},TradingNotify:{key:"str_chlTradingNotify",value:""}},Collectibles:{BuriedChests:{key:"str_chlBuriedChests",urlkey:"chests",value:""},BanditChests:{key:"str_chlBanditChests",urlkey:"banditchests",value:""},MatrixCubeKey:{key:"str_chlMatrixCubeKey",urlkey:"matrixcubekey",value:""},LionsArchExterminator:{key:"str_chlLionsArchExterminator",urlkey:"lionsarchexterminator",value:""},CoinProspect:{key:"str_chlCoinProspect",urlkey:"coinprospect",value:""},CoinUplands:{key:"str_chlCoinUplands",urlkey:"coinuplands",value:""},CoinChallenger:{key:"str_chlCoinChallenger",urlkey:"coinchallenger",value:""},LostBadges:{key:"str_chlLostBadges",urlkey:"lostbadges",value:""},GoldenLostBadges:{key:"str_chlGoldenLostBadges",urlkey:"goldenlostbadges",value:""},DiveMaster:{key:"str_chlDiveMaster",urlkey:"divemaster",value:""},SpeedyReader:{key:"str_chlSpeedyReader",urlkey:"speedyreader",value:""},CleaningUp:{key:"str_chlCleaningUp",urlkey:"cleaningup",value:""},HistoryBuff:{key:"str_chlHistoryBuff",urlkey:"historybuff",value:""}},ChecklistEnum:{Unchecked:"0",Checked:"1",Disabled:"2",Unfound:"0",Tracked:"1",Found:"2"},ChecklistJob:{UncheckAll:0,CheckAll:1,UncheckTheChecked:2},Textlists:{CustomTextDaily:{key:"str_txlCustomTextDaily",value:new Array,valueDefault:new Array},CustomTextWeekly:{key:"str_txlCustomTextWeekly",value:new Array,valueDefault:new Array},NotepadText:{key:"str_txlNotepadText",value:new Array,valueDefault:new Array},TradingItem:{key:"str_txlTradingItem",value:new Array},TradingName:{key:"str_txlTradingName",value:new Array},TradingBuy:{key:"str_txlTradingBuy",value:new Array},TradingSell:{key:"str_txlTradingSell",value:new Array},TradingQuantity:{key:"str_txlTradingQuantity",value:new Array},NotifyBuyLow:{key:"str_txlNotifyBuyLow",value:new Array},NotifyBuyHigh:{key:"str_txlNotifyBuyHigh",value:new Array},NotifySellLow:{key:"str_txlNotifySellLow",value:new Array},NotifySellHigh:{key:"str_txlNotifySellHigh",value:new Array},ExchangeUnit:{key:"str_txlExchangeUnit",value:new Array}},boolToChecklistEnum:function(a){return a?X.ChecklistEnum.Checked:X.ChecklistEnum.Unchecked},initializeChecklist:function(a,b,c,d){var e,f,g,h=localStorage[a.key];if(a.length=b,c){X.clearChecklist(a),f=c.split(",");for(e in f)g=parseInt(f[e]),isFinite(g)&&X.setChecklistItem(a,g-1,X.ChecklistEnum.Checked)}else if(void 0===h)X.clearChecklist(a,d);else if(h.length>b)localStorage[a.key]=h.substring(0,b);else if(h.length<b){var i=U.repeatChar(X.ChecklistEnum.Unchecked,b-h.length);localStorage[a.key]=h+i}a.value=localStorage[a.key]},setChecklistItem:function(a,b,c){b=parseInt(b);var d=c.toString();if(1===d.length&&a.value[b]!==d&&b>=0&&b<a.value.length){var e=U.replaceCharAt(a.value,b,d);localStorage[a.key]=e,a.value=e}},trackChecklistItem:function(a,b){b=parseInt(b);var c=a.value.charAt(b);switch(c){case X.ChecklistEnum.Unfound:c=X.ChecklistEnum.Tracked;break;case X.ChecklistEnum.Tracked:c=X.ChecklistEnum.Found;break;case X.ChecklistEnum.Found:c=X.ChecklistEnum.Unfound;break;default:c=X.ChecklistEnum.Unfound}var d=U.replaceCharAt(a.value,b,c);return localStorage[a.key]=d,a.value=d,c},getChecklistItem:function(a,b,c){var d=a.value.charAt(b);return void 0===c?d:c===O.TypeEnum.isInteger?parseInt(d):c===O.TypeEnum.isBoolean?O.intToBool(parseInt(d)):d},isChecked:function(a,b){var c=U.getSubintegerFromHTMLID(b);return X.getChecklistItem(a,c)===X.ChecklistEnum.Checked?!0:!1},getCheckedIndexes:function(a){var b,c="",d=a.value;for(b=0;b<d.length;b++)d[b]===X.ChecklistEnum.Checked&&(c+=b+1+",");return c=c.slice(0,-1)},clearChecklist:function(a,b){var c,d="",e="";switch(b){case X.ChecklistJob.CheckAll:for(c=0;c<a.length;c++)d+=X.ChecklistEnum.Checked;break;case X.ChecklistJob.UncheckTheChecked:for(e=void 0!==localStorage[a.key]?localStorage[a.key]:a.value,c=0;c<e.length;c++)d+=e[c]===X.ChecklistEnum.Checked?X.ChecklistEnum.Unchecked:e[c];break;default:for(c=0;c<a.length;c++)d+=X.ChecklistEnum.Unchecked}a.value=d,localStorage[a.key]=d},countChecklist:function(a,b){return U.countOccurrence(a.value,b)},getCheckboxEnumState:function(a){return a.prop("disabled")===!0?X.ChecklistEnum.Disabled:a.prop("checked")===!0?X.ChecklistEnum.Checked:X.ChecklistEnum.Unchecked},setCheckboxEnumState:function(a,b){switch(b){case X.ChecklistEnum.Disabled:a.prop("disabled",!0),a.prop("checked",!1);break;case X.ChecklistEnum.Checked:a.prop("checked",!0);break;default:a.prop("checked",!1)}a.trigger("change")},triggerCheckbox:function(a,b){var c=X.getCheckboxEnumState(a);b===X.ChecklistEnum.Checked&&c===X.ChecklistEnum.Unchecked||b===X.ChecklistEnum.Unchecked&&c===X.ChecklistEnum.Checked?a.trigger("click"):b===X.ChecklistEnum.Disabled&&c!==X.ChecklistEnum.Disabled&&a.trigger("dblclick")},triggerCheckboxEnumState:function(a,b,c){var d=X.getChecklistItem(a,b);X.triggerCheckbox(c,d)},styleCheckbox:function(a,b,c){var d=X.getChecklistItem(a,b);switch(d){case X.ChecklistEnum.Disabled:c.parent().removeClass("chlCheckboxChecked").addClass("chlCheckboxDisabled");break;case X.ChecklistEnum.Checked:c.parent().removeClass("chlCheckboxDisabled").addClass("chlCheckboxChecked");break;default:c.parent().removeClass("chlCheckboxDisabled").removeClass("chlCheckboxChecked")}},initializeCheckboxlist:function(a,b,c){X.initializeChecklist(a,b.length,null,c),b.each(function(b){$(this).change(function(){var c=X.getCheckboxEnumState($(this));X.setChecklistItem(a,b,c)}),X.triggerCheckboxEnumState(a,b,$(this))})},initializeTextlist:function(a,b,c,d,e){b.each(function(){var b=$(this).val();a.value.push(b),a.valueDefault&&a.valueDefault.push(b)});var f;if(void 0===localStorage[a.key])localStorage[a.key]=a.value.join(I.cTextDelimiterChar);else{var g=localStorage[a.key].split(I.cTextDelimiterChar);for(f=0;f<a.value.length;f++)g[f]?a.value[f]=g[f]:a.value[f]="";localStorage[a.key]=a.value.join(I.cTextDelimiterChar)}var h=function(){b.each(function(b){a.value[b]=$(this).val().replace(I.cTextDelimiterRegex,"")}),localStorage[a.key]=a.value.join(I.cTextDelimiterChar)};b.each(function(b){$(this).attr("maxlength",d),$(this).val(a.value[b]),$(this).change(function(){c&&I.write(c+" #"+(b+1)+" updated."),h()})}),e&&e.click(function(){confirm("Reset texts to default?")&&b.each(function(b){$(this).val(a.valueDefault[b]).trigger("change")})})},initializeChainChecklist:function(a){var b=$("#chnBar_"+a.nexus),c=$("#chnCheck_"+a.nexus),d=$("#chnTime_"+a.nexus);X.reapplyChainBarState(a.nexus,b,c,d),C.isChainRegular(a)&&d.click(function(){var a=U.getSubintegerFromHTMLID($(this)),b=$(".chnSlot_"+a).find("time");X.getChecklistItem(X.Checklists.ChainSubscription,a)===X.ChecklistEnum.Checked?($(this).removeClass("chnTimeSubscribed"),b.removeClass("chnTimeSubscribed"),X.setChecklistItem(X.Checklists.ChainSubscription,a,X.ChecklistEnum.Unchecked)):($(this).addClass("chnTimeSubscribed"),b.addClass("chnTimeSubscribed"),X.setChecklistItem(X.Checklists.ChainSubscription,a,X.ChecklistEnum.Checked),O.Options.int_setAlarm!==O.IntEnum.Alarm.Subscription&&I.write("Please set <img src='img/ui/speaker.png' /> to &quot;"+D.getWordCapital("subscription")+"&quot; to enable alarm."))}),c.click(function(){var a=U.getSubintegerFromHTMLID($(this)),b=$("#chnBar_"+a),c=$(".chnSlot_"+a),d=I.ModeCurrent===I.ModeEnum.Tile?"inline-block":"block";switch(X.getChecklistItem(X.Checklists.Chain,a)){case X.ChecklistEnum.Unchecked:b.css({opacity:1}).animate({opacity:K.iconOpacityChecked},K.iconOpacitySpeed),I.ModeCurrent!==I.ModeEnum.Tile&&$("#chnDetails_"+a).hide("fast"),$(this).addClass("chnChecked"),X.setChecklistItem(X.Checklists.Chain,a,X.ChecklistEnum.Checked),C.isTimetableGenerated&&c.css({opacity:1}).animate({opacity:K.iconOpacityChecked},K.iconOpacitySpeed).find(".chnCheck").addClass("chnChecked");break;case X.ChecklistEnum.Checked:b.css({opacity:1}).show("fast").css({display:d}),b.css({opacity:K.iconOpacityChecked}).animate({opacity:1},K.iconOpacitySpeed),I.ModeCurrent!==I.ModeEnum.Tile&&$("#chnDetails_"+a).show("fast").css({display:d}),$(this).removeClass("chnChecked"),X.setChecklistItem(X.Checklists.Chain,a,X.ChecklistEnum.Unchecked),C.isTimetableGenerated&&c.show("fast").css({display:d}).css({opacity:K.iconOpacityChecked}).animate({opacity:1},K.iconOpacitySpeed).find(".chnCheck").removeClass("chnChecked");break;case X.ChecklistEnum.Disabled:b.css({opacity:1}).show("fast").css({display:d}),I.ModeCurrent!==I.ModeEnum.Tile&&$("#chnDetails_"+a).show("fast").css({display:d}),$(this).removeClass("chnChecked"),X.setChecklistItem(X.Checklists.Chain,a,X.ChecklistEnum.Unchecked),C.isTimetableGenerated&&c.hide().css({opacity:1}).find(".chnCheck").removeClass("chnChecked");
}X.hideCheckedChainBar(a),K.checkoffChainIcon(a)}),$("#chnDelete_"+a.nexus).click(function(){var a=U.getSubintegerFromHTMLID($(this));$("#chnBar_"+a).hide("slow"),C.isTimetableGenerated&&$(".chnSlot_"+a).hide("slow"),X.setChecklistItem(X.Checklists.Chain,a,X.ChecklistEnum.Disabled),K.checkoffChainIcon(a)})},reapplyChainBarState:function(a,b,c,d){switch(X.getChecklistItem(X.Checklists.Chain,a)){case X.ChecklistEnum.Unchecked:break;case X.ChecklistEnum.Checked:b.css({opacity:K.iconOpacityChecked}),c.addClass("chnChecked"),O.Options.bol_hideChecked&&b.hide();break;case X.ChecklistEnum.Disabled:b.hide()}C.isChainRegular(C.Chains[a])&&X.getChecklistItem(X.Checklists.ChainSubscription,a)===X.ChecklistEnum.Checked&&d.addClass("chnTimeSubscribed")},hideCheckedChainBar:function(a){var b=I.ModeCurrent===I.ModeEnum.Tile?"inline-block":"block";X.getChecklistItem(X.Checklists.Chain,a)===X.ChecklistEnum.Checked&&(O.Options.bol_hideChecked?($("#chnBar_"+a).hide("fast"),C.isTimetableGenerated&&$(".chnSlot_"+a).hide("fast")):($("#chnBar_"+a).show("fast").css({display:b}),C.isTimetableGenerated&&$(".chnSlot_"+a).show("fast").css({display:b})))},getChainChecklistState:function(a){return X.getChecklistItem(X.Checklists.Chain,a.nexus)},initializePersonalChecklist:function(){T.isCountdownToResetStarted=!0,$("#chlDungeon, #chlCustomWeekly").hide(),$("#chlDungeonButton").click(function(){$("#chlCustomButtons button").removeClass("btnFocused"),$(this).addClass("btnFocused"),$("#chlCustom").hide(),$("#chlDungeon").show().css({opacity:.5}).animate({opacity:1},400)}),$("#chlCustomDailyButton").addClass("btnFocused").click(function(){$("#chlCustomButtons button").removeClass("btnFocused"),$(this).addClass("btnFocused"),$("#chlDungeon").hide(),$("#chlCustom").show(),$("#chlCustomWeekly").hide(),$("#chlCustomDaily").show().css({opacity:.5}).animate({opacity:1},400)}),$("#chlCustomWeeklyButton").click(function(){$("#chlCustomButtons button").removeClass("btnFocused"),$(this).addClass("btnFocused"),$("#chlDungeon").hide(),$("#chlCustom").show(),$("#chlCustomDaily").hide(),$("#chlCustomWeekly").show().css({opacity:.5}).animate({opacity:1},400)}),X.initializeDungeonChecklist(),X.initializeCustomChecklist()},initializeDungeonChecklist:function(){X.initializeChecklist(X.Checklists.Dungeon,$("#chlDungeon input").length),$("#chlDungeon .chlDungeonBar").each(function(){$(this).prepend("<ins class='chl_"+$(this).data("name").toLowerCase()+"'></ins>")});var a=function(){var a=X.Checklists.Dungeon.money,b=~~(a/E.Exchange.COPPER_IN_GOLD),c=~~(a/E.Exchange.SILVER_IN_GOLD)%E.Exchange.COPPER_IN_SILVER,d=a%E.Exchange.COPPER_IN_SILVER;$("#chlDungeonCalculator_Gold").text(b),$("#chlDungeonCalculator_Silver").text(c),$("#chlDungeonCalculator_Copper").text(d)};$("#chlDungeon input").each(function(b){$(this).change(function(){var c=X.getCheckboxEnumState($(this));X.setChecklistItem(X.Checklists.Dungeon,b,c),X.styleCheckbox(X.Checklists.Dungeon,b,$(this));var d=$("#chlDungeonCalculator"),e=X.Checklists.Dungeon.money,f=$(this).data("money");switch($(this).data("mode")){case"E":f+=d.data("moneyaddexp")}switch(c){case X.ChecklistEnum.Disabled:X.Checklists.Dungeon.money=e-f;break;case X.ChecklistEnum.Checked:X.Checklists.Dungeon.money=e+f;break;default:X.Checklists.Dungeon.money=e-f}a()})}),$("#chlDungeon label").each(function(a){$(this).dblclick(function(){var b=$(this).find("input:first-child");b.prop("disabled")===!1?(b.prop("checked")===!0&&X.triggerCheckbox(b,X.ChecklistEnum.Unchecked),b.prop("disabled",!0).prop("checked",!1)):b.prop("disabled",!1),X.setChecklistItem(X.Checklists.Dungeon,a,X.getCheckboxEnumState(b)),X.styleCheckbox(X.Checklists.Dungeon,a,b)})}),$("#chlDungeon input").each(function(a){X.triggerCheckboxEnumState(X.Checklists.Dungeon,a,$(this))}),$("#chlDungeonUncheck").click(function(){X.clearChecklist(X.Checklists.Dungeon,X.ChecklistJob.UncheckTheChecked),$("#chlDungeon input").each(function(a){$(this).prop("checked")===!0&&$(this).trigger("click"),X.styleCheckbox(X.Checklists.Dungeon,a,$(this))})})},initializeCustomChecklist:function(){for(var a=12,b="<li><label><input type='checkbox' />&zwnj;</label><input type='text' /></li>",c=0;a>c;c++)$("#chlCustomListDaily").append(b),$("#chlCustomListWeekly").append(b);var d=["Did dailies","Gathered home nodes","Opened JP chests","Crafted timegates","Fed Mawdrey, Star, Princess"],e=["Did guild missions","Farmed personal story key"],f=function(a,b){for(var c in b)$(a+" input[type='text']:eq("+c+")").val(b[c])};f("#chlCustomListDaily",d),f("#chlCustomListWeekly",e);var g=function(a,b,c){var d=$("#chlCustomList"+c+" input:checkbox");X.initializeChecklist(a,d.length),d.each(function(b){$(this).change(function(){var c=X.getCheckboxEnumState($(this));X.setChecklistItem(a,b,c),X.styleCheckbox(a,b,$(this)),c===X.ChecklistEnum.Checked?$(this).parent().next().addClass("chlCustomTextChecked"):$(this).parent().next().removeClass("chlCustomTextChecked")}),X.triggerCheckboxEnumState(a,b,$(this))}),$("#chlCustomUncheck"+c).click(function(){X.clearChecklist(a,X.ChecklistJob.UncheckTheChecked),$("#chlCustomList"+c+" input:checkbox").each(function(b){$(this).prop("checked")&&$(this).trigger("click"),X.styleCheckbox(a,b,$(this))})});var e=$("#chlCustomList"+c+" input:text"),f=$("#chlCustomRestore"+c);X.initializeTextlist(b,e,"Custom checklist item",48,f)};g(X.Checklists.CustomDaily,X.Textlists.CustomTextDaily,"Daily"),g(X.Checklists.CustomWeekly,X.Textlists.CustomTextWeekly,"Weekly")},clearCustomChecklistDaily:function(){$("#chlDungeonUncheck").trigger("click"),$("#chlCustomUncheckDaily").trigger("click"),X.clearChecklist(X.Checklists.Dungeon,X.ChecklistJob.UncheckTheChecked),X.clearChecklist(X.Checklists.CustomDaily,X.ChecklistJob.UncheckTheChecked)},clearCustomChecklistWeekly:function(){$("#chlCustomUncheckWeekly").trigger("click"),X.clearChecklist(X.Checklists.CustomWeekly,X.ChecklistJob.UncheckTheChecked)},initializeNotepad:function(){$("#chlNotepadButtons button").each(function(a){$(this).click(function(){$("#chlNotepadSheets textarea").hide().eq(a).show().css({opacity:.5}).animate({opacity:1},400),$("#chlNotepadButtons button").removeClass("btnFocused"),$(this).addClass("btnFocused")})}).first().click();var a=$("#chlNotepadSheets textarea"),b=$("#chlNotepadRestore");X.initializeTextlist(X.Textlists.NotepadText,a,"Notepad sheet",4096,b),a.css("height",O.Options.int_sizeNotepadHeight),a.css("font-size",O.Options.int_sizeNotepadFont),a.first().show()}},E={Exchange:{COPPER_IN_SILVER:100,COPPER_IN_GOLD:1e4,SILVER_IN_GOLD:100,CENTS_IN_DOLLAR:100,GEM_PER_DOLLAR:.8,DOLLAR_PER_GEM:1.25,GEM_SAMPLE:100,COIN_SAMPLE:1e6,TAX_LIST:.05,TAX_SOLD:.1,TAX_TOTAL:.15,TAX_INVERSE:.85,INFLUENCE_PER_COPPER:.05,COPPER_PER_INFLUENCE:20,GemInCoin:0,CoinInGem:0},Rarity:{Junk:0,Basic:1,Fine:2,Masterwork:3,Rare:4,Exotic:5,Ascended:6,Legendary:7},cNUM_ITEM_RARITIES:8,cREFRESH_LIMIT:5e3,cSEARCH_LIMIT:750,cEXCHANGE_LIMIT:250,isTradingCalculatorsInitialized:!1,RefreshTimeout:{},ProgressTimeout:{},ProgressWait:0,ProgressTick:0,SwapIndex:-1,CalculatorHistoryArray:new Array(64),CalcHistoryIndex:0,copper:function(a){return"<copper>"+a+"</copper>"},silver:function(a){return"<silver>"+a+"</silver>"},gold:function(a){return"<gold>"+a+"</gold>"},parseCoinString:function(a){if(void 0===a||null===a)return 0;var b=a.split("."),c=b.length,d=0,e=0,f=0;return 0===c?0:(1===c&&(e=parseInt(b[0])),c>=2&&(d=parseInt(b[c-1]),e=parseInt(b[c-2])),2===c&&1===b[c-1].length&&(d*=T.cBASE_10),c>=3&&(f=parseInt(b[c-3])),isFinite(d)||(d=0),isFinite(e)||(e=0),isFinite(f)||(f=0),parseInt(d+e*E.Exchange.COPPER_IN_SILVER+f*E.Exchange.COPPER_IN_GOLD))},parseGemString:function(a){return void 0===a||null===a?0:isFinite(parseInt(a))?parseInt(a):0},parseQuantityString:function(a){var b=parseInt(a);return isFinite(b)||(b=1),b},createCoinString:function(a,b){if(void 0===a||isFinite(a)===!1)return"0.00";a=parseInt(a);var c=".",d="",e="",f="",g="",h="",i="";b&&(c="",d="<gold>",e="<silver>",f="<copper>",g="</gold><goldcoin></goldcoin>",h="</silver><silvercoin></silvercoin>",i="</copper><coppercoin></coppercoin>");var j=Math.abs(~~(a/E.Exchange.COPPER_IN_GOLD)),k=Math.abs(~~(a/E.Exchange.SILVER_IN_GOLD)%E.Exchange.COPPER_IN_SILVER),l=Math.abs(a%E.Exchange.COPPER_IN_SILVER),m=0>a?"\u2212":"";return!b&&j>0&&k<T.cBASE_10&&(k="0"+k),!b&&(k>0&&l<T.cBASE_10||l<T.cBASE_10)&&(l="0"+l),j>0?m+d+j+g+c+e+k+h+c+f+l+i:k>0?m+e+k+h+c+f+l+i:b?f+l+i:m+e+"0"+c+h+f+l+i},parseMoneyString:function(a){if(void 0===a||null===a)return 0;var b=a.split("."),c=b.length,d=0,e=0;return 0===c?0:(1===c&&(e=parseInt(b[0])),c>=2&&(d=parseInt(b[c-1]),e=parseInt(b[c-2])),c>=2&&1===b[c-1].length?d*=T.cBASE_10:c>=2&&b[c-1].length>=2&&(d=parseInt(d.toString().substring(0,2))),isFinite(d)||(d=0),isFinite(e)||(e=0),parseInt(d+e*E.Exchange.CENTS_IN_DOLLAR))},createMoneyString:function(a){if(void 0===a||isFinite(a)===!1)return"0.00";a=parseInt(a);var b=Math.abs(~~(a/E.Exchange.CENTS_IN_DOLLAR)),c=Math.abs(a%E.Exchange.CENTS_IN_DOLLAR),d=0>a?"\u2212":"";return c<T.cBASE_10&&(c="0"+c),d+b+"."+c},createPercentString:function(a,b){if(void 0===a||isFinite(a)===!1)return"0%";void 0===b&&(b=0);var c=0>a?"\u2212":"";return c+Math.abs(100*a).toFixed(b)+"%"},setRarityClass:function(a,b){a.each(function(){for(var a=0;a<E.cNUM_ITEM_RARITIES;a++)$(this).removeClass("rarity"+a.toString())}),void 0!==E.Rarity[b]&&a.addClass("rarity"+E.Rarity[b].toString())},animateValue:function(a,b,c){b>c?a.css({color:"#ff2200"}).animate({color:"#ffeebb"},5e3):c>b?a.css({color:"#44dd44"}).animate({color:"#ffeebb"},5e3):a.css({"border-radius":32}).animate({"border-radius":4},1e3)},updateCoinInGem:function(){return $.getJSON(U.URL_API.GemPrice+E.Exchange.COIN_SAMPLE,function(a){void 0!==a.quantity&&(E.Exchange.CoinInGem=E.Exchange.COIN_SAMPLE/a.quantity)})},updateGemInCoin:function(){return $.getJSON(U.URL_API.CoinPrice+E.Exchange.GEM_SAMPLE,function(a){void 0!==a.quantity&&(E.Exchange.GemInCoin=E.Exchange.GEM_SAMPLE/a.quantity)})},deductTax:function(a){return parseInt(a-a*E.Exchange.TAX_TOTAL)},convertGemToMoney:function(a){return E.createMoneyString(Math.round(a*E.Exchange.DOLLAR_PER_GEM))},convertMoneyToGem:function(a){return parseInt(a*E.Exchange.GEM_PER_DOLLAR)},calculateTrading:function(a){var b=E.parseCoinString(a.find(".trdBuy").val()),c=E.parseCoinString(a.find(".trdSell").val()),d=E.parseQuantityString(a.find(".trdQuantity").val()),e=a.find(".trdCost"),f=a.find(".trdTax"),g=a.find(".trdRevenue"),h=a.find(".trdProfit"),i=a.find(".trdBreak"),j=a.find(".trdMargin"),k=(c-c*E.Exchange.TAX_TOTAL-b)*d,l=(c-c*E.Exchange.TAX_SOLD)*d,m=b*d,n=c*E.Exchange.TAX_LIST*d,o=c*E.Exchange.TAX_SOLD*d;e.val("\u2212"+E.createCoinString(Math.round(m))),f.val("\u2212"+E.createCoinString(Math.round(n))+" + \u2212"+E.createCoinString(Math.round(o))),i.val(E.createCoinString(Math.round(b/E.Exchange.TAX_INVERSE))),g.val(E.createCoinString(Math.round(l))),h.val(E.createCoinString(Math.round(k))),j.val(E.createPercentString(l/(m+n)-1,2)),$([h,j]).each(function(){var a=Math.round(k);$(this).removeClass("trdZero trdGain trdLoss"),0===a?$(this).addClass("trdZero"):a>0?$(this).addClass("trdGain"):0>a&&$(this).addClass("trdLoss")})},updateTradingDetails:function(a){var b=a.find(".trdName").val(),c=a.find(".trdItem").val();isFinite(parseInt(c))!==!1&&0!==b.length&&$.getJSON(U.URL_API.ItemDetails+c,function(b){E.setRarityClass(a.find(".trdName"),b.rarity),a.attr("data-rarity",b.rarity),a.find(".trdIcon").attr("src",b.icon),a.find(".trdLink").val(U.getChatlinkFromItemID(c))})},updateTradingPrices:function(a){var b=a.find(".trdName").val(),c=a.find(".trdItem").val();if(isFinite(parseInt(c))!==!1&&0!==b.length){var d=0,e=0,f=0,g=0,h=a.find(".trdName"),i=a.find(".trdCurrentBuy"),j=a.find(".trdCurrentSell"),k=a.find(".trdNotifyBuyLow"),l=a.find(".trdNotifyBuyHigh"),m=a.find(".trdNotifySellLow"),n=a.find(".trdNotifySellHigh"),o=E.parseCoinString(k.val()),p=E.parseCoinString(l.val()),q=E.parseCoinString(m.val()),r=E.parseCoinString(n.val());$.getJSON(U.URL_API.ItemPrices+c,function(b){d=E.parseCoinString(a.find(".trdCurrentBuy").first().val()),e=E.parseCoinString(a.find(".trdCurrentSell").first().val()),void 0!==b.buys&&(f=parseInt(b.buys.unit_price)),void 0!==b.sells&&(g=parseInt(b.sells.unit_price)),i.val(E.createCoinString(f)),j.val(E.createCoinString(g)),X.getChecklistItem(X.Checklists.TradingOverwrite,U.getSubintegerFromHTMLID(a))===X.ChecklistEnum.Checked&&(a.find(".trdBuy").val(i.val()).trigger("input"),a.find(".trdSell").val(j.val()).trigger("input"))}).done(function(){E.animateValue(i,d,f),E.animateValue(j,e,g),X.isChecked(X.Checklists.TradingNotify,a)&&(h.removeClass("trdMatched"),o>=f&&0!==o&&0!==f?(h.addClass("trdMatched"),k.addClass("trdMatched"),D.speak(D.getPhraseTitle("buy low")+" "+b)):k.removeClass("trdMatched"),f>=p&&0!==p&&0!==f?(h.addClass("trdMatched"),l.addClass("trdMatched"),D.speak(D.getPhraseTitle("buy high")+" "+b)):l.removeClass("trdMatched"),q>=g&&0!==q&&0!==g?(h.addClass("trdMatched"),m.addClass("trdMatched"),D.speak(D.getPhraseTitle("sell low")+" "+b)):m.removeClass("trdMatched"),g>=r&&0!==r&&0!==g?(h.addClass("trdMatched"),n.addClass("trdMatched"),D.speak(D.getPhraseTitle("sell high")+" "+b)):n.removeClass("trdMatched"))}).fail(function(){I.write("&quot;"+U.escapeHTML(a.find(".trdName").val())+"&quot; is not a tradeable item.")})}},updateAllTradingDetails:function(){$("#trdList .trdEntry").each(function(){E.updateTradingDetails($(this))})},updateAllTradingPrices:function(){$("#trdList .trdEntry").each(function(){E.updateTradingPrices($(this))})},clearCalculator:function(a){E.setRarityClass(a.find(".trdName")),a.find(".trdIcon").attr("src",U.URL_IMG.Placeholder),a.find(".trdItem").val("").trigger("change"),a.find(".trdCurrentBuy").val(""),a.find(".trdCurrentSell").val(""),a.find(".trdLink").val(""),a.find(".trdResultsContainer").remove(),a.find(".trdNotifyBuyLow").val("").trigger("change"),a.find(".trdNotifyBuyHigh").val("").trigger("change"),a.find(".trdNotifySellLow").val("").trigger("change"),a.find(".trdNotifySellHigh").val("").trigger("change"),E.clearMatched(a)},clearMatched:function(a){a.find(".trdName").removeClass("trdMatched"),a.find(".trdNotifyBuyLow").removeClass("trdMatched"),a.find(".trdNotifyBuyHigh").removeClass("trdMatched"),a.find(".trdNotifySellLow").removeClass("trdMatched"),a.find(".trdNotifySellHigh").removeClass("trdMatched")},initializeTrading:function(){var a,c,d,e,f,b="",g=function(a){var b=$("<div class='trdResultsContainer jsRemovable'></div>").insertAfter(a.find(".trdName"));return $("<div class='trdResults cntPopup'>"+I.cThrobber+"</div>").appendTo(b)},h=function(a,b,c){$(".trdResults .itemThrobber").remove();var d=$("<dfn class='rarity"+E.Rarity[a.rarity]+"' data-id='"+a.id+"'><img src='"+a.icon+"'>"+U.wrapSubstringHTML(a.name,b,"u")+"</dfn>").appendTo(c);d.click(function(){var a=$(this).parents(".trdResultsContainer"),b=a.parents(".trdEntry");b.find(".trdItem").val($(this).data("id")).trigger("change"),b.find(".trdName").val($(this).text()).trigger("change"),E.updateTradingDetails(b),E.updateTradingPrices(b),a.remove()})};for(a=0;a<O.Options.int_numTradingCalculators;a++)b="#trdEntry_"+a,$("#trdList").append("<div id='trdEntry_"+a+"' class='trdEntry'><div class='trdAccordion trdAccordionShut'><samp><img class='trdIcon' src='"+U.URL_IMG.Placeholder+"' /></samp><div class='trdResultsFocus'><input class='trdName' type='text' /></div><div class='trdButtons'><button class='trdSearch' tabindex='-1'>S</button><button class='trdWiki' tabindex='-1'>W</button><br /></div><div class='trdExpand'><samp>$~O</samp><input class='trdBuy' type='text' /><samp>\u2212$~</samp><input class='trdCost trdOutput' type='text' tabindex='-1' /><br /><samp>O~$</samp><input class='trdSell' type='text' /><samp>$=$</samp><input class='trdBreak trdOutput' type='text' tabindex='-1' /><br /><samp>\xd7</samp><input class='trdQuantity' type='text' /><samp>\u2212$%</samp><input class='trdTax trdOutput' type='text' tabindex='-1' /><br /><samp>+$</samp><input class='trdProfit trdOutput' type='text' tabindex='-1' /><samp>=$</samp><input class='trdRevenue trdOutput' type='text' tabindex='-1' /><br /><samp>+$%</samp><input class='trdMargin trdOutput' type='text' tabindex='-1' /><samp>[]</samp><input class='trdLink trdOutput' type='text' tabindex='-1' /><input class='trdItem trdOutput' type='text' /><br /><samp>$~!</samp><input class='trdNotifyBuyHigh' type='text' /><input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' /><input class='trdNotifyBuyLow' type='text' /><label title='<dfn>"+D.getWordCapital("overwrite")+"</dfn>: Replace your buy and sell prices with the current prices when refreshing.'><input class='trdOverwrite' type='checkbox' tabindex='-1' />&zwnj;</label><br /><samp>!~$</samp><input class='trdNotifySellHigh' type='text' /><input class='trdCurrentSell trdOutput' type='text' tabindex='-1' /><input class='trdNotifySellLow' type='text' /><label title='<dfn>"+D.getWordCapital("notify")+"</dfn>: Turn on sound notification for this item.'><input class='trdNotify' type='checkbox' tabindex='-1' />&zwnj;</label><br /><br /></div></div><div class='trdPreview'><input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' /><input class='trdCurrentSell trdOutput' type='text' tabindex='-1' /><div class='trdSwap'><button class='trdSwapUp' tabindex='-1'></button><button class='trdSwapDown' tabindex='-1'></button></div></div></div>"),I.qTip.init($(b+" .trdOverwrite").parent()),I.qTip.init($(b+" .trdNotify").parent()),c=$(b+" .trdName"),d=$(b+" .trdBuy"),e=$(b+" .trdSell"),f=$(b+" .trdQuantity"),$(b+" input").click(function(){$(this).select()}),$(b+" .trdWiki").click(function(){var a=$(this).parents(".trdEntry").find(".trdName").val();U.openExternalURL(U.getWikiLink(a))}),$(b+" .trdSearch").click(function(){var a=$(this).parents(".trdEntry").find(".trdItem").val(),b=$(this).parents(".trdEntry").find(".trdName").val();0===a.length?U.openExternalURL(U.getTradingSearchLink(b)):U.openExternalURL(U.getTradingItemLink(a,b))}),$([d,e,f]).each(function(){$(this).on("input",function(){E.calculateTrading($(this).parent())})}),$(b+" .trdCurrentBuy, "+b+" .trdCurrentSell").each(function(){$(this).dblclick(function(){var a=E.parseCoinString($(this).val());0!==a&&($(this).prev().val(E.createCoinString(a+1)).trigger("change"),$(this).next().val(E.createCoinString(a-1)).trigger("change"),E.updateTradingPrices($(this).parents(".trdEntry")))})}),$(b+" .trdSwap").hover(function(){$(this).parents(".trdEntry").find(".trdName").addClass("trdHovered"),E.SwapIndex=U.getSubintegerFromHTMLID($(this).parents(".trdEntry"))},function(){$(".trdName").removeClass("trdHovered")}),$(b+" .trdSwapUp, "+b+" .trdSwapDown").each(function(){$(this).click(function(){var a=E.SwapIndex,b=$(this).hasClass("trdSwapUp")?!0:!1;if((!b||0!==a)&&!b!==$(".trdEntry").length-1){var c=b?a-1:a+1,d=$("#trdEntry_"+a),e=$("#trdEntry_"+c),f=new Array,g=new Array,h=0,i=0;d.find("input[type='text']").each(function(){f.push($(this).val())}),e.find("input[type='text']").each(function(){g.push($(this).val())}),d.find("input[type='text']").each(function(){$(this).val(g[h]).trigger("change"),h++}),e.find("input[type='text']").each(function(){$(this).val(f[i]).trigger("change"),i++});var j=d.find(".trdIcon").attr("src"),k=e.find(".trdIcon").attr("src");d.find(".trdIcon").attr("src",k),e.find(".trdIcon").attr("src",j);var l=d.attr("data-rarity"),m=e.attr("data-rarity");d.attr("data-rarity",m),e.attr("data-rarity",l),E.setRarityClass(d.find(".trdName"),m),E.setRarityClass(e.find(".trdName"),l),E.clearMatched(d),E.clearMatched(e),d.find(".trdName").removeClass("trdHovered"),e.find(".trdName").addClass("trdHovered"),E.SwapIndex=b?E.SwapIndex-1:E.SwapIndex+1}})}),$(c).on("input",$.throttle(E.cSEARCH_LIMIT,function(){var d,a=$(this).val(),b=U.escapeHTML(a),c=$(this).parents(".trdEntry");if(a.length<3)return void E.clearCalculator(c);if(a.length>=3&&O.isInteger(a))return c.find(".trdResultsContainer").remove(),d=g(c),void $.getJSON(U.URL_API.ItemDetails+a,function(b){h(b,a,d)}).fail(function(){I.write("No results found for Item ID: "+b+"."),c.find(".trdResultsContainer").remove()});var e,f;O.Options.bol_useMainTPSearch?(e=U.URL_API.ItemSearch+a,f="data_id"):(e=U.URL_API.ItemSearchFallback+a,f="item_id"),$.ajax({dataType:"json",url:e,timeout:5e3,success:function(e){c.find(".trdResultsContainer").remove();var i,j,k,l=O.Options.bol_useMainTPSearch?e.results:e;if(l&&l.length>0)for(d=g(c),i=0;i<l.length&&i<O.Options.int_numTradingResults;i++)k=l[i],j=parseInt(k[f]),$.getJSON(U.URL_API.ItemDetails+j,function(b){h(b,a,d)});else I.write("No results found for &quot;"+b+"&quot;.")}}).fail(function(){I.write("Error retrieving search results. Current search provider may be down.<br />Switching to alternate provider..."),$("#opt_bol_useMainTPSearch").trigger("click")})})).onEnterKey(function(){U.openExternalURL(U.getTradingSearchLink($(this).val()))}).onEscapeKey(function(){$(this).parents(".trdEntry").find(".trdResultsContainer").remove()}).click(function(){$(this).trigger("input")});b="#trdEntry_0",$(b+" .trdIcon").attr("src","img/ui/faq.png"),$(b+" .trdName").val("Bifrost"),$(b+" .trdBuy").val("4500.37.68"),$(b+" .trdSell").val("550037.68"),$(b+" .trdQuantity").val("1"),$(b).css("margin-bottom","6px");var i=function(a,c,d){d=void 0===d?"":": "+d,$(b+" .trd"+a).attr("title","<dfn>"+D.getPhraseTitle(c)+"</dfn>"+d)};i("Name","name"),i("Buy","your buy"),i("Sell","your sell"),i("Quantity","quantity"),i("Cost","cost","Money needed to buy the items."),i("Break","breakpoint","Sell higher than this to make a profit."),i("Tax","tax","Pay 5% fee of sell price to list, and deduct 10% tax of sell price when sold."),i("Profit","profit","Gains after losses from buying and tax."),i("Margin","margin","Revenue over cost and fee."),i("Revenue","revenue","What you will receive at the trader."),i("Link","chatlink","Paste this in game chat to see the item."),i("Item","ID","API item number."),i("NotifyBuyLow","notify if current buy < this buy"),i("NotifyBuyHigh","notify if this buy < current buy"),i("NotifySellLow","notify if current sell < this sell"),i("NotifySellHigh","notify if this sell < current sell"),i("CurrentBuy","current buy","Double click to flank price."),i("CurrentSell","current sell","Double click to flank price."),I.qTip.init($(b+" input")),X.initializeTextlist(X.Textlists.TradingItem,$("#trdList .trdItem"),null,16),X.initializeTextlist(X.Textlists.TradingName,$("#trdList .trdName"),null,64),X.initializeTextlist(X.Textlists.TradingBuy,$("#trdList .trdBuy"),null,16),X.initializeTextlist(X.Textlists.TradingSell,$("#trdList .trdSell"),null,16),X.initializeTextlist(X.Textlists.TradingQuantity,$("#trdList .trdQuantity"),null,16),X.initializeTextlist(X.Textlists.NotifyBuyLow,$("#trdList .trdNotifyBuyLow"),null,16),X.initializeTextlist(X.Textlists.NotifyBuyHigh,$("#trdList .trdNotifyBuyHigh"),null,16),X.initializeTextlist(X.Textlists.NotifySellLow,$("#trdList .trdNotifySellLow"),null,16),X.initializeTextlist(X.Textlists.NotifySellHigh,$("#trdList .trdNotifySellHigh"),null,16),X.initializeCheckboxlist(X.Checklists.TradingOverwrite,$("#trdList .trdOverwrite"),X.ChecklistJob.CheckAll),X.initializeCheckboxlist(X.Checklists.TradingNotify,$("#trdList .trdNotify"),X.ChecklistJob.CheckAll),$("#trdList .trdSell").trigger("input"),E.updateAllTradingDetails(),$("#trdToggle").click(function(){$("#trdEntry_0 .trdBuy").is(":visible")?($(".trdAccordion").addClass("trdAccordionShut").removeClass("trdAccordionOpen"),$(".trdPreview").removeClass("cssHidden")):($(".trdAccordion").removeClass("trdAccordionShut").addClass("trdAccordionOpen"),$(".trdPreview").addClass("cssHidden"))}),$("#trdRefresh").click($.throttle(E.cREFRESH_LIMIT,function(){E.loopRefresh(!0)})),$("#trdMute").click(function(){D.resetSpeechQueue()}),$("#trdPrint").click(function(){I.clear(),I.write("ItemID,Name,Buy,Sell,Quantity,BuyLow,BuyHigh,SellLow,SellHigh");for(var a=X.Textlists.TradingItem.value.length,b=0;a>b;b++)I.write(U.escapeHTML(X.Textlists.TradingItem.value[b])+","+U.escapeHTML(X.Textlists.TradingName.value[b])+","+U.escapeHTML(X.Textlists.TradingBuy.value[b])+","+U.escapeHTML(X.Textlists.TradingSell.value[b])+","+U.escapeHTML(X.Textlists.TradingQuantity.value[b])+","+U.escapeHTML(X.Textlists.NotifyBuyLow.value[b])+","+U.escapeHTML(X.Textlists.NotifyBuyHigh.value[b])+","+U.escapeHTML(X.Textlists.NotifySellLow.value[b])+","+U.escapeHTML(X.Textlists.NotifySellHigh.value[b]),30)})},updateCoinTo:function(a){var b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=$("#trdExchange .trdCoinTo"),k=$("#trdExchange .trdCoinToGem"),l=$("#trdExchange .trdCoinToMoney"),m=$("#trdExchange .trdCoinToGemInverse"),n=$("#trdExchange .trdCoinToMoneyInverse"),o=E.parseCoinString(j.val());0===o?(k.val(""),l.val(""),m.val(""),n.val("")):($.getJSON(U.URL_API.GemPrice+o,function(a){void 0!==a.quantity&&(b=parseInt(k.val()),d=E.parseMoneyString(l.val()),c=parseInt(a.quantity),e=Math.round(c*E.Exchange.DOLLAR_PER_GEM),k.val(c),l.val(E.createMoneyString(e)))}).always(function(){(void 0===a||a)&&(E.animateValue(k,b,c),E.animateValue(l,d,e)),0===c&&(k.val("0"),l.val("0"))}),E.updateGemInCoin().always(function(){0!==E.Exchange.GemInCoin&&(f=parseInt(m.val()),h=E.parseMoneyString(n.val()),g=Math.round(o*E.Exchange.GemInCoin),i=Math.round(g*E.Exchange.DOLLAR_PER_GEM),m.val(g),n.val(E.createMoneyString(i)),(void 0===a||a)&&(E.animateValue(m,f,g),E.animateValue(n,h,i)))}))},updateGemTo:function(a){var b=0,c=0,d=0,e=0,f=0,g=0,h=$("#trdExchange .trdGemTo"),i=$("#trdExchange .trdGemToCoin"),j=$("#trdExchange .trdGemToMoney"),k=$("#trdExchange .trdGemToCoinInverse"),l=h.val();0===l?(i.val(""),j.val("")):($.getJSON(U.URL_API.CoinPrice+l,function(a){void 0!==a.quantity&&(b=E.parseCoinString(i.val()),d=E.parseMoneyString(j.val()),c=parseInt(a.quantity),e=parseInt(l*E.Exchange.DOLLAR_PER_GEM),i.val(E.createCoinString(c)),j.val(E.createMoneyString(e)))}).always(function(){(void 0===a||a)&&(E.animateValue(i,b,c),E.animateValue(j,d,e)),0===c&&(i.val("0"),j.val("0"))}),E.updateCoinInGem().always(function(){0!==E.Exchange.CoinInGem&&(f=E.parseCoinString(k.val()),g=Math.round(l*E.Exchange.CoinInGem),k.val(E.createCoinString(g)),(void 0===a||a)&&E.animateValue(k,f,g))}))},updateMoneyTo:function(a){var b=0,c=0,d=0,e=0,f=$("#trdExchange .trdMoneyTo"),g=$("#trdExchange .trdMoneyToGem"),h=$("#trdExchange .trdMoneyToCoin"),i=E.parseMoneyString(f.val()),j=i*E.Exchange.GEM_PER_DOLLAR;0===i?(g.val(""),h.val("")):$.getJSON(U.URL_API.CoinPrice+j,function(a){void 0!==a.quantity&&(b=parseInt(g.val()),d=E.parseCoinString(h.val()),c=j,e=parseInt(a.quantity),g.val(j),h.val(E.createCoinString(e)))}).always(function(){(void 0===a||a)&&(E.animateValue(g,b,c),E.animateValue(h,d,e)),0===e&&(g.val("0"),h.val("0"))})},updateNotifyCoinTo:function(a){var b=0,c=0,d=$("#trdExchange .trdNotifyCoinTo"),e=$("#trdExchange .trdNotifyCoinToGem"),f=$("#trdExchange .trdNotifyCoinToGemHigh"),g=E.parseGemString(f.val()),h=E.parseCoinString(d.val());0===h?e.val(""):$.getJSON(U.URL_API.GemPrice+h,function(a){void 0!==a.quantity&&(b=parseInt(e.val()),c=parseInt(a.quantity),e.val(c))}).always(function(){(void 0===a||a)&&E.animateValue(e,b,c),0===c?e.val("0"):c>=g&&0!==g?(f.addClass("trdMatched"),D.speak(D.getPhraseTitle("buy gem high"))):f.removeClass("trdMatched")})},updateNotifyGemTo:function(a){var b=0,c=0,d=$("#trdExchange .trdNotifyGemTo"),e=$("#trdExchange .trdNotifyGemToCoin"),f=$("#trdExchange .trdNotifyGemToCoinHigh"),g=E.parseCoinString(f.val()),h=d.val();0===h?e.val(""):$.getJSON(U.URL_API.CoinPrice+h,function(a){void 0!==a.quantity&&(b=E.parseCoinString(e.val()),c=parseInt(a.quantity),e.val(E.createCoinString(c)))}).always(function(){(void 0===a||a)&&E.animateValue(e,b,c),0===c?e.val("0"):c>=g&&0!==g?(f.addClass("trdMatched"),D.speak(D.getPhraseTitle("buy coin high"))):f.removeClass("trdMatched")})},updateAllExchange:function(){E.updateCoinTo(),E.updateGemTo(),E.updateMoneyTo(),E.updateNotifyCoinTo(),E.updateNotifyGemTo()},initializeExchange:function(){var a=$("#trdExchange .trdCoinTo"),b=$("#trdExchange .trdGemTo"),c=$("#trdExchange .trdMoneyTo"),d=$("#trdExchange .trdNotifyCoinTo"),e=$("#trdExchange .trdNotifyGemTo"),f=$("#trdExchange .trdNotifyCoinToGemHigh"),g=$("#trdExchange .trdNotifyGemToCoinHigh");a.val("200.."),b.val("4000"),c.val("50");var h=function(a,b){$("#trdExchange .trd"+a).attr("title","<dfn>"+D.getPhraseTitle(b)+"</dfn>")};h("CoinTo","your coin"),h("GemTo","your gem"),h("MoneyTo","your dollar"),h("CoinToGem","your coin to gem"),h("GemToCoin","your gem to coin"),h("MoneyToGem","your dollar to gem"),h("CoinToMoney","your coin to dollar"),h("GemToMoney","your gem to dollar"),h("MoneyToCoin","your dollar to coin"),h("CoinToGemInverse","gem to your coin"),h("GemToCoinInverse","coin to your gem"),h("CoinToMoneyInverse","dollar to your coin"),h("NotifyCoinTo","your coin"),h("NotifyGemTo","your gem"),h("NotifyCoinToGem","your coin to current gem"),h("NotifyGemToCoin","your gem to current coin"),h("NotifyCoinToGemHigh","notify if current gem > this gem"),h("NotifyGemToCoinHigh","notify if current coin > this coin"),I.qTip.init($("#trdExchange input")),$("#trdExchange input").click(function(){$(this).select()}),a.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateCoinTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateCoinTo()})),b.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateGemTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateGemTo()})),c.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateMoneyTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateMoneyTo()})),d.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyCoinTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyCoinTo()})),e.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyGemTo(!1)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyGemTo()})),X.initializeTextlist(X.Textlists.ExchangeUnit,$([a,b,c,d,e,f,g]),null,16),$(".trdProgress").data("width",$(".trdProgress").width()),E.isTradingCalculatorsInitialized=!0,E.loopRefresh()},cancelLoopRefresh:function(){window.clearTimeout(E.ProgressTimeout),window.clearTimeout(E.RefreshTimeout),$(".trdProgress").width($(".trdProgress").data("width"))},animateProgress:function(){var a=$(".trdProgress");E.ProgressTick<E.ProgressWait&&a.width(a.width()-a.data("width")/E.ProgressWait),E.ProgressTick-=1,E.ProgressTimeout=setTimeout(E.animateProgress,T.cMILLISECONDS_IN_SECOND)},loopRefresh:function(a){if(E.cancelLoopRefresh(),(a===!0||O.Options.bol_refreshPrices)&&(E.updateAllTradingPrices(),E.updateAllExchange(),O.Options.bol_refreshPrices)){var b=O.Options.int_secTradingRefresh*T.cMILLISECONDS_IN_SECOND;E.ProgressTick=O.Options.int_secTradingRefresh,E.ProgressWait=O.Options.int_secTradingRefresh,E.animateProgress(),E.RefreshTimeout=setTimeout(E.loopRefresh,b)}},initializeCalculator:function(){$("#trdCalculation .trdCalculator").onEnterKey(function(){E.doCalculation($(this))}).click(function(){$(this).select()}),$("#trdCalculation .trdCalcSubmit").click(function(){E.doCalculation($(this).prev())});for(var a in E.CalculatorHistoryArray)E.CalculatorHistoryArray[a]="";$("#trdCalculation .trdCalculator").onArrowUpKey(function(){if(0===E.CalcHistoryIndex){var a=U.stripToCalculation($(this).val());E.CalculatorHistoryArray[0]!==$(this).val().toString()&&(E.CalculatorHistoryArray.pop(),E.CalculatorHistoryArray.unshift(a))}E.CalcHistoryIndex+1<E.CalculatorHistoryArray.length&&(E.CalcHistoryIndex++,$(this).val(E.CalculatorHistoryArray[E.CalcHistoryIndex]))}),$("#trdCalculation .trdCalculator").onArrowDownKey(function(){E.CalcHistoryIndex-1>=0&&(E.CalcHistoryIndex--,$(this).val(E.CalculatorHistoryArray[E.CalcHistoryIndex]))})},doCalculation:function(pCalculator){var expression=U.stripToCalculation(pCalculator.val()),result="";try{result=eval(expression)}catch(pException){}pCalculator.val(parseFloat(result)).select(),result.toString().length>0&&(E.CalculatorHistoryArray.pop(),
E.CalculatorHistoryArray.unshift(expression),E.CalcHistoryIndex=0)}},D={Dictionary:{s_TEMPLATE:{de:"",es:"",fr:"",cs:"",it:"",pl:"",pt:"",ru:"",zh:""},s_w:{de:"w",es:"s",fr:"s",cs:"t",it:"s",pl:"t",pt:"s",ru:"\u043d",zh:"\u9031"},s_d:{de:"t",es:"d",fr:"j",cs:"d",it:"g",pl:"d",pt:"d",ru:"\u0434",zh:"\u65e5"},s_h:{de:"h",es:"h",fr:"h",cs:"h",it:"o",pl:"g",pt:"h",ru:"\u0447",zh:"\u6642"},s_m:{de:"m",es:"m",fr:"m",cs:"m",it:"m",pl:"m",pt:"m",ru:"\u043c",zh:"\u5206"},s_s:{de:"s",es:"s",fr:"s",cs:"s",it:"s",pl:"s",pt:"s",ru:"\u0441",zh:"\u79d2"},s_hour:{de:"stunde",es:"hora",fr:"heure",cs:"hodina",it:"ora",pl:"godzin\u0119",pt:"hora",ru:"\u0447\u0430\u0441",zh:"\u6642"},s_minute:{de:"minute",es:"minuto",fr:"minute",cs:"minuta",it:"minuto",pl:"minuta",pt:"minuto",ru:"\u043c\u0438\u043d\u0443\u0442\u0430",zh:"\u5206"},s_second:{de:"sekunde",es:"segundo",fr:"seconde",cs:"sekunda",it:"secondo",pl:"sekund",pt:"segundo",ru:"\u0441\u0435\u043a\u0443\u043d\u0434\u0443",zh:"\u79d2"},s_hours:{de:"studen",es:"horas",fr:"heures",cs:"hodin",it:"secondi",pl:"godzin",pt:"horas",ru:"\u0447\u0430\u0441\u043e\u0432",zh:"\u6642"},s_minutes:{de:"minuten",es:"minutos",fr:"minutes",cs:"minut",it:"minuti",pl:"minut",pt:"minutos",ru:"\u043c\u0438\u043d\u0443\u0442",zh:"\u5206"},s_seconds:{de:"sekunden",es:"segundos",fr:"secondes",cs:"sekund",it:"ore",pl:"sekund",pt:"segundos",ru:"\u0441\u0435\u043a\u0443\u043d\u0434",zh:"\u79d2"},s_half_an_hour:{de:"eine halbe stunde",es:"media hora",fr:"demi-heure",cs:"p\u016fl hodiny",it:"mezz'ora",pl:"p\xf3\u0142 godziny",pt:"meia hora",ru:"\u043f\u043e\u043b\u0447\u0430\u0441\u0430",zh:"\u534a\u5c0f\u6642"},s_timers:{de:"zeitgeber",es:"temporizadores",fr:"minuteurs",cs:"\u010dasova\u010de",it:"timer",pl:"czasomierzy",pt:"temporizadores",ru:"\u0442\u0430\u0439\u043c\u0435\u0440\u043e\u0432",zh:"\u8a08\u6642\u5668"},s_tools:{de:"extras",es:"herramientas",fr:"outils",cs:"n\xe1stroje",it:"strumenti",pl:"narz\u0119dzia",pt:"ferramentas",ru:"\u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b",zh:"\u5de5\u5177"},s_help:{de:"hilfe",es:"ayuda",fr:"assistance",cs:"pomoci",it:"guida",pl:"pomoc",pt:"ajuda",ru:"\u043f\u043e\u043c\u043e\u0449\u044c",zh:"\u8f14\u52a9"},s_options:{de:"optionen",es:"opci\xf3nes",fr:"options",cs:"mo\u017enosti",it:"opzioni",pl:"opcje",pt:"op\xe7\xf5es",ru:"\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",zh:"\u9078\u9805"},s_arrival:{de:"ankunft",es:"llegada",fr:"arriv\xe9e",cs:"p\u0159\xedjezd",it:"arrivo",pl:"przyjazd",pt:"chegada",ru:"\u043f\u0440\u0438\u0431\u044b\u0442\u0438\u0435",zh:"\u5230\u4f86"},s_world:{de:"welt",es:"mundo",fr:"monde",cs:"sv\u011bt",it:"mondo",pl:"\u015bwiat",pt:"mundo",ru:"\u0431\u043e\u0441\u0441",zh:"\u4e16\u754c"},s_boss:{de:"boss",es:"jefe",fr:"chef",cs:"boss",it:"boss",pl:"szef",pt:"chefe",ru:"\u043c\u0438\u0440\u043e\u0432\u043e\u0439",zh:"\u982d\u76ee"},s_event:{de:"event",es:"evento",fr:"\xe9v\xe9nement",cs:"ud\xe1lost",it:"evento",pl:"wydarzenie",pt:"evento",ru:"\u0441\u043e\u0431\u044b\u0301\u0442\u0438\u0435",zh:"\u4e8b\u4ef6"},s_section:{de:"paragraph",es:"secci\xf3n",fr:"section",cs:"odd\xedl",it:"sezione",pl:"sekcja",pt:"se\xe7\xe3o",ru:"\u0440\u0430\u0437\u0434\u0435\u043b",zh:"\u7bc0"},s_map:{de:"karte",es:"mapa",fr:"carte",cs:"mapa",it:"mappa",pl:"mapa",pt:"mapa",ru:"\u043a\u0430\u0301\u0440\u0442\u0430",zh:"\u5730\u5716"},s_center:{de:"zentrum",es:"centro",fr:"centre",cs:"st\u0159ed",it:"centro",pl:"\u015brodek",pt:"centro",ru:"\u0446\u0435\u043d\u0442\u0440",zh:"\u4e2d\u5fc3"},s_character:{de:"person",es:"personaje",fr:"personnage",cs:"postava",it:"personaggio",pl:"posta\u0107",pt:"personagem",ru:"\u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0301\u0436",zh:"\u4eba\u7269"},s_completion:{de:"abschluss",es:"finalizaci\xf3n",fr:"progression",cs:"dokon\u010den\xed",it:"completamento",pl:"uko\u0144czenie",pt:"progress\xe3o",ru:"\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435",zh:"\u5b8c\u6210"},s_route:{de:"route",es:"ruta",fr:"route",cs:"trasa",it:"percorso",pl:"trasa",pt:"rota",ru:"\u043c\u0430\u0440\u0448\u0440\u0443\u0301\u0442",zh:"\u8def\u7dda"},s_pins:{de:"nadeln",es:"agujas",fr:"aiguilles",cs:"jehly",it:"aghi",pl:"ig\u0142y",pt:"agulhas",ru:"\u0438\u0433\u043b\u044b",zh:"\u91dd"},s_Vista:{de:"Aussichtspunkt",es:"Vista",fr:"Panorama",zh:"\u9ce5\u77b0\u9ede"},s_Hero_Challenge:{de:"Heldenherausforderung",es:"Desaf\xedo de h\xe9roe",fr:"D\xe9fi de h\xe9ros",zh:"\u6280\u80fd\u9ede"},s_checklist:{de:"pr\xfcfliste",es:"lista de comprobaci\xf3n",fr:"liste de contr\xf4le",cs:"kontroln\xed seznam",it:"elenco di controllo",pl:"lista kontrolna",pt:"lista de verifica\xe7\xe3o",ru:"\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",zh:"\u6aa2\u67e5\u6e05\u55ae"},s_subscription:{de:"abonnement",es:"suscripci\xf3n",fr:"abonnement",cs:"p\u0159edplatn\xe9",it:"sottoscrizione",pl:"abonament",pt:"assinatura",ru:"\u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0430",zh:"\u8a02\u95b1"},s_alarm:{de:"alarm",es:"alarma",fr:"alarme",cs:"alarmu",it:"allarme",pl:"alarmu",pt:"alarme",ru:"\u0431\u0443\u0434\u0438\u043b\u044c\u043d\u0438\u043a\u0430",zh:"\u9b27\u9418"},s_mode:{de:"modus",es:"modo",fr:"mode",cs:"re\u017eim",it:"modalit\xe0",pl:"tryb",pt:"modo",ru:"\u0440\u0435\u0436\u0438\u043c",zh:"\u65b9\u5f0f"},s_chatlink:{de:"chatlink",es:"v\xednculo chat",fr:"lien chat",cs:"chat odkaz",it:"collegamento chat",pl:"czat \u0142\u0105cze",pt:"link bate-papo",ru:"\u0447\u0430\u0442 \u0441\u0432\u044f\u0437\u044c",zh:"\u9023\u7d50\u804a\u5929"},s_wvw:{de:"WvW",es:"McM",fr:"McM",cs:"SpS",it:"McM",pl:"SkS",pt:"McM",ru:"\u041c\u043f\u041c",zh:"\u4e16\u754c\u6230\u5834"},s_is:{de:"ist",es:"es",fr:"est",cs:"je",it:"\xe8",pl:"jest",pt:"\xe9",ru:"\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f",zh:"\u662f"},s_subscribe:{de:"abonnieren",es:"subscribir",fr:"abonner",cs:"p\u0159edplatit si",it:"sottoscrivere",pl:"abonowa\u0107",pt:"assinar",ru:"\u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",zh:"\u8a02\u95b1"},s_will_start:{de:"wird starten",es:"se iniciar\xe1",fr:"d\xe9butera",cs:"za\u010dne",it:"inizier\xe0",pl:"rozpocznie si\u0119",pt:"come\xe7ar\xe1",ru:"\u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f",zh:"\u958b\u59cb"},s_click:{de:"klicken",es:"clic",fr:"cliquer",cs:"kliknout",it:"clic",pl:"klika\u0107",pt:"clicar",ru:"\u0449\u0435\u043b\u043a\u043d\u0443\u0442\u044c",zh:"\u6309\u4e00\u4e0b"},s_clear:{de:"l\xf6schen",es:"borrar",fr:"effacer",cs:"vymazat",it:"cancella",pl:"wyczy\u015b\u0107",pt:"limpar",ru:"\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",zh:"\u6e05\u9664"},s_toggle:{de:"umschalten",es:"alternar",fr:"basculer",cs:"p\u0159epnout",it:"alterna",pl:"prze\u0142\u0105czanie",pt:"alternar",ru:"\u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c",zh:"\u5207\u63db"},s_expand:{de:"erweitern",es:"expandir",fr:"d\xe9velopper",cs:"rozbalit",it:"espandere",pl:"rozwin\u0105\u0107",pt:"expandir",ru:"\u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c",zh:"\u5c55\u958b"},s_collapse:{de:"reduzieren",es:"contraer",fr:"r\xe9duire",cs:"sbalit",it:"comprimere",pl:"zwin\u0105\u0107",pt:"recolher",ru:"\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c",zh:"\u647a\u758a"},s_draw:{de:"zeichnen",es:"dibujar",fr:"dessiner",cs:"kreslit",it:"disegnare",pl:"rysowa\u0107",pt:"desenhar",ru:"\u0440\u0438\u0441\u043e\u0432\u0430\u0301\u0442\u044c",zh:"\u753b"},s_ago:{de:"vor",es:"hace",fr:"il ya",cs:"p\u0159ed",it:"fa",pl:"temu",pt:"h\xe1",ru:"\u043d\u0430\u0437\u0430\u0434",zh:"\u524d"},s_also:{de:"auch",es:"tambi\xe9n",fr:"aussi",cs:"tak\xe9",it:"anche",pl:"te\u017c",pt:"tamb\xe9m",ru:"\u0442\u043e\u0301\u0436\u0435",zh:"\u4e5f"},s_checked:{de:"abgehakt",es:"visto",fr:"coch\xe9",cs:"od\u0161krtnout",it:"controllato",pl:"zako\u0144czony",pt:"marcado",ru:"\u0432\u043a\u043b\u044e\u0447\u0435\u043d",zh:"\u52fe\u6389"},s_current:{de:"aktuelle",es:"actual",fr:"actuel",cs:"sou\u010dasn\xfd",it:"corrente",pl:"bie\u017c\u0105cy",pt:"corrente",ru:"\u0442\u0435\u043a\u0443\u0449\u0438\u0439",zh:"\u6d3b\u671f"},s_daily:{de:"t\xe4glich",es:"diaria",fr:"quotidien",cs:"denn\xed",it:"giornaliero",pl:"dzienny",pt:"di\xe1rio",ru:"\u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e",zh:"\u6bcf\u5929"},s_next:{de:"n\xe4chste",es:"siguiente",fr:"prochain",cs:"p\u0159\xed\u0161t\xed",it:"seguente",pl:"nast\u0119pny",pt:"pr\xf3ximo",ru:"\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439",zh:"\u4e0b\u4e00"},s_off:{de:"aus",es:"desactivado",fr:"d\xe9sactiv\xe9",cs:"vypnuto",it:"disattivato",pl:"wy\u0142\u0105czany",pt:"desativado",ru:"\u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u043e",zh:"\u95dc"},s_predicted:{de:"vorhergesagt",es:"previsto",fr:"pr\xe9dit",cs:"p\u0159edpov\xeddal",it:"previsto",pl:"przewiduje",pt:"predito",ru:"\u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439",zh:"\u9810\u6e2c"},s_subscribed:{de:"abonniert",es:"suscrito",fr:"souscrit",cs:"odeb\xedran\xe9",it:"sottoscritti",pl:"subskrypcji",pt:"assinado",ru:"\u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d",zh:"\u8a02\u95b1"},s_then:{de:"dann",es:"luego",fr:"puis",cs:"pak",it:"poi",pl:"potem",pt:"ent\xe3o",ru:"\u0437\u0430\u0442\u0435\u043c",zh:"\u63a5\u8457"},s_at:{de:"um",es:"a",fr:"\xe0",cs:"v",it:"a",pl:"o",pt:"a",ru:"\u0432",zh:"\u5728"},s_and:{de:"und",es:"y",fr:"et",cs:"a",it:"e",pl:"i",pt:"e",ru:"\u0438",zh:"\u548c"},s_if:{de:"wenn",es:"si",fr:"si",cs:"jestli\u017ee",it:"se",pl:"je\u015bli",pt:"se",ru:"\u0435\u0441\u043b\u0438",zh:"\u5982\u679c"},s_in:{de:"in",es:"en",fr:"en",cs:"za",it:"in",pl:"w",pt:"em",ru:"\u0432",zh:"\u5728"},s_to:{de:"zu",es:"a",fr:"contre",cs:"ku",it:"a",pl:"na",pt:"a",ru:"\u0434\u043e",zh:"\u6bd4"},s_Scheduled_Bosses:{de:"Geplant",es:"Programado",fr:"Planifi\xe9",cs:"Pl\xe1novan\xe9",it:"Pianificata",pl:"Zaplanowane",pt:"Agendado",ru:"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d",zh:"\u5df2\u6392\u7a0b"},s_Dry_Top:{de:"Trockenkuppe",es:"Cima Seca",fr:"Cimes\xe8che",zh:"\u5e72\u6db8\u9ad8\u5730"},s_Legacy_Bosses:{de:"Legacy",es:"Heredado",fr:"H\xe9rit\xe9",cs:"Star\u0161\xed",it:"Legacy",pl:"Starsze",pt:"Herdado",ru:"\u0423\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0439",zh:"\u820a\u7248"},s_Orr_Temples:{de:"Tempel",es:"Templos",fr:"Temples",cs:"Chr\xe1my",it:"Templi",pl:"\u015awi\u0105tynie",pt:"Templos",ru:"\u0425\u0440\u0430\u043c\u044b",zh:"\u5bfa\u5edf"},s_Full_Timetable:{de:"Zeitplan",es:"Horario",fr:"Horaire",cs:"Pl\xe1n",it:"Programma",pl:"Harmonogram",pt:"Hor\xe1rio",ru:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",zh:"\u6642\u9593\u8868"},s_Gem_Store_Promotions:{de:"Edelsteinshop Aktionen",es:"Tienda de gemas promociones",fr:"Boutique aux gemmes promotions",cs:"Drahokam Prodejna Propagace",it:"Negozio gemma promozioni",pl:"Klejnot Sklep Promocje",pt:"Loja gema promo\xe7\xf5es",ru:"\u0421\u0430\u043c\u043e\u0446\u0432\u0435\u0301\u0442 \u041c\u0430\u0433\u0430\u0437\u0438\u0301\u043d \u041f\u0440\u043e\u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f",zh:"\u5bf6\u77f3\u5546\u5e97\u4fc3\u92b7"},s_news:{de:"nachrichten",es:"noticias",fr:"actualit\xe9s",cs:"zpr\xe1vy",it:"notizie",pl:"wiadomo\u015bci",pt:"not\xedcias",ru:"\u043d\u043e\u0432\u043e\u0441\u0442\u0438",zh:"\u65b0\u805e"},s_simple:{de:"einfach",es:"simple",fr:"simple",cs:"prost\xfd",it:"semplice",pl:"prosty",pt:"simples",ru:"\u043f\u0440\u043e\u0441\u0442\u043e\u0439",zh:"\u7c21\u55ae"},s_mobile:{de:"mobil",es:"m\xf3vil",fr:"mobile",cs:"mobiln\xed",it:"mobile",pl:"mobilna",pt:"m\xf3vel",ru:"\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439",zh:"\u884c\u52d5"},s_tile:{de:"kachel",es:"mosaico",fr:"mosa\xefque",cs:"dla\u017edice",it:"affianca",pl:"s\u0105siaduj\u0105co",pt:"ladrilho",ru:"\u0437\u0430\u043c\u043e\u0441\u0442\u0438\u0442\u044c",zh:"\u78da"},s_chests:{de:"truhen",es:"cofres",fr:"coffres",cs:"truhly",it:"scrigni",pl:"skrzynie",pt:"ba\xfas",ru:"\u0441\u0443\u043d\u0434\u0443\u043a\u0438",zh:"\u5bf6\u7bb1"},s_this:{de:"dieses",es:"esto",fr:"ce",cs:"toto",it:"questo",pl:"to",pt:"isto",ru:"\u044d\u0442\u043e",zh:"\u9019"},s_your:{de:"dein",es:"tu",fr:"ton",cs:"tv\u016fj",it:"tuo",pl:"tw\xf3j",pt:"teu",ru:"\u0442\u0432\u043e\u0439",zh:"\u4f60\u7684"},s_name:{de:"namen",es:"nombre",fr:"nom",cs:"n\xe1zev",it:"nome",pl:"nazwa",pt:"nome",ru:"\u0438\u043c\u044f",zh:"\u540d"},s_buy:{de:"kaufen",es:"comprar",fr:"acheter",cs:"koupit",it:"comprare",pl:"kupi\u0107",pt:"comprar",ru:"\u043a\u0443\u043f\u0438\u0442\u044c",zh:"\u8cb7"},s_sell:{de:"verkaufen",es:"vender",fr:"vendre",cs:"prodat",it:"vendere",pl:"sprzeda\u0107",pt:"vender",ru:"\u043f\u0440\u043e\u0434\u0430\u0442\u044c",zh:"\u8ce3"},s_quantity:{de:"quantit\xe4t",es:"cantidad",fr:"quantit\xe9",cs:"mno\u017estv\xed",it:"quantit\xe0",pl:"ilo\u015b\u0107",pt:"quantidade",ru:"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",zh:"\u91cf"},s_profit:{de:"gewinn",es:"beneficio",fr:"profit",cs:"zisk",it:"profitto",pl:"zysk",pt:"lucro",ru:"\u043f\u0440\u0438\u0431\u044b\u043b\u044c",zh:"\u5229\u6f64"},s_cost:{de:"kosten",es:"costo",fr:"co\xfbt",cs:"n\xe1klady",it:"costo",pl:"koszt",pt:"custo",ru:"\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",zh:"\u6210\u672c"},s_breakpoint:{de:"gewinnschwelle",es:"punto muerto",fr:"seuil de rentabilit\xe9",cs:"bod zvratu",it:"punto di pareggio",pl:"pr\xf3g rentowno\u015bci",pt:"ponto de equil\xedbrio",ru:"\u0442\u043e\u0447\u043a\u0430 \u0431\u0435\u0437\u0443\u0431\u044b\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438",zh:"\u6536\u652f\u5e73\u8861\u9ede"},s_tax:{de:"steuer",es:"impuestos",fr:"imp\xf4t",cs:"da\u0148",it:"fiscale",pl:"podatek",pt:"fiscal",ru:"\u043d\u0430\u043b\u043e\u0433",zh:"\u7a05"},s_revenue:{de:"einnahmen",es:"ingresos",fr:"revenus",cs:"p\u0159\xedjmy",it:"entrate",pl:"dochody",pt:"receita",ru:"\u0434\u043e\u0445\u043e\u0434\u043e\u0432",zh:"\u6536\u5165"},s_margin:{de:"marge",es:"margen",fr:"marge",cs:"mar\u017ee",it:"margine",pl:"mar\u017ca",pt:"margem",ru:"\u0432\u0430\u043b\u043e\u0432\u0430\u044f",zh:"\u908a\u969b"},s_low:{de:"niedrigen",es:"bajo",fr:"bas",cs:"n\xedzk\xfd",it:"bassa",pl:"niski",pt:"baixa",ru:"\u043d\u0438\u0437\u043a\u0430\u044f",zh:"\u4f4e"},s_high:{de:"hohen",es:"alta",fr:"haut",cs:"vysok\xfd",it:"alta",pl:"wysoki",pt:"alta",ru:"\u0432\u044b\u0441\u043e\u043a\u0430\u044f",zh:"\u9ad8"},s_notify:{de:"benachrichtigen",es:"notificar",fr:"notifier",cs:"ozn\xe1mit",it:"notifica",pl:"powiadom",pt:"notificar",ru:"\u0443\u0432\u0435\u0434\u043e\u043c\u0438\u0442\u044c",zh:"\u901a\u77e5"},s_overwrite:{de:"\xfcberschreiben",es:"sobrescribir",fr:"remplacer",cs:"p\u0159epsat",it:"sovrascrivi",pl:"zast\u0105p",pt:"substituir",ru:"\u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c",zh:"\u8986\u5beb"},s_gem:{de:"edelsteine",es:"gema",fr:"gemme",cs:"klenot",it:"gemma",pl:"klejnot",pt:"gema",ru:"\u0441\u0430\u043c\u043e\u0446\u0432\u0435\u0442",zh:"\u5bf6\u77f3"},s_coin:{de:"m\xfcnze",es:"moneda",fr:"monnaie",cs:"mince",it:"moneta",pl:"moneta",pt:"moeda",ru:"\u043c\u043e\u043d\u0435\u0442\u0430",zh:"\u786c\u5e63"},s_dollar:{de:"dollar",es:"d\xf3lar",fr:"dollar",cs:"dolar",it:"dollaro",pl:"polar",pt:"d\xf3lar",ru:"\u0434\u043e\u043b\u043b\u0430\u0440",zh:"\u5143"}},getTranslation:function(a){if(O.Options.enu_Language===O.OptionEnum.Language.Default)return a;var b,c,d=a;-1!==d.indexOf(" ")&&(d=d.replace(/ /g,"_"));var b=D.Dictionary["s_"+d];return b&&(c=b[O.Options.enu_Language])?c:a},getWord:function(a){return O.Options.enu_Language===O.OptionEnum.Language.Default?a:D.Dictionary["s_"+a][O.Options.enu_Language]},getWordCapital:function(a){return U.toFirstUpperCase(D.getTranslation(a))},getPhrase:function(a,b){void 0===b&&(b=U.CaseEnum.None);var c=a.split(" ");if(b===U.CaseEnum.Original)for(var d in c)c[d]=D.duplicateCase(c[d],D.getTranslation(c[d].toLowerCase()));else for(var d in c)c[d]=D.getTranslation(c[d]);var e=D.isLanguageLogographic()?c.join(""):c.join(" ");return b===U.CaseEnum.None||b===U.CaseEnum.Original?e:U.toCase(e,b)},getPhraseTitle:function(a){return D.getPhrase(a,U.CaseEnum.Every)},getPhraseOriginal:function(a){return O.Options.enu_Language!==O.OptionEnum.Language.Default?D.getPhrase(a,U.CaseEnum.Original):a},getModifiedWord:function(a,b,c){return D.getPhrase(D.orderModifier(a,b),c)},orderModifier:function(a,b){return D.isLanguageModifierFirst()?b+" "+a:a+" "+b},duplicateCase:function(a,b){var c=a.charAt(0);if(c===c.toLowerCase())return b;if(a.length>2&&b.length>2){var d=a.charAt(1);if(c===c.toUpperCase()&&d===d.toUpperCase())return b.toUpperCase()}return b.charAt(0).toUpperCase()+b.slice(1)},translateElements:function(){O.Options.enu_Language!==O.OptionEnum.Language.Default&&($(".jsTranslate").each(function(){$(this).text(D.getPhraseOriginal($(this).text())).removeClass("jsTranslate")}),$(".jsTranslateCompound").each(function(){$(this).text(D.getTranslation($(this).text())).removeClass("jsTranslateCompound")}))},translateAfter:function(){O.Options.enu_Language!==O.OptionEnum.Language.Default&&($("#paneMenu kbd").each(function(){$(this).attr("title","<dfn>"+D.getPhraseOriginal($(this).find(".jsTranslate").text())+"</dfn>"),I.qTip.init($(this))}),$(".mapHUDButton").each(function(){$(this).attr("title",D.getPhraseOriginal($(this).attr("title")))}),D.translateElements()),I.qTip.init(".mapHUDButton")},isLanguageFullySupported:function(){return O.Options.enu_Language===O.OptionEnum.Language.English||O.Options.enu_Language===O.OptionEnum.Language.German||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.French?!0:!1},getFullySupportedLanguage:function(){return D.isLanguageFullySupported()?O.Options.enu_Language:O.OptionEnum.Language.Default},getPartiallySupportedLanguage:function(){return D.isLanguageFullySupported()||O.Options.enu_Language===O.OptionEnum.Language.Mandarin?O.Options.enu_Language:O.OptionEnum.Language.Default},getNameKey:function(){return"name_"+D.getFullySupportedLanguage()},getURLKey:function(){return"url_"+D.getFullySupportedLanguage()},getObjectName:function(a){return void 0!==a["name_"+O.Options.enu_Language]?a["name_"+O.Options.enu_Language]:D.getDefaultObjectName(a)},getDefaultObjectName:function(a){return a["name_"+O.OptionEnum.Language.Default]},getObjectURL:function(a){return a["url_"+D.getFullySupportedLanguage()]},isLanguageSecondary:function(){return O.Options.enu_Language===O.OptionEnum.Language.German||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.French?!0:!1},isLanguageModifierFirst:function(){return O.Options.enu_Language===O.OptionEnum.Language.French||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.Italian||O.Options.enu_Language===O.OptionEnum.Language.Portuguese||O.Options.enu_Language===O.OptionEnum.Language.Mandarin?!1:!0},isLanguageLogographic:function(){return O.Options.enu_Language===O.OptionEnum.Language.Mandarin?!0:!1},getChainTitle:function(a){return O.Options.enu_Language===O.OptionEnum.Language.Default?a.title:D.getObjectName(a)},getChainAlias:function(a){return O.Options.enu_Language===O.OptionEnum.Language.Default?a.alias:D.getChainTitle(a)},speechWait:0,speak:function(a,b){if(I.isSpeechSynthesisEnabled){var c=new SpeechSynthesisUtterance(a);return c.lang=O.LanguageCode[O.Options.enu_Language],c.volume=O.Options.int_setVolume/T.cPERCENT_100,c.rate=.8,void window.speechSynthesis.speak(c)}var d=function(a){var b=document.getElementById("jsTTSAudio");b.src="http://code.responsivevoice.org/getvoice.php?tl="+O.LanguageCode[O.Options.enu_Language]+"&sv=&vn=&pitch=0.5&rate=0.4&vol=1&t="+a,b.volume=O.Options.int_setVolume/T.cPERCENT_100,b.load(),b.play()};if(void 0===b){var e=D.isLanguageLogographic()?4:12;b=1+Math.round(a.length/e)}var f=b*T.cMILLISECONDS_IN_SECOND;0===D.speechWait?(D.speechWait+=f,d(a),setTimeout(function(){D.speechWait-=f},f)):(D.speechWait+=f,setTimeout(function(){D.speechWait>0&&(d(a),D.speechWait-=f)},D.speechWait-f))},isSpeaking:function(){return 0===D.speechWait?!1:!0},stopSpeech:function(){I.isSpeechSynthesisEnabled?window.speechSynthesis.cancel():document.getElementById("jsTTSAudio").src=""},resetSpeechQueue:function(a){void 0===a&&(a=0),D.speechWait>a*T.cMILLISECONDS_IN_SECOND&&(D.speechWait=0,D.stopSpeech())},getSpeech:function(a,b){return b?D.getModifiedWord(a,b):D.getPhrase(a)},getChainPronunciation:function(a){return O.Options.enu_Language===O.OptionEnum.Language.Default||I.BrowserCurrent!==I.BrowserEnum.Chrome?C.Chains[a.nexus].pronunciation:D.getChainTitle(a)},sortObjects:function(a){var b=D.getNameKey();a.sort(function(a,c){return a[b]>c[b]?1:a[b]<c[b]?-1:0})}},C={Chains:GW2T_CHAIN_DATA,DryTop:{},cIndexSynonym:"nexus",ChainToday:null,CurrentChainSD:{},NextChainSD1:{},NextChainSD2:{},NextChainSD3:{},NextChainSD4:{},CurrentChainHC:{},NextChainHC1:{},NextChainHC2:{},NextChainHC3:{},NextChainHC4:{},CurrentChainLS:{},NextChainLS1:{},NextChainLS2:{},CurrentChains:[],CurrentChainsSD:[],PreviousChains1:[],PreviousChains2:[],NextChains1:[],cEventTitleCharLimit:44,cEventNameWidth:320,RegularChains:[],ScheduledChains:[],DryTopChains:[],LegacyChains:[],TempleChains:[],LivingStoryChains:[],ChainSeriesEnum:{Temple:0,Legacy:1,ScheduledCutoff:1,Standard:2,Hardcore:3,ChainCutoff:4,DryTop:4,LivingStory:5},EventPrimacyEnum:{Optional:0,Normal:1,Primary:2,Boss:3},isDryTopGenerated:!1,isDryTopIconsShown:!1,isTimetableGenerated:!1,getChainByAlias:function(a){return C.Chains[T.ChainAssociation[a.toLowerCase()]]},getChainRegion:function(a){return M.getZoneRegion(a.extra[0])},updateChainToday:function(a){var b=new Date;a=a||!1,a===!0&&(b=T.addDaysToDate(b,1));var e,g,c=b.getUTCDate(),d=T.DailyCalendar[c].pve[3].split(" ")[0].toLowerCase(),f=T.getTimeSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Minutes);void 0!==T.ChainAssociation[d]?(e=C.Chains[T.ChainAssociation[d]],g=T.convertScheduleKeyToUTCMinutes(e.scheduleKeys[0]),a===!1?g+T.cMINUTES_IN_TIMEFRAME>=f?C.ChainToday=e:C.ChainToday=null:g+T.cMINUTES_IN_TIMEFRAME<f?C.ChainToday=e:C.ChainToday=null):C.ChainToday=null},isChainToday:function(a){return C.ChainToday&&a.nexus===C.ChainToday.nexus?!0:!1},showChainDailyIcon:function(){for(var a=0;a<T.cNUM_TIMEFRAMES_IN_HOUR;a++)C.isChainToday(C.CurrentChainsSD[a])?K["WpChain"+a].addClass("clkWaypointDaily"):K["WpChain"+a].removeClass("clkWaypointDaily");$(".chnDaily").hide(),C.ChainToday&&$(".chnDaily_"+C.ChainToday.nexus).show(),C.updateTimetable()},isChainScheduled:function(a){return a.series>C.ChainSeriesEnum.ScheduledCutoff?!0:!1},isChainWorldBoss:function(a){return a.series<C.ChainSeriesEnum.ChainCutoff?!0:!1},isChainRegular:function(a){return a.series===C.ChainSeriesEnum.Standard||a.series===C.ChainSeriesEnum.Hardcore||a.series===C.ChainSeriesEnum.LivingStory?!0:!1},parseChainAlias:function(a){return-1!==a.indexOf("XXX")?a.split("XXX")[0]:a},getEventStepNumber:function(a){if(1===a.length)return a;var b,c="";for(b=0;b<a.length;b++){if(!isFinite(a.charAt(b)))return c;c+=a.charAt(b)}return c},truncateTitleString:function(a,b,c){return c=c||"",a.length>b?a.substring(0,b)+c:a},initializeChain:function(a){var b,c,d,e="",f=D.getObjectName(a);C.isChainWorldBoss(a)&&(e="<input class='chnWaypoint' type='text' value='"+a.waypoint+" "+f+"' />  ("+a.extra[1]+")<a href='"+U.getYouTubeLink(f+" "+I.cGameNick)+"' target='_blank' title='Recommended level. Click for YouTube videos.'><ins class='s16 s16_youtube'></ins></a> "+a.extra[2]+"<ins class='s16 s16_ecto' title='Ecto'></ins> "+a.extra[3]+"<ins class='s16 s16_loot' title='Loot'></ins> "+a.extra[4]+"<ins class='s16 s16_dragonite' title='Dragonite'></ins> "),$(a.htmllist).append("<div id='chnBar_"+a.nexus+"' class='chnBar'><div class='chnTitle'><img id='chnIcon_"+a.nexus+"' src='img/chain/"+C.parseChainAlias(a.alias).toLowerCase()+I.cPNG+"' /><samp id='chnCheck_"+a.nexus+"' class='chnCheck'></samp><h1 id='chnTitle_"+a.nexus+"'>"+f+"</h1><time id='chnTime_"+a.nexus+"' class='chnTimeFutureFar'></time><aside><img class='chnDaily chnDaily_"+a.nexus+"' src='img/ui/daily.png' /></aside></div><div id='chnDetails_"+a.nexus+"' class='chnDetails'><ol id='chnEvents_"+a.nexus+"' class='chnEvents'></ol><div class='chnDetailsExtra'>"+e+"<kbd id='chnDelete_"+a.nexus+"' title='Permanently hide this event chain (can undo in \u25bc icon above).'></kbd></div></div></div>");var g=function(a,b){var c=b,d="&lt;br /&gt;",e=function(a){return"&lt;dfn&gt;"+a+"&lt;/dfn&gt;"},f="";f=a.series===C.ChainSeriesEnum.DryTop?e("Event Number: ")+c.num+d+e("Start Time: ")+c.lim+d+d+"&amp;quot;"+D.getObjectName(c).replace(/["']/g,"")+"&amp;quot;":e("Event Number: ")+c.num+d+e("If Success Go To: ")+c.sGotoNum+d+e("If Failure Go To: ")+c.fGotoNum+d+e("If Success Wait: ")+c.sInterim+d+e("If Failure Wait: ")+c.fInterim+d+e("Time Limit: ")+c.lim+d+e("Avg to Complete: ")+c.avg+d+e("Min to Complete: ")+c.min+d+e("Max to Complete: ")+c.max+d+d+"&amp;quot;"+D.getObjectName(c).replace(/["']/g,"")+"&amp;quot;";var g=0,h=C.cEventTitleCharLimit,i=function(){g=12,h=C.cEventTitleCharLimit-4},j=C.getEventStepNumber(c.num);if(j.length!==c.num.length){var k=c.num.slice(j.length);-1!==c.num.indexOf(".")?i():2===c.num.length?-1===k.indexOf("A")&&-1===k.indexOf("a")&&i():-1===k.indexOf("A1")&&-1===k.indexOf("a1")&&i()}$("#chnEvents_"+a.nexus).append("<li id='chnEvent_"+a.nexus+"_"+c.num+"' class='chnStep_"+a.nexus+"_"+c.step+"' style='margin-left:"+g+"px'><ins class='evt_"+c.icon+"' title='"+f+"'></ins><span>"+C.truncateTitleString(D.getObjectName(c),h,"..")+"</span></li>")};for(b in a.events)if(d=a.events[b],d.primacy===C.EventPrimacyEnum.Primary)a.primaryEvents.push(d);else if(d.primacy===C.EventPrimacyEnum.Boss){a.primaryEvents.push(d),a.primaryEvents[0].minSum=0,a.primaryEvents[0].avgSum=0,a.primaryEvents[0].minavgSum=0;break}for(b=1;b<a.primaryEvents.length;b++){var h=T.parseEventTime(a.primaryEvents[b-1].sInterim[0]);a.primaryEvents[b].minSum=T.parseEventTime(a.primaryEvents[b-1].min)+h+a.primaryEvents[b-1].minSum,a.primaryEvents[b].avgSum=T.parseEventTime(a.primaryEvents[b-1].avg)+h+a.primaryEvents[b-1].avgSum,a.primaryEvents[b].minavgSum=a.primaryEvents[b].minSum+~~(Math.abs(a.primaryEvents[b].avgSum-a.primaryEvents[b].minSum)/2)}if(b--,a.minFinish=a.primaryEvents[b].minSum+T.parseEventTime(a.primaryEvents[b].min),a.avgFinish=a.primaryEvents[b].avgSum+T.parseEventTime(a.primaryEvents[b].avg),a.minavgFinish=a.minFinish+~~(Math.abs(a.avgFinish-a.minFinish)/2),c=0,C.isChainScheduled(a)){for(b in a.events)if(a.events[b].primacy!==C.EventPrimacyEnum.Optional&&(C.getEventStepNumber(a.events[b].num)!==C.getEventStepNumber(a.primaryEvents[c].num)&&c++,g(a,a.events[b])),a.events[b].primacy===C.EventPrimacyEnum.Boss)break}else for(b in a.events)g(a,a.events[b]);I.ModeCurrent!==I.ModeEnum.Tile&&($("#chnTitle_"+a.nexus).click(function(){$(this).parent().next().slideToggle(100)}),$("#chnDetails_"+a.nexus).hide()),O.Options.enu_Language===O.OptionEnum.Language.Default&&I.isMapEnabled&&$("#chnBar_"+a.nexus).hover(function(){$("#chnTitle_"+a.nexus).text(D.getChainTitle(a))},function(){$("#chnTitle_"+a.nexus).text(D.getObjectName(a))}),$("#chnDetails_"+a.nexus+" .chnWaypoint").click(function(){$(this).select()}),I.qTip.init($("#chnEvents_"+a.nexus+" ins")),I.qTip.init($("#chnDetails_"+a.nexus+" kbd")),X.initializeChainChecklist(a)},initializeAllChains:function(){X.initializeChecklist(X.Checklists.Chain,C.Chains.length),X.initializeChecklist(X.Checklists.ChainSubscription,C.Chains.length);var a;for(var b in C.Chains){a=C.Chains[b];for(var c in a.events)a.events[c].step=parseInt(C.getEventStepNumber(a.events[c].num))-1;switch(a.nexus=parseInt(b),a.isSorted=!1,a.primaryEvents=new Array,a.scheduleKeys=new Array,a.series){case C.ChainSeriesEnum.Standard:a.htmllist="#sectionChains_Scheduled",C.RegularChains.push(a),C.ScheduledChains.push(a);break;case C.ChainSeriesEnum.Hardcore:a.htmllist="#sectionChains_Scheduled",C.RegularChains.push(a),C.ScheduledChains.push(a);break;case C.ChainSeriesEnum.DryTop:a.htmllist="#sectionChains_Drytop",C.DryTopChains.push(a),C.ScheduledChains.push(a);break;case C.ChainSeriesEnum.LivingStory:if(!T.isDashboardStoryEnabled)continue;a.htmllist=I.isProgramEmbedded||I.ModeCurrent!==I.ModeEnum.Website&&I.ModeCurrent!==I.ModeEnum.Overlay?"#sectionChains_Scheduled":"#dsbStory",C.LivingStoryChains.push(a),C.ScheduledChains.push(a),T.insertChainToSchedule(a,a.extra);break;case C.ChainSeriesEnum.Legacy:a.htmllist="#sectionChains_Legacy",C.LegacyChains.push(a);break;case C.ChainSeriesEnum.Temple:a.htmllist="#sectionChains_Temple",C.TempleChains.push(a)}C.isChainScheduled(a)&&C.initializeChain(a)}I.initializeChainsUI(),$("#sectionChains_Scheduled .chnBar h1, #sectionChains_Drytop .chnBar h1, #dsbStory .chnBar h1").addClass("chnTitleFutureFar")},isChainCurrent:function(a){for(var b in C.CurrentChains)if(a.nexus===C.CurrentChains[b].nexus)return!0;return!1},isChainUnchecked:function(a){return X.getChainChecklistState(a)===X.ChecklistEnum.Unchecked?!0:!1},isChainSubscribed:function(a){return X.getChecklistItem(X.Checklists.ChainSubscription,a.nexus)===X.ChecklistEnum.Checked?!0:!1},updateChainsTimeHTML:function(){var a,b,c,d,e="<dfn>"+D.getPhraseTitle("click to <br/> subscribe")+"</dfn><br />";for(a in C.ScheduledChains){b=C.ScheduledChains[a];var g,f="";if(b.series!==C.ChainSeriesEnum.DryTop){for(var h in b.scheduleKeys)g=0===parseInt(h)?e:" <br /> ",f=f+g+T.getTimeFormatted({wantSeconds:!1,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(b.scheduleKeys[h])});$("#chnTime_"+b.nexus).prop("title",f)}C.isChainCurrent(b)||(c=T.getTimeFormatted({wantLetters:!0,wantSeconds:!1,customTimeInSeconds:T.getSecondsUntilChainStarts(b)}),d=T.getTimeFormatted({wantLetters:!1,wantSeconds:!1,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(b.scheduleKeys[0])}),$("#chnTime_"+b.nexus).html(c+"<br /><sup>"+d+"</sup>"))}I.qTip.init(".chnTitle time")},updateCurrentChainTimeHTML:function(a){var b=T.getCurrentTimeframeElapsedTime(),c=a.countdownToFinish-b,d=c,e="\u21d1 ";if(a.series===C.ChainSeriesEnum.DryTop){var f=T.getDryTopMinute(),g=T.getDryTopMinute(1);d=T.getTimeFormatted({reference:T.ReferenceEnum.UTC,want24:!0,wantHours:!1}),$("#chnTime_"+a.nexus).text("(:"+f+") "+d),C.isDryTopIconsShown&&$("#mapDryTopTimer").html("<var style='color:"+T.getCurrentDryTopColor()+"'>:"+f+"</var> "+d+" <var style='color:"+T.getCurrentDryTopColor(1)+"'>:"+g+"</var>")}else 0>=c&&(d=T.cSECONDS_IN_TIMEFRAME-b,e="\u21d3 "),$("#chnTime_"+a.nexus).text(e+T.getTimeFormatted({wantHours:!1,wantLetters:!0,customTimeInSeconds:d}))},initializeTimetableHTML:function(){if(C.isTimetableGenerated!==!1){$("#sectionChains_Timetable").empty();var a,b,c,d,e;for(a in T.Schedule){c=T.getScheduleSlotChainsByKey(a);for(b in c){if(d=c[b],d.series!==C.ChainSeriesEnum.Standard&&d.series!==C.ChainSeriesEnum.Hardcore)break;e=T.getTimeFormatted({wantSeconds:!1,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(a)}),$("#sectionChains_Timetable").append("<div class='chnSlot chnSlotTime_"+a+" chnSlot_"+d.nexus+"' data-"+C.cIndexSynonym+"='"+d.nexus+"' data-timeframe='"+a+"'><div class='chnTitle'><img src='img/chain/"+C.parseChainAlias(d.alias).toLowerCase()+I.cPNG+"' /><samp class='chnCheck'></samp><h1>"+D.getObjectName(d)+"</h1><time>"+e+"</time><aside><img class='chnDaily chnDaily_"+d.nexus+"' src='img/ui/daily.png' /></aside></div></div>")}}for(var a in C.RegularChains){d=C.RegularChains[a];var f=$(".chnSlot_"+d.nexus),g=f.find(".chnCheck"),h=f.find("time");X.reapplyChainBarState(d.nexus,f,g,h)}$(".chnTitle h1").hover(function(){$(".chnSlot_"+$(this).parent().parent().data(C.cIndexSynonym)).addClass("chnBarHover")},function(){$(".chnSlot").removeClass("chnBarHover")}),$(".chnSlot samp").click(function(){$("#chnCheck_"+C.Chains[$(this).parent().parent().data(C.cIndexSynonym)].nexus).trigger("click")}),$(".chnSlot time").click(function(){$("#chnTime_"+C.Chains[$(this).parent().parent().data(C.cIndexSynonym)].nexus).trigger("click");
}),$(".chnSlotTime_0").addClass("chnBarReset"),C.showChainDailyIcon()}},updateTimetable:function(){if(C.isTimetableGenerated!==!1){var a=T.getTimeframeKey(-1),b=T.getTimeframeKey(),c=T.getTimeframeKey(1);$(".chnSlotTime_"+a).removeClass("chnBarCurrent"),$(".chnSlotTime_"+b).addClass("chnBarCurrent"),$(".chnSlotTime_"+a+" .chnTitle h1").removeClass("chnTitleCurrent"),$(".chnSlotTime_"+b+" .chnTitle h1").removeClass("chnTitleFuture").addClass("chnTitleCurrent"),$(".chnSlotTime_"+c+" .chnTitle h1").addClass("chnTitleFuture");var d=T.getCurrentTimeframe();$(".chnSlot").each(function(){return T.convertScheduleKeyToUTCMinutes($(this).data("timeframe"))<d?void $(this).appendTo("#sectionChains_Timetable"):!1}),C.ChainToday&&$("#sectionChains_Timetable .chnDaily_"+C.ChainToday.nexus).each(function(){T.convertScheduleKeyToUTCMinutes($(this).closest(".chnSlot").data("timeframe"))<d&&$(this).hide()})}},sortChainsListHTML:function(){for(var e,f,a=0,b=C.ScheduledChains.length,c=0,d=0;b>a;){e=T.getTimeframeChains(c);for(d in e){if(a>=b)break;f=e[d],f.isSorted===!1&&($("#chnBar_"+f.nexus).appendTo(f.htmllist),f.isSorted=!0,f.scheduleKeyImmediate=T.getTimeframeKey(c),a++)}c++}for(c in C.ScheduledChains){f=C.ScheduledChains[c],f.isSorted=!1;for(d in f.scheduleKeys)if(f.scheduleKeys[d]===f.scheduleKeyImmediate){f.scheduleKeys=f.scheduleKeys.slice(d,f.scheduleKeys.length).concat(f.scheduleKeys.slice(0,d));break}}C.updateChainsTimeHTML();for(c in C.CurrentChains)f=C.CurrentChains[c],$("#chnBar_"+f.nexus).addClass("chnBarCurrent"),C.isChainUnchecked(f)&&I.ModeCurrent!==I.ModeEnum.Tile&&(f.series===C.ChainSeriesEnum.DryTop||f.series!==C.ChainSeriesEnum.DryTop&&O.Options.bol_expandWB)&&$("#chnDetails_"+f.nexus).show("fast"),$("#chnBar_"+f.nexus+" h1").first().removeClass("chnTitleFuture chnTitleFutureFar").addClass("chnTitleCurrent"),$("#chnBar_"+f.nexus+" time").first().removeClass("chnTimeFuture chnTimeFutureFar").addClass("chnTimeCurrent");for(c in C.PreviousChains1)f=C.PreviousChains1[c],$("#chnBar_"+f.nexus).removeClass("chnBarCurrent").addClass("chnBarPrevious"),O.Options.bol_collapseChains&&I.ModeCurrent!==I.ModeEnum.Tile&&$("#chnDetails_"+f.nexus).hide(),$("#chnBar_"+f.nexus+" h1").first().removeClass("chnTitleCurrent").addClass("chnTitleFutureFar"),$("#chnBar_"+f.nexus+" time").first().removeClass("chnTimeCurrent").addClass("chnTimeFutureFar");for(c in C.PreviousChains2)f=C.PreviousChains2[c],$("#chnBar_"+f.nexus).removeClass("chnBarPrevious");for(c in C.NextChains1)f=C.NextChains1[c],$("#chnBar_"+f.nexus+" h1").first().removeClass("chnTitleFutureFar").addClass("chnTitleFuture"),$("#chnBar_"+f.nexus+" time").first().removeClass("chnTimeFutureFar").addClass("chnTimeFuture")},queueEventsHighlight:function(a){var b,e,c=a,d=T.getCurrentTimeframeElapsedTime(),f=!1;if(d>0){for(b in c.primaryEvents)if(e=C.getSumBasedOnOptions(c,b),e>=d&&b>0){C.highlightEvents(c,parseInt(b-1)),f=!0;break}f===!1&&(e=C.getSumBasedOnOptions(c,-1),e>=d?C.highlightEvents(c,b):C.highlightEvents(c,-1))}for(b in c.primaryEvents)e=C.getSumBasedOnOptions(c,b),e>=d&&(e-=d,setTimeout(function(a,b){return function(){C.highlightEvents(a,b)}}(c,parseInt(b)),e*T.cMILLISECONDS_IN_SECOND));e=C.getSumBasedOnOptions(c,-1),e>=d&&(e-=d,setTimeout(function(a){return function(){C.highlightEvents(a,-1)}}(c),e*T.cMILLISECONDS_IN_SECOND))},highlightEvents:function(a,b){var c,g,d=500,e=C.cEventNameWidth,f=a.primaryEvents.length-1,h=C.isChainRegular(a);if(a.series===C.ChainSeriesEnum.DryTop&&C.isDryTopGenerated&&(P.LayerArray.DryTopActive=null,P.LayerArray.DryTopActive=new Array,C.isDryTopIconsShown))for(c in a.events)g=a.events[c],M.toggleLayer(g.eventicon,!1),M.toggleLayer(g.eventring,!1);if(b>-1){for(a.CurrentPrimaryEvent=a.primaryEvents[b],c=0;b>c;c++)$(".chnStep_"+a.nexus+"_"+c).removeClass("chnEventCurrent");if($(".chnStep_"+a.nexus+"_"+(b-1)).css({opacity:1}).animate({opacity:.5},d,function(){a.series===C.ChainSeriesEnum.DryTop&&$(this).hide()}),$(".chnStep_"+a.nexus+"_"+b).each(function(){$(this).removeClass("chnEventFuture").addClass("chnEventCurrent").show().css({width:0,opacity:.5}).animate({width:e,opacity:1},d).css({width:"auto"}),a.series===C.ChainSeriesEnum.DryTop&&C.isDryTopGenerated&&(g=a.events[$(this).attr("data-eventindex")],P.LayerArray.DryTopActive.push(g.eventicon),P.LayerArray.DryTopActive.push(g.eventring),C.isDryTopIconsShown&&M.toggleLayerArray(P.LayerArray.DryTopActive,!0))}),b<a.primaryEvents.length)for(c=b+1;c<a.primaryEvents.length;c++)$(".chnStep_"+a.nexus+"_"+c).show().removeClass("chnEventCurrent").addClass("chnEventFuture");O.Options.bol_tourPrediction&&!O.Options.bol_followCharacter&&I.PageCurrent===I.PageEnum.Chains&&M.isMapAJAXDone&&C.isChainUnchecked(a)&&h&&C.isDryTopIconsShown===!1&&$("#chnEvent_"+a.nexus+"_"+a.CurrentPrimaryEvent.num).trigger("click"),b===f&&O.Options.bol_alertArrival&&h&&(O.Options.int_setAlarm===O.IntEnum.Alarm.Checklist&&C.isChainUnchecked(a)||O.Options.int_setAlarm===O.IntEnum.Alarm.Subscription&&C.isChainSubscribed(a)&&C.isChainUnchecked(a))&&D.speak(D.getChainPronunciation(a)+" "+D.getSpeech("arrival predicted"))}else{if(a.CurrentPrimaryEvent=a.primaryEvents[f],$("#chnEvents_"+a.nexus+" li").show().removeClass("chnEventCurrent"),$(".chnStep_"+a.nexus+"_"+f).css({opacity:1}).animate({opacity:.5},d),O.Options.int_setAlarm===O.IntEnum.Alarm.Checklist&&O.Options.bol_alertAtEnd&&I.isProgramLoaded&&a.nexus===C.CurrentChainSD.nexus&&h){var i=", "+D.getSpeech("checked"),j="",k="",l=O.objToBool(C.NextChainSD1),m=O.objToBool(C.NextChainHC1),n=D.getSpeech("next "+D.orderModifier("boss","world")+" is")+" ";C.NextChainSD1&&!C.isChainUnchecked(C.NextChainSD1)&&(j=i),C.NextChainHC1&&!C.isChainUnchecked(C.NextChainHC1)&&(k=i),O.Options.bol_alertChecked===!1&&(j.length>0&&(l=!1),k.length>0&&(m=!1)),l&&m?(D.speak(n+D.getChainPronunciation(C.NextChainSD1)+j,5),D.speak(D.getSpeech("also")+", "+D.getChainPronunciation(C.NextChainHC1)+k,3)):l?D.speak(n+D.getChainPronunciation(C.NextChainSD1)+j,5):m&&D.speak(n+D.getChainPronunciation(C.NextChainHC1)+k,5),(l||m)&&D.speak(T.getTimeTillChainFormatted(C.NextChainSD1,"speech"),3)}O.Options.int_setAlarm===O.IntEnum.Alarm.Subscription&&I.isProgramLoaded&&a.series!==C.ChainSeriesEnum.LivingStory&&O.Options.bol_alertUnsubscribe&&h&&C.isChainSubscribed(a)&&$("#chnTime_"+a.nexus).trigger("click")}},getSumBasedOnOptions:function(a,b){if(C.isChainToday(a))return b>-1?a.primaryEvents[b].minSum:(a.countdownToFinish=a.minFinish,a.minFinish);var c=T.getTimeSinceMidnight(T.ReferenceEnum.Local,T.UnitEnum.Hours);if(b>-1){switch(O.Options.int_setPredictor){case O.IntEnum.Predictor.Auto:if(c>=12&&18>c)return a.primaryEvents[b].minSum;if(c>=18)return a.primaryEvents[b].minavgSum;if(c>=0&&6>c)return a.primaryEvents[b].avgSum;if(c>=6&&12>c)return a.primaryEvents[b].minavgSum;break;case O.IntEnum.Predictor.Min:return a.primaryEvents[b].minSum;case O.IntEnum.Predictor.MinAvg:return a.primaryEvents[b].minavgSum;case O.IntEnum.Predictor.Avg:return a.primaryEvents[b].avgSum}return a.primaryEvents[b].minavgSum}switch(O.Options.int_setPredictor){case O.IntEnum.Predictor.Auto:if(c>=12&&18>c)return a.countdownToFinish=a.minFinish,a.minFinish;if(c>=18)return a.countdownToFinish=a.minavgFinish,a.minavgFinish;if(c>=0&&6>c)return a.countdownToFinish=a.avgFinish,a.avgFinish;if(c>=6&&12>c)return a.countdownToFinish=a.minavgFinish,a.minavgFinish;break;case O.IntEnum.Predictor.Min:return a.countdownToFinish=a.minFinish,a.minFinish;case O.IntEnum.Predictor.MinAvg:return a.countdownToFinish=a.minavgFinish,a.minavgFinish;case O.IntEnum.Predictor.Avg:return a.countdownToFinish=a.avgFinish,a.avgFinish}return a.countdownToFinish=a.minavgFinish,a.minavgFinish}},M={MapEnum:"map",Zones:GW2T_ZONE_DATA,ZoneAssociation:GW2T_ZONE_ASSOCIATION,Regions:GW2T_REGION_DATA,Submaps:GW2T_SUBMAP_DATA,cInitialZone:"lion",Map:{},Floors:new Array,ZoneCurrent:{},cICON_SIZE_STANDARD:32,cRING_SIZE_MAX:256,isMapInitialized:!1,isMouseOnHUD:!1,isUserDragging:!1,isMapAJAXDone:!1,isAPIRetrieved_MAPFLOOR:!1,isItineraryRetrieved:!1,isMappingIconsGenerated:!1,isEventIconsGenerated:!1,ContextLatLng:null,cMAP_NUMFLOORS:4,cMAP_BOUND:32768,cMAP_CENTER:[16384,16384],cMAP_CENTER_INITIAL:[-1024,1024],cMAP_MOUSEMOVE_RATE:100,cInertiaThreshold:100,cZoomFactor:2,ZoomEnum:{Same:-1,Min:0,Default:3,Space:3,Sky:5,Bird:6,Ground:7,Max:7},cZIndexRaise:999999,cZIndexBury:-999999,cMETER_TO_INCH:39.3701,cCIRCLE_RIGHT_DEGREE:90,cCIRCLE_HALF_DEGREE:180,cCIRCLE_FULL_DEGREE:360,cRADIAN_TO_DEGREE:180/Math.PI,cUNITS_TO_POINTS:.0416,cPOINTS_TO_UNITS:5e3/208,GPSTimeout:{},GPSPreviousCoord:[],GPSPreviousAngleCharacter:0,GPSPreviousAngleCamera:0,Layer:{Overview:new L.layerGroup,Pin:new L.layerGroup,PersonalPin:new L.layerGroup,PersonalPath:new L.layerGroup,ZoneRectangle:new L.layerGroup},Pin:{Program:{},Event:{},Over:{},Character:{},Camera:{}},MappingEnum:{Sector:0,Waypoint:1,Landmark:2,Vista:3,Challenge:4,Heart:5,EventIcon:6,EventRing:7},APIPOIEnum:{Sector:"sectors",Waypoint:"waypoint",Landmark:"landmark",Vista:"vista",Challenge:"skill_challenges",Heart:"tasks"},initializeMap:function(){var a=this,b="#"+this.MapEnum;this.Map=L.map(this.MapEnum+"Pane",{minZoom:this.ZoomEnum.Min,maxZoom:this.ZoomEnum.Max,inertiaThreshold:this.cInertiaThreshold,doubleClickZoom:!1,touchZoom:!1,zoomControl:I.isOnSmallDevice,attributionControl:!1,crs:L.CRS.Simple}).setView(this.cMAP_CENTER_INITIAL,this.ZoomEnum.Default),this.Map.touchZoom.disable(),this.Map.tap&&this.Map.tap.disable();var c;for(var d in this.Zones)c=this.Zones[d],c.center=this.computeZoneCenter(d),c.nick=d,c.Layers={Path:new L.layerGroup,Waypoint:new L.layerGroup,Landmark:new L.layerGroup,Vista:new L.layerGroup,Challenge:new L.layerGroup,Heart:new L.layerGroup,Sector:new L.layerGroup,EventIcon:new L.layerGroup,EventRing:new L.layerGroup},a.MapEnum===I.MapEnum.Tyria&&P.LayerArray.ChainPath.push(c.Layers.Path);this.ZoneCurrent=this.Zones[this.cInitialZone];var e;switch(this.MapEnum){case I.MapEnum.Tyria:e=1,this.populateMap(I.MapEnum.Tyria),C.ScheduledChains.forEach(P.drawChainPaths);break;case I.MapEnum.Mists:e=2,L.tileLayer(U.URL_API.TilesMists,{continuousWorld:!0}).addTo(W.Map)}for(var d=0;d<this.cMAP_NUMFLOORS;d++)this.Floors.push(L.tileLayer("https://tiles.guildwars2.com/"+e+"/"+d+"/{z}/{x}/{y}.jpg",{continuousWorld:!0}));this.Map.tap||this.bindMapClicks(this.MapEnum),$(b+"CoordinatesCopy").onEnterKey(function(){var b=$(this).val();if(a.parsePersonalPath(b)===!1)switch(b.toLowerCase()){case"/identity":I.write(JSON.stringify(GPSIdentityJSON,null,2));break;case"/lock":a.Map.dragging.disable(),a.Map.scrollWheelZoom.disable(),I.write("Map locked.");break;case"/unlock":a.Map.dragging.enable(),a.Map.scrollWheelZoom.enable(),I.write("Map unlocked.");break;case"/loadpins":a.parsePersonalPath(a.loadPersonalPins());break;default:a.goToArguments(b,a.Pin.Program)}}),$(b+"GPSButton").click(function(){a.updateCharacter(1)}).dblclick(function(){a.Map.getZoom()!==a.ZoomEnum.Ground?a.Map.setZoom(a.ZoomEnum.Ground):a.Map.setZoom(a.ZoomEnum.Default)}),$(b+"DisplayButton").click(function(){$("#opt_bol_showPanel").trigger("click")}),$(b+"CompassButton").one("mouseenter",a.bindZoneList).click(function(){a.goToDefault()}),this.isMapInitialized=!0,this.refreshMap()},populateMap:function(){var a=this;I.isMapEnabled&&$.getJSON(U.URL_API.MapFloorTyria,function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o=D.getTranslation("Vista"),p=D.getTranslation("Hero Challenge");for(d in b.regions){e=b.regions[d];for(f in e.maps)if(a.ZoneAssociation[f]){g=e.maps[f],i=a.getZoneFromID(f),i.map_rect=g.map_rect,i.continent_rect=g.continent_rect;var q=0,r=0,s=0,t=0,u=0;for(a.Layer.ZoneRectangle.addLayer(L.rectangle(a.convertGCtoLCMulti(i.rect),{fill:!1,color:a.Regions[i.region].color,weight:2,clickable:!1})),j=g.points_of_interest.length,c=0;j>c;c++){switch(h=g.points_of_interest[c],h.type){case a.APIPOIEnum.Waypoint:r++,l=U.URL_IMG.Waypoint,m="mapWp",n=h.name;break;case a.APIPOIEnum.Landmark:if(O.Options.bol_showWorldCompletion===!1)continue;s++,l=U.URL_IMG.Landmark,m="mapPoi",n=h.name;break;case a.APIPOIEnum.Vista:if(O.Options.bol_showWorldCompletion===!1)continue;u++,l=U.URL_IMG.Vista,m="mapPoi",n=o;break;default:continue}switch(k=L.marker(a.convertGCtoLC(h.coord),{title:"<span class='"+m+"'>"+n+"</span>",markername:h.name,icon:L.icon({iconUrl:l,iconSize:[16,16],iconAnchor:[8,8]}),link:U.getChatlinkFromPoiID(h.poi_id)}),h.type){case a.APIPOIEnum.Waypoint:k.on("mouseout",function(){try{this._icon.src=U.URL_IMG.Waypoint}catch(a){}}),k.on("mouseover",function(){this._icon.src=U.URL_IMG.WaypointOver}),i.Layers.Waypoint.addLayer(k);break;case a.APIPOIEnum.Landmark:k.on("mouseout",function(){try{this._icon.src=U.URL_IMG.Landmark}catch(a){}}),k.on("mouseover",function(){this._icon.src=U.URL_IMG.LandmarkOver}),i.Layers.Landmark.addLayer(k);break;case a.APIPOIEnum.Vista:i.Layers.Vista.addLayer(k)}h.type===a.APIPOIEnum.Waypoint||h.type===a.APIPOIEnum.Landmark?(k.on("click",function(){$("#mapCoordinatesCopy").val(this.options.link).select(),$("#mapCoordinatesName").val(this.options.markername)}),a.bindMappingZoomBehavior(k,"dblclick")):a.bindMappingZoomBehavior(k,"click")}if(O.Options.bol_showWorldCompletion){for(j=g.skill_challenges.length,t=j,c=0;j>c;c++)h=g.skill_challenges[c],k=L.marker(a.convertGCtoLC(h.coord),{title:"<span class='mapPoi'>"+p+"</span>",icon:L.icon({iconUrl:U.URL_IMG.Challenge,iconSize:[16,16],iconAnchor:[8,8]})}),a.bindMappingZoomBehavior(k,"click"),i.Layers.Challenge.addLayer(k);for(j=g.tasks.length,q=j,c=0;j>c;c++)h=g.tasks[c],k=L.marker(a.convertGCtoLC(h.coord),{title:"<span class='mapPoi'>"+h.objective+" ("+h.level+")</span>",task:h.objective,icon:L.icon({iconUrl:U.URL_IMG.Heart,iconSize:[16,16],iconAnchor:[8,8]})}),k.on("click",function(a){var b=this.options.task;b.indexOf(".")===b.length-1&&(b=b.slice(0,-1)),U.openExternalURL(U.getWikiLanguageLink(b))}),i.Layers.Heart.addLayer(k);for(j=g.sectors.length,c=0;j>c;c++)h=g.sectors[c],k=L.marker(a.convertGCtoLC(h.coord),{clickable:!1,icon:L.divIcon({className:"mapSec",html:"<span class='mapSecIn'>"+h.name+"</span>",iconSize:[512,64],iconAnchor:[256,32]})}),i.Layers.Sector.addLayer(k);a.isMappingIconsGenerated=!0}O.Options.bol_showWorldCompletion&&(k=L.marker(a.convertGCtoLC(i.center),{mappingzone:i.nick,riseOnHover:!0,icon:L.divIcon({className:"mapOverview",html:"<span class='mapOverviewIn'><var class='mapOverviewName'>"+D.getObjectName(i)+"</var>"+(g.min_level>0?"<var class='mapOverviewLevel'>"+(80===g.min_level?g.max_level:g.min_level+" - "+g.max_level)+"</var>":"")+(q>0?"<img src='img/map/heart.png' />"+q+" ":"")+(r>0?"<img src='img/map/waypoint.png' />"+r+" ":"")+(s>0?"<img src='img/map/landmark.png' />"+s+" ":"")+(t>0?"<img src='img/map/challenge.png' />"+t+" ":"")+(u>0?"<img src='img/map/vista.png' />"+u:"")+"</span>",iconSize:[256,64],iconAnchor:[128,32]})}),a.bindOverviewBehavior(k,"click"),a.bindOverviewBehavior(k,"contextmenu"),a.Layer.Overview.addLayer(k),a.toggleLayer(a.Layer.Overview,!0))}}}).done(function(){a.isAPIRetrieved_MAPFLOOR=!0,O.Options.bol_displayEvents===!1&&P.donePopulation()}).fail(function(){I.ModeCurrent===I.ModeEnum.Website&&I.write("Guild Wars 2 API server is unreachable.<br />Reasons could be:<br />- The GW2 server is down for maintenance.<br />- Your browser is too old (if IE then need 11+).<br />- Your computer's time is out of sync.<br />- This website's code encountered a bug.<br />Map features will be limited.<br />",15)}).always(function(){O.Options.bol_displayEvents===!0?P.populateEvents():P.finishPopulation()}),this.Pin.Program=this.createPin("img/map/pin_blue.png"),this.Pin.Event=this.createPin("img/map/pin_green.png"),this.Pin.Over=this.createPin("img/map/pin_over.png",[128,128]),this.Pin.Character=this.createPin("img/map/pin_character.png",[40,40]),this.Pin.Camera=this.createPin("img/map/pin_camera.png",[256,256],{clickable:!1}),this.Layer.Pin.eachLayer(function(b){a.bindMarkerCoordBehavior(b,"click"),b.on("dblclick",function(){a.movePin(this)})}),this.Pin.Character.on("contextmenu",function(){a.movePin(this),a.movePin(a.Pin.Camera)}),this.toggleLayer(this.Layer.Pin,!1)},bindMapClicks:function(a){var b=this,c="#"+a;this.Map.on("click",function(a){if(!b.isMouseOnHUD){var d=b.convertLCtoGC(a.latlng);$(c+"CoordinatesCopy").val(b.formatCoord(d)).select()}}),this.Map.on("dblclick",function(a){b.isMouseOnHUD||b.createPersonalPin(a.latlng,!0)}),this.Map.on("contextmenu",function(a){b.ContextLatLng=a.latlng,$("#ctxMap").css({top:I.posY,left:I.posX}).show()}),$("#ctxMap").click(function(){$(this).hide()}),$("#ctxMapCenter").click(function(){b.goToDefault()}),$("#ctxMapToggleCompletion").click(function(){$("#opt_bol_showWorldCompletion").trigger("click")}),$("#ctxMapDrawCompletion").click(function(){P.drawCompletionRoute()}),$("#ctxMapClearPins").click(function(){b.clearPersonalPins()})},bindMapVisualChanges:function(a){var b=this;$("#paneHUDMap").hover(function(){b.isMouseOnHUD=!0},function(){b.isMouseOnHUD=!1}),$("#ctxMap").hover(function(){b.isMouseOnHUD=!0},function(){b.isMouseOnHUD=!1}),this.Map.on("dragstart",function(){b.isUserDragging=!0}),this.Map.on("dragend",function(){b.isUserDragging=!1}),this.Map.on("mousemove",$.throttle(b.cMAP_MOUSEMOVE_RATE,function(a){b.isMouseOnHUD||b.isUserDragging||b.showCurrentZone(b.convertLCtoGC(a.latlng))})),this.Map.on("zoomend",function(c){b.adjustZoomMapping(),a===I.MapEnum.Tyria&&P.adjustZoomDryTop()})},changeFloor:function(a){for(var b=0;b<this.Floors.length;b++)this.Map.removeLayer(this.Floors[b]);this.Floors[a].addTo(this.Map)},refreshMap:function(){this.isMapInitialized&&this.Map.invalidateSize()},isZoneValid:function(a){return void 0===this.ZoneAssociation[a]?!1:!0},getZoneFromID:function(a){return this.Zones[this.ZoneAssociation[a]]},getZoneName:function(a){var b;if("string"==typeof a&&this.Zones[a])b=this.Zones[a];else{if(!a.rect)return"nozonename";b=a}return D.getObjectName(b)},getZoneRegion:function(a){return this.Zones[a.toLowerCase()].region},showCurrentZone:function(a){if(document.getElementById("mapCoordinatesMouse").value=a[0]+", "+a[1],!(a[0]>=this.ZoneCurrent.rect[0][0]&&a[1]>=this.ZoneCurrent.rect[0][1]&&a[0]<=this.ZoneCurrent.rect[1][0]&&a[1]<=this.ZoneCurrent.rect[1][1])){var b,c,d,e="";for(b in this.Zones)if(a[0]>=this.Zones[b].rect[0][0]&&a[1]>=this.Zones[b].rect[0][1]&&a[0]<=this.Zones[b].rect[1][0]&&a[1]<=this.Zones[b].rect[1][1]){d=this.Zones[this.ZoneCurrent.nick];for(c in d.Layers)this.Map.removeLayer(d.Layers[c]);this.ZoneCurrent=this.Zones[b],e=this.getZoneName(this.ZoneCurrent),document.getElementById("mapCoordinatesName").value=e,O.Options.bol_showChainPaths&&I.PageCurrent!==I.PageEnum.Map&&this.ZoneCurrent.Layers.Path.addTo(this.Map),O.Options.bol_displayWaypoints&&this.ZoneCurrent.Layers.Waypoint.addTo(this.Map),O.Options.bol_displayPOIs&&this.ZoneCurrent.Layers.Landmark.addTo(this.Map),O.Options.bol_displayVistas&&this.ZoneCurrent.Layers.Vista.addTo(this.Map),O.Options.bol_displayChallenges&&this.ZoneCurrent.Layers.Challenge.addTo(this.Map),O.Options.bol_displayHearts&&this.ZoneCurrent.Layers.Heart.addTo(this.Map),O.Options.bol_displaySectors&&this.ZoneCurrent.Layers.Sector.addTo(this.Map),O.Options.bol_displayEvents&&(this.ZoneCurrent.Layers.EventIcon.addTo(this.Map),this.ZoneCurrent.Layers.EventRing.addTo(this.Map)),I.qTip.init(".leaflet-marker-icon"),this.adjustZoomMapping();break}}},refreshCurrentZone:function(){var a=this.ZoneCurrent.center;this.showCurrentZone(this.getZoneCenter("dry")),this.showCurrentZone(this.getZoneCenter("rata")),this.showCurrentZone(a)},computeZoneCenter:function(a){var b=this.Zones[a].rect,c=b[0][0]+~~((b[1][0]-b[0][0])/2),d=b[0][1]+~~((b[1][1]-b[0][1])/2);return[c,d]},getZoneCenter:function(a){return this.Zones[a].center},getEventCenter:function(a){var b=this.getZoneFromID(a.map_id),c=a.location.center;return this.convertEventCoord(c,b)},scaleDimension:function(a,b){return b=b||this.Map.getZoom(),parseInt(a/Math.pow(this.cZoomFactor,this.ZoomEnum.Max-b))},invertZoomLevel:function(a){return this.ZoomEnum.Max-T.wrapInteger(a,this.ZoomEnum.Max)},adjustZoomMapping:function(){var c,d,e,f,g,h,a=this,b=this.Map.getZoom();switch(b){case 7:c=40,d=32,e=32,f=256;break;case 6:c=32,d=24,e=24,f=128;break;case 5:c=26,d=16,e=16,f=64;break;case 4:c=20,d=12,e=12,f=32;break;case 3:c=16,d=0,e=0,f=0;break;case 2:c=12,d=0,e=0,f=0;break;default:c=0,d=0,e=0,f=0}switch(b){case 7:g=28,h=.9;break;case 6:g=20,h=.6;break;case 5:g=16,h=.3;break;default:g=0,h=0}O.Options.bol_showWorldCompletion&&(b===this.ZoomEnum.Default?(this.toggleLayer(this.Layer.Overview,!0),this.Layer.Overview.eachLayer(function(a){a._icon.style.display="table"})):this.toggleLayer(this.Layer.Overview,!1)),this.ZoneCurrent.Layers.Waypoint.eachLayer(function(b){a.changeMarkerIcon(b,U.URL_IMG.Waypoint,c)}),this.ZoneCurrent.Layers.Landmark.eachLayer(function(c){a.changeMarkerIcon(c,U.URL_IMG.Landmark,d),c._icon&&(c._icon.style.opacity=b<a.ZoomEnum.Max?.6:.8)}),this.ZoneCurrent.Layers.Vista.eachLayer(function(b){a.changeMarkerIcon(b,U.URL_IMG.Vista,d)}),this.ZoneCurrent.Layers.Challenge.eachLayer(function(b){a.changeMarkerIcon(b,U.URL_IMG.Challenge,d)}),this.ZoneCurrent.Layers.Heart.eachLayer(function(b){a.changeMarkerIcon(b,U.URL_IMG.Heart,d)}),this.ZoneCurrent.Layers.Sector.eachLayer(function(b){b._icon&&(b._icon.style.fontSize=g+"px",b._icon.style.opacity=h,b._icon.style.zIndex=a.cZIndexBury+1,O.Options.bol_displaySectors&&(b._icon.style.display="table"))}),O.Options.bol_displayEvents&&(this.ZoneCurrent.Layers.EventIcon.eachLayer(function(b){a.changeMarkerIcon(b,b._icon.src,e),b._icon&&(b._icon.style.zIndex=M.cZIndexRaise)}),this.ZoneCurrent.Layers.EventRing.eachLayer(function(b){a.changeMarkerIcon(b,b._icon.src,f),b._icon&&(b._icon.style.zIndex=M.cZIndexBury)})),this.updateCharacter(-1)},createStandardIcon:function(a){return L.icon({iconUrl:a,iconSize:[32,32],iconAnchor:[16,16]})},createPin:function(a,b,c){void 0===b&&(b=[32,32]);var d={icon:L.icon({iconUrl:a,iconSize:b,iconAnchor:[b[0]/2,b[1]/2]}),draggable:!0};if(void 0!==c)for(var e in c)d[e]=c[e];var f=L.marker(this.convertGCtoLC([0,0]),d);return this.Layer.Pin.addLayer(f),f},savePersonalPins:function(){localStorage[O.Utilities.personalPins.key]=this.getPersonalCoords()},loadPersonalPins:function(){return localStorage[O.Utilities.personalPins.key]},createPersonalPin:function(a,b){var c=this,d=L.marker(a,{icon:L.icon({iconUrl:"img/map/pin_white.png",iconSize:[32,32],iconAnchor:[16,16]}),draggable:!0,opacity:.9});this.toggleLayer(d,!0),this.Layer.PersonalPin.addLayer(d),b&&this.drawPersonalPath(),this.bindMarkerCoordBehavior(d,"click"),d.on("click",function(){void 0===this.options.ismarked||this.options.ismarked===!1?(this.options.ismarked=!0,this.setOpacity(.3)):(this.options.ismarked=!1,this.setOpacity(1))}),d.on("dblclick",function(){c.toggleLayer(this,!1),c.Layer.PersonalPin.removeLayer(this),c.drawPersonalPath()}),d.on("contextmenu",function(){c.GPSPreviousCoord.length>0?c.movePin(this,c.GPSPreviousCoord):c.movePin(this,c.Map.getCenter()),c.drawPersonalPath()}),d.on("dragend",function(){c.drawPersonalPath()})},insertPersonalPin:function(a,b){var c=new Array,d=0;this.Layer.PersonalPin.eachLayer(function(e){c.push(e.getLatLng()),d===a&&c.push(b),d++}),this.clearPersonalPins();for(d in c)this.createPersonalPin(c[d]);this.drawPersonalPath()},clearPersonalPins:function(){var a=this;this.Layer.PersonalPin.eachLayer(function(b){a.toggleLayer(b,!1)}),this.Layer.PersonalPin.clearLayers(),this.drawPersonalPath()},drawPersonalPath:function(){var a=this;if(O.Options.bol_showPersonalPaths){var b,c=new Array,d=new Array,e=0;if(this.Layer.PersonalPin.eachLayer(function(b){c.push(b.getLatLng()),d.push(a.getLayerId(b)),e++}),e>1){this.Layer.PersonalPath.clearLayers();for(var f=0;e-1>f;f++)b=L.polyline([c[f],c[f+1]],{color:"white",opacity:.4,precede:f}),b.on("click",function(){$("#"+a.MapEnum+"CoordinatesCopy").val(a.getPersonalCoords()).select()}),b.on("dblclick",function(b){a.insertPersonalPin(this.options.precede,b.latlng)}),this.Layer.PersonalPath.addLayer(b);this.toggleLayer(this.Layer.PersonalPath,!0)}else this.Layer.PersonalPath.clearLayers(),this.toggleLayer(this.Layer.PersonalPath,!1)}else this.Layer.PersonalPath.clearLayers(),this.toggleLayer(this.Layer.PersonalPath,!1);this.savePersonalPins()},parsePersonalPath:function(a){var b=this.parseCoordinatesMulti(a);return null!==b?(this.redrawPersonalPath(b),!0):!1},redrawPersonalPath:function(a){if(a.length>0){this.clearPersonalPins();for(var b in a)this.createPersonalPin(this.convertGCtoLC(a[b]));this.drawPersonalPath(),this.goToArguments(a[0])}else I.write("Path unavailable for this.")},getPersonalCoords:function(){var a=this,b=new Array,c=0;this.Layer.PersonalPin.eachLayer(function(d){b.push(a.convertLCtoGC(d.getLatLng())),c++});var d="";return c>1?d=this.compileCoordinates(b):1===c&&(d=this.formatCoord(b[0])),d},changeMarkerIcon:function(a,b,c){void 0===c&&(c=this.cICON_SIZE_STANDARD),a.setIcon(new L.icon({iconUrl:b,iconSize:[c,c],iconAnchor:[c/2,c/2]}))},getLayerId:function(a){return a._leaflet_id},toggleLayer:function(a,b){void 0!==a&&(void 0===b&&(b=!this.Map.hasLayer(a)),b?a.addTo(this.Map):this.Map.removeLayer(a))},toggleLayerArray:function(a,b){for(var c in a)this.toggleLayer(a[c],b)},toggleSubmap:function(a,b){var c=this.Submaps[a];void 0===c.ImageOverlay?(c.ImageOverlay=L.imageOverlay(c.img,this.convertGCtoLCMulti(c.bounds)),this.toggleSubmap(a,b)):(void 0===b&&(b=!this.Map.hasLayer(c.ImageOverlay)),b?c.ImageOverlay.addTo(this.Map).bringToBack():this.Map.removeLayer(c.ImageOverlay))},toggleSubmapArray:function(a,b){for(var c in a)this.toggleSubmap(a[c],b)},movePin:function(a,b){void 0===b?this.toggleLayer(a,!1):(this.toggleLayer(a,!0),Array.isArray(b)?a.setLatLng(this.convertGCtoLC(b)):a.setLatLng(b),a._icon.style.zIndex=this.cZIndexRaise)},goToView:function(a,b,c){void 0!==c&&this.movePin(c,a),void 0===b&&(b=this.ZoomEnum.Ground),b===this.ZoomEnum.Same&&(b=this.Map.getZoom()),this.Map.setView(this.convertGCtoLC(a),b),this.showCurrentZone(a)},goToLatLng:function(a,b){void 0===b&&(b=this.ZoomEnum.Ground),b===this.ZoomEnum.Same&&(b=this.Map.getZoom()),this.Map.setView(a,b),this.showCurrentZone(this.convertLCtoGC(a))},goToZone:function(a,b){var c=this.getZoneCenter(a);this.showCurrentZone(c),this.goToView(c,b)},goToDefault:function(){this.Map.setView(this.convertGCtoLC(this.cMAP_CENTER),this.ZoomEnum.Default)},goToArguments:function(a,b){var c,e,d=[];if(a)if(d=this.parseCoordinates(a),2===d.length)isFinite(d[0])&&isFinite(d[1])&&this.goToView(d,this.ZoomEnum.Ground,b);else if(d.length>=3){if(isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])){var f=this.invertZoomLevel(d[2]);this.goToView([d[0],d[1]],f,b)}}else if(e=a.toLowerCase(),"default"===e)this.goToDefault();else for(c in this.Zones)if(-1!==e.indexOf(c)){this.goToView(this.getZoneCenter(c),this.ZoomEnum.Bird);break}U.Args[U.KeyEnum.Go]=null},convertGCtoLC:function(a){return this.Map.unproject(a,this.Map.getMaxZoom())},convertGCtoLCMulti:function(a,b){b=b||0;var c,d=new Array;for(c=b;c<a.length;c++)d.push(this.convertGCtoLC(a[c]));return d},convertLCtoGC:function(a){var b=this.Map.project(a,this.ZoomEnum.Max);return[Math.round(b.x),Math.round(b.y)]},convertLCtoGCMulti:function(a){for(var b=new Array,c=0;c<a.length;c++)b.push(this.convertLCtoGC(a[c]));return b},convertEventCoord:function(a,b){var c=b.continent_rect,d=b.map_rect;return[~~(c[0][0]+(c[1][0]-c[0][0])*(a[0]-d[0][0])/(d[1][0]-d[0][0])),~~(c[0][1]+(c[1][1]-c[0][1])*(1-(a[1]-d[0][1])/(d[1][1]-d[0][1])))]},convertGPSCoord:function(a,b){var c=this.getZoneFromID(b),d=new Array(3);return d[0]=a[0]*this.cMETER_TO_INCH,d[1]=a[2]*this.cMETER_TO_INCH,d[2]=a[1]*this.cMETER_TO_INCH,this.convertEventCoord(d,c)},convertGPSAngle:function(a){return Math.atan2(a[2],a[0])*this.cRADIAN_TO_DEGREE},parseCoordinates:function(a){var b=a.toString().replace(/[^\d,-.]/g,"");return b.split(",")},parseCoordinatesMulti:function(a){var f,b=13,c=a.replace(/\s/g,""),d=new Array,e=new Array;if(c.length>=b&&"["===c.charAt(0)&&"["===c.charAt(1)&&"]"===c.charAt(c.length-1)&&"]"===c.charAt(c.length-2)){c=c.substring(2,c.length-2),d=c.split("],[");for(var g in d)f=d[g].split(","),2===f.length&&(f[0]=parseInt(f[0]),f[1]=parseInt(f[1]),e.push(f));return e}return null},sortCoordinates:function(a,b){var c;for(var d in a)c=a[d],c[0]=Math.round(c[0]),c[1]=Math.round(c[1]);if(a.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0}),b)for(var d in a)this.printNumberedCoordinates(a[d],d);else this.printCoordinates(a)},roundCoordinates:function(a){var b;for(var c in a)b=a[c],b[0]=Math.round(b[0]),b[1]=Math.round(b[1]);this.printCoordinates(a)},printNeedles:function(a){for(var b in a)this.printNumberedCoordinates(a[b].c,b)},formatNodes:function(a){for(var b in a)I.write("{c: ["+a[b][0]+", "+a[b][1]+"]},")},printNumberedCoordinates:function(a,b){I.write("{n: "+(parseInt(b)+1)+", c: ["+a[0]+", "+a[1]+"]},")},formatCoord:function(a){return"["+a[0]+", "+a[1]+"]"},compileCoordinates:function(a){var b="";for(var c in a)b=b+"["+a[c][0]+","+a[c][1]+"],";return b=b.substring(0,b.length-1),"["+b+"]"},printCoordinates:function(a){I.write(this.compileCoordinates(a),30)},convertLatLngs:function(a){var b=this.convertLCtoGCMulti(a);this.printCoordinates(b)},getElementCoordinates:function(a){var b=a.attr("data-coord");return this.Zones[b]?this.getZoneCenter(b):this.parseCoordinates(b)},bindMapLinks:function(a,b){if(I.isMapEnabled!==!1){var c=this;$(a+" dfn").each(function(){$(this).text("["+$(this).text()+"]"),c.bindMapLinkBehavior($(this),b,c.Pin.Program)})}},bindMapLinkBehavior:function(a,b,c){if(I.isMapEnabled!==!1){var d=this;a.click(function(){var a=d.getElementCoordinates($(this));d.goToView(a,b,c)}),a.dblclick(function(){var a=d.getElementCoordinates($(this));d.Map.getZoom()===d.ZoomEnum.Max?d.goToView(a,d.ZoomEnum.Default,c):d.goToView(a,d.ZoomEnum.Ground,c)}),a.mouseover(function(){var a=d.getElementCoordinates($(this));d.movePin(d.Pin.Over,a)}),a.mouseout(function(){d.movePin(d.Pin.Over)})}},bindOverviewBehavior:function(a,b){var c=this;a.on(b,function(b){c.goToZone(a.options.mappingzone,c.ZoomEnum.Sky)})},bindMarkerZoomBehavior:function(a,b){var c=this;a.on(b,function(a){c.Map.getZoom()===c.ZoomEnum.Max?c.Map.setZoom(c.ZoomEnum.Default):c.Map.setView(a.latlng,c.ZoomEnum.Max)})},bindMappingZoomBehavior:function(a,b){var c=this;a.on(b,function(a){c.Map.getZoom()===c.ZoomEnum.Max?c.Map.setZoom(c.ZoomEnum.Sky):c.Map.setView(a.latlng,c.ZoomEnum.Max)})},bindMarkerCoordBehavior:function(a,b){var c=this;a.on(b,function(){var a=c.convertLCtoGC(this.getLatLng());$("#"+c.MapEnum+"CoordinatesCopy").val(c.formatCoord(a)).select()})},bindZoneList:function(){$("#mapZoneList li").each(function(){var a=$(this).attr("data-zone");$(this).text(M.getZoneName(a)),$(this).attr("data-coord",M.getZoneCenter(a).toString()),M.bindMapLinkBehavior($(this),M.ZoomEnum.Same)}),$("#mapZoneList h2").each(function(){var a=$(this).attr("data-region");$(this).text(D.getObjectName(M.Regions[a]))})},updateCharacter:function(a){if(void 0!==GPSPositionArray&&null!==GPSPositionArray&&3===GPSPositionArray.length&&!this.isUserDragging&&void 0!==GPSIdentityJSON&&null!==GPSIdentityJSON){if(this.isZoneValid(GPSIdentityJSON.map_id)===!1)return this.movePin(this.Pin.Character),void this.movePin(this.Pin.Camera);var b=this.convertGPSCoord(GPSPositionArray,GPSIdentityJSON.map_id);if(!(b[0]>this.cMAP_BOUND||b[0]<=0||b[1]>this.cMAP_BOUND||b[1]<=0)&&((O.Options.bol_followCharacter&&this.GPSPreviousCoord[0]!==b[0]&&this.GPSPreviousCoord[1]!==b[1]||a>=0)&&(this.Map.setView(this.convertGCtoLC(b),this.Map.getZoom()),this.showCurrentZone(b),this.GPSPreviousCoord=b,a=-1),O.Options.bol_displayCharacter)){var c=-this.convertGPSAngle(GPSDirectionArray),d=-this.convertGPSAngle(GPSCameraArray);if(this.GPSPreviousAngleCharacter!==c||this.GPSPreviousAngleCamera!==d||0>=a){this.movePin(this.Pin.Character,b),this.movePin(this.Pin.Camera,b),this.Pin.Camera._icon.style.zIndex=this.cZIndexBury;var e=this.Pin.Character._icon.style.transform.toString(),f=this.Pin.Camera._icon.style.transform.toString();
-1===e.indexOf("rotate")&&(this.Pin.Character._icon.style.transform=e+" rotate("+c+"deg)"),-1===f.indexOf("rotate")&&(this.Pin.Camera._icon.style.transform=f+" rotate("+d+"deg)"),this.GPSPreviousAngleCharacter=c,this.GPSPreviousAngleCamera=d}}}},tickGPS:function(){(O.Options.bol_followCharacter||O.Options.bol_displayCharacter)&&(M.updateCharacter(),window.clearTimeout(M.GPSTimeout),M.GPSTimeout=setTimeout(M.tickGPS,O.Options.int_msecGPSRefresh))}},P={Layer:{DryTopNicks:new L.layerGroup,Chest:new L.layerGroup},LayerArray:{ChainPath:new Array,Resource:new Array,JP:new Array,Guild_Bounty:new Array,Guild_Trek:new Array,Guild_Challenge:new Array,Guild_Rush:new Array,Guild_Puzzle:new Array,DryTopIcons:new Array,DryTopRings:new Array,DryTopActive:new Array},Events:{},DryTopTimer:{},Resources:{},JPs:{},Chests:{},Collectibles:{},Guild:{},initializeMap:function(){I.isMapEnabled&&M.initializeMap()},wantZoomToFirstEvent:function(){return I.isMapEnabled&&O.Options.bol_tourPrediction&&!O.Options.bol_followCharacter&&I.PageCurrent===I.PageEnum.Chains&&void 0===U.Args[U.KeyEnum.Go]?!0:!1},drawDirectedPath:function(a,b,c){void 0===b&&(b=!0);var d=M.convertGCtoLCMulti(a),e=new L.layerGroup,f=8,g=b?0:f-1;c=c||"lime";for(var h=0;h<d.length-1;h++)e.addLayer(L.polyline([d[h],d[h+1]],{color:c,weight:2*(g+2)})),g=b?g+1:g-1,b&&g>=f?g=0:!b&&0>g&&(g=f-1);return e},drawSpots:function(a,b){var c=M.convertGCtoLCMulti(a),d=new L.layerGroup,e={radius:10,color:"lime",weight:4};if(void 0!==b)for(var f in b)e[f]=b[f];for(var f in c)d.addLayer(L.circleMarker(c[f],e));return d},drawCompletionRoute:function(){M.isItineraryRetrieved?M.redrawPersonalPath(M.ZoneCurrent.path):$.getScript(U.URL_DATA.Itinerary).done(function(){for(var a in GW2T_COMPLETION_DATA)M.Zones[a].path=GW2T_COMPLETION_DATA[a].path;M.isItineraryRetrieved=!0,P.drawCompletionRoute()})},populateEvents:function(){var a=function(a){return-1!==a.indexOf("guild")||-1!==a.indexOf("subdue")||-1!==a.indexOf("challenge")||-1!==a.indexOf("offshoot")||-1!==a.indexOf("vigil en")||-1!==a.indexOf("haunted")?!0:!1},b=function(a){return-1!==a.indexOf("free")?"img/event/release.png":-1!==a.indexOf("rescue")?"img/event/release.png":-1!==a.indexOf("capture")?"img/event/flag.png":-1!==a.indexOf("retake")?"img/event/flag.png":-1!==a.indexOf("reclaim")?"img/event/flag.png":-1!==a.indexOf("liberate")?"img/event/flag.png":-1!==a.indexOf("protect")?"img/event/shield.png":-1!==a.indexOf("defend")?"img/event/shield.png":-1!==a.indexOf("escort")?"img/event/shield.png":-1!==a.indexOf("kill")?"img/event/boss.png":-1!==a.indexOf("slay")?"img/event/boss.png":-1!==a.indexOf("defeat")?"img/event/boss.png":-1!==a.indexOf("collect")?"img/event/collect.png":-1!==a.indexOf("help")?"img/event/star.png":-1!==a.indexOf("destroy")?"img/event/cog.png":-1!==a.indexOf("gather")?"img/event/collect.png":-1!==a.indexOf("bring")?"img/event/collect.png":-1!==a.indexOf("recover")?"img/event/collect.png":-1!==a.indexOf("return")?"img/event/collect.png":-1!==a.indexOf("retrieve")?"img/event/collect.png":-1!==a.indexOf("burglar")?"img/event/fist.png":"img/event/swords.png"},c=function(a){var b=a.location.radius;switch(a.location.type){case"sphere":return 2e3>b?"img/ring/c_s.png":"img/ring/c_m.png";case"cylinder":return"img/ring/e_m_h.png";case"poly":return"img/ring/e_l_h.png"}return"img/ring/c_m.png"};$.getJSON(U.URL_API.EventNames,function(a){var b;for(b in a)P.Events[a[b].id]={},P.Events[a[b].id].name=a[b].name}).done(function(){$.getJSON(U.URL_API.EventDetails,function(d){var e,f,g,h,i,j,k;for(e in d.events)f=d.events[e],g=f.name.toLowerCase(),h=void 0!==P.Events[e]?P.Events[e].name:f.name,k=M.getZoneFromID(f.map_id),void 0===P.Events[e]||void 0===k||a(g)||988===f.map_id||50===f.map_id||(j=M.convertGCtoLC(M.getEventCenter(f)),i=L.marker(j,{clickable:!1,icon:L.icon({iconUrl:c(f),iconSize:[256,256],iconAnchor:[128,128]})}),k.Layers.EventRing.addLayer(i),i=L.marker(j,{title:"<span class='mapPoi'>"+h+" ("+f.level+")</span>",icon:L.icon({iconUrl:b(g),iconSize:[48,48],iconAnchor:[24,24]})}),M.bindMappingZoomBehavior(i,"click"),k.Layers.EventIcon.addLayer(i));M.isEventIconsGenerated=!0}).done(function(){P.donePopulation()}).fail(function(){}).always(function(){P.finishPopulation()})}).fail(function(){P.finishPopulation()}).always(function(){})},donePopulation:function(){M.toggleLayer(M.Layer.ZoneRectangle,O.Options.bol_showZoneRectangles),P.wantZoomToFirstEvent()&&(M.showCurrentZone(M.getZoneCenter(M.cInitialZone)),$("#chnEvent_"+C.CurrentChainSD.nexus+"_"+C.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click"))},finishPopulation:function(){M.isMapAJAXDone=!0,M.bindMapVisualChanges(I.MapEnum.Tyria),M.adjustZoomMapping(),P.adjustZoomDryTop(),M.goToArguments(U.Args[U.KeyEnum.Go],M.Pin.Program),M.tickGPS()},drawChainPaths:function(a){if(I.isMapEnabled!==!1){var b,c,d,e,f,g;if(C.isChainWorldBoss(a))for(b=0;b<a.primaryEvents.length;b++){switch(d=a.primaryEvents[b],b){case 0:e="red";break;case 1:e="orange";break;case 2:e="yellow";break;case 3:e="lime";break;case 4:e="cyan";break;case 5:e="blue";break;case 6:e="violet";break;case 7:e="purple";break;default:e="white"}f=M.convertGCtoLCMulti(d.path,1),g=L.polyline(f,{color:e}),M.Zones[a.extra[0]].Layers.Path.addLayer(g)}var h;for(b in a.events)c=a.events[b],h=c.num,-1!==h.indexOf(".")&&(h=h.replace(".","\\.")),$("#chnEvent_"+a.nexus+"_"+h).each(function(){var a=c.path[0];$(this).attr("data-coord",a[0]+","+a[1]),$(this).attr("data-eventindex",b),I.ModeCurrent!==I.ModeEnum.Mobile&&M.bindMapLinkBehavior($(this),M.ZoomEnum.Ground,M.Pin.Event)})}},generateDryTop:function(){$.getScript(U.URL_DATA.DryTop).done(function(){C.DryTop=GW2T_DRYTOP_DATA;var a,b,c,d,e;for(a in C.DryTop)d=C.DryTop[a],e=L.marker(M.convertGCtoLC(d.coord),{clickable:!1,icon:L.divIcon({className:"mapNick",html:"<span class='mapNickIn'>"+D.getObjectName(d)+"<br /><ins style='color:"+d.color+"'>"+d.time+"</ins></span>",iconSize:[512,64],iconAnchor:[256,32]})}),P.Layer.DryTopNicks.addLayer(e);M.toggleLayer(P.Layer.DryTopNicks,!0),P.DryTopTimer=L.marker(M.convertGCtoLC(M.getZoneCenter("dry")),{clickable:!1,icon:L.divIcon({className:"mapNick",html:"<div class='mapNickIn' id='mapDryTopInfo'><span id='mapDryTopTimer'></span><br /><input id='mapDryTopClip0' type='text' /> <input id='mapDryTopClip1' type='text' /></div>",iconSize:[512,64],iconAnchor:[256,32]})}),M.toggleLayer(P.DryTopTimer,!0),I.qTip.init($("#mapDryTopClip0, #mapDryTopClip1").click(function(){$(this).select()}).hover(function(){M.isMouseOnHUD=!0},function(){M.isMouseOnHUD=!1}));for(a in C.DryTopChains){c=C.DryTopChains[a];for(b in c.events)d=c.events[b],d.eventring=L.marker(M.convertGCtoLC(d.path[0]),{zIndexOffset:M.cZIndexBury,clickable:!1,image:"img/ring/"+d.ring+I.cPNG,icon:L.icon({iconUrl:"img/ring/"+d.ring+I.cPNG,iconSize:[32,32],iconAnchor:[16,16]})}),d.eventicon=L.marker(M.convertGCtoLC(d.path[0]),{title:"<span class='mapEvent'>"+D.getObjectName(d)+"</span>",image:"img/event/"+d.icon+I.cPNG,icon:L.icon({iconUrl:"img/event/"+d.icon+I.cPNG,iconSize:[16,16],iconAnchor:[8,8]})}),M.bindMappingZoomBehavior(d.eventicon,"click"),$("#chnEvent_"+c.nexus+"_"+d.num).hasClass("chnEventCurrent")&&(P.LayerArray.DryTopActive.push(d.eventicon),P.LayerArray.DryTopActive.push(d.eventring),M.toggleLayer(d.eventring,!0),M.toggleLayer(d.eventicon,!0)),P.LayerArray.DryTopRings.push(d.eventring),P.LayerArray.DryTopIcons.push(d.eventicon)}I.qTip.init(".leaflet-marker-icon"),C.isDryTopGenerated=!0,T.initializeDryTopStrings(),P.toggleDryTopIcons(!0)})},toggleDryTopIcons:function(a){C.isDryTopGenerated&&(C.isDryTopIconsShown=a,M.toggleLayer(P.Layer.DryTopNicks,a),M.toggleLayer(P.DryTopTimer,a),a?(M.toggleLayerArray(P.LayerArray.DryTopActive,a),P.adjustZoomDryTop(),K.updateDryTopClipboard()):(M.toggleLayerArray(P.LayerArray.DryTopIcons,a),M.toggleLayerArray(P.LayerArray.DryTopRings,a)))},adjustZoomDryTop:function(){if(C.isDryTopIconsShown){var a,c,d,e,f,g,b=M.Map.getZoom();switch(b){case 7:d=32,f=20,g=.9;break;case 6:d=28,f=16,g=.8;break;case 5:d=24,f=12,g=.6;break;case 4:d=20,f=0,g=0;break;case 3:d=16,f=0,g=0;break;default:d=0,f=0,g=0}e=M.scaleDimension(M.cRING_SIZE_MAX);for(a in P.LayerArray.DryTopIcons)c=P.LayerArray.DryTopIcons[a],M.changeMarkerIcon(c,c.options.image,d),c=P.LayerArray.DryTopRings[a],M.changeMarkerIcon(c,c.options.image,e);P.Layer.DryTopNicks.eachLayer(function(a){a._icon&&(a._icon.style.fontSize=f+"px",a._icon.style.opacity=g,a._icon.style.zIndex=M.cZIndexBury+1,a._icon.style.display="table")}),P.DryTopTimer._icon.style.fontSize=2*f+"px",P.DryTopTimer._icon.style.opacity=g,P.DryTopTimer._icon.style.zIndex=M.cZIndexRaise+1,P.DryTopTimer._icon.style.display="table"}}},G={generateAndInitializeDailies:function(){G.shiftLoginTrack(),$("#lgnTrack ins").each(function(){$(this).click(function(){G.shiftLoginValue(parseInt($(this).data("i")))}).mouseenter(function(){$("#lgnRecordHover").text("("+(parseInt($(this).data("i"))+1)+")")})}),$("#lgnTrack").mouseleave(function(){$("#lgnRecordHover").text("")}),I.qTip.init("#lgnTrack ins"),G.regenerateDailiesCalendar()},shiftLoginTrack:function(){var a=28,b=T.DAILY_START_UNIX;T.DAYS_SINCE_DAILY_START=~~((T.getUNIXSeconds()-b)/T.cSECONDS_IN_DAY);var c=T.wrapInteger(T.DAYS_SINCE_DAILY_START-O.Options.int_shiftLogin,a),d=T.wrapInteger(T.DAYS_SINCE_DAILY_START,a),e=0,f=0;$("#lgnTrack ins").each(function(){$(this).css({"border-radius":"auto",opacity:.3}).removeClass("lgnCurrent lgnOfficial").data("i",f),f===d&&($(this).addClass("lgnOfficial"),T.loginTrackOfficial=f),f++}),$("#lgnTrack ins").each(function(){return e===c+1?!1:(e===c&&$(this).addClass("lgnCurrent"),$(this).css({opacity:1}),void e++)}),$("#lgnRecordCurrent").text(c+1+" / "+a)},shiftLoginValue:function(a){var b=28,c=T.wrapInteger(T.loginTrackOfficial-a,b);$("#opt_int_shiftLogin").val(c).trigger("change"),G.shiftLoginTrack()},regenerateDailiesCalendar:function(){$("#dlyCalendar").empty();var a,c,b=0,d=32;for(a=0;d>a;a++)c=T.addDaysToDate(new Date,a),b=c.getUTCDate(),G.insertDailyDay(T.DailyCalendar[b],c);$("#dlyCalendar div:first").addClass("dlyCurrent").next().addClass("dlyNext"),$("#dlyCalendar .dlyEvent").each(function(){M.bindMapLinkBehavior($(this),M.ZoomEnum.Sky)}),I.qTip.init("#dlyCalendar ins")},insertDailyDay:function(a,b){var c,d,e,f,g,h,i,j,k="",l="",m="",n="",o="",p="",q="",r="</ins>",s="",t="</ins>",u="";switch(c=a.pve,d=a.pvp,e=a.wvw,f=c[0].split(" "),g=c[1].split(" "),h=c[3].split(" "),n="<ins class='dlyRegion dly_region_"+f[1].toLowerCase()+"'>","Vista"===g[0]&&(o="<ins class='dlyRegion dly_region_"+g[1].toLowerCase()+"'>",s="</ins>"),p="<ins class='dlyRegion dly_region_"+M.getZoneRegion(c[2])+"'>","Fractal"===h[0]?l="dly_pve_"+h[0].toLowerCase()+"_"+h[1]:(l="dly_pve_boss",q="<ins class='dlyRegion dly_region_"+C.getChainRegion(C.getChainByAlias(h[0]))+"'>",u="</ins>",m="<em><img src='img/chain/"+h[0].toLowerCase()+I.cPNG+"' /></em>"),i=d[2].split(" "),j=d[3].split(" "),b.getUTCDay()){case T.DayEnum.Sunday:k="dlySunday";break;case T.DayEnum.Saturday:k="dlySaturday"}$("#dlyCalendar").append("<div><aside></aside>"+m+"<var class='"+k+"'>"+b.getUTCDate()+"</var><span><ins class='dly_daily_pve'></ins>"+n+"<ins class='dly_pve_"+f[0].toLowerCase()+"' title='"+c[0]+"'></ins>"+r+o+"<ins class='dly_pve_"+g[0].toLowerCase()+"' title='"+c[1]+"'></ins>"+s+p+"<ins class='dly_pve_event dlyEvent curZoom' title='"+c[2]+" Events'data-coord='"+c[2].toLowerCase()+"'></ins>"+t+q+"<ins class='"+l+"' title='"+c[3]+"'></ins>"+u+"</span><span><ins class='dly_daily_pvp'></ins><ins class='dly_pvp_"+d[0].toLowerCase()+"' title='"+d[0]+"'></ins><ins class='dly_pvp_"+d[1].toLowerCase()+"' title='"+d[1]+"'></ins><ins class='dly_pvp_profession_"+i[0].toLowerCase()+"_0' title='"+d[2]+"'><ins class='dly_pvp_profession_"+i[1].toLowerCase()+"_1'></ins></ins><ins class='dly_pvp_profession_"+j[0].toLowerCase()+"_0' title='"+d[3]+"'><ins class='dly_pvp_profession_"+j[1].toLowerCase()+"_1'></ins></ins></span><span><ins class='dly_daily_wvw'></ins><ins class='dly_wvw_"+e[0].toLowerCase()+"' title='"+e[0]+"'></ins><ins class='dly_wvw_"+e[1].toLowerCase()+"' title='"+e[1]+"'></ins><ins class='dly_wvw_"+e[2].toLowerCase()+"' title='"+e[2]+"'></ins><ins class='dly_wvw_"+e[3].toLowerCase()+"' title='"+e[3]+"'></ins></span></div>")},generateAndInitializeResources:function(){var a=.3,b=function(a){return X.getChecklistItem(X.Checklists["Resource"+a.options.grade],a.options.index)},c=function(a,b){X.setChecklistItem(X.Checklists["Resource"+a.options.grade],a.options.index,b)},d=function(d){M.bindMarkerZoomBehavior(d,"dblclick"),M.bindMarkerCoordBehavior(d,"contextmenu"),d.on("click",function(){b(d)===X.ChecklistEnum.Checked?(c(d,X.ChecklistEnum.Unchecked),this.setOpacity(1)):(c(d,X.ChecklistEnum.Checked),this.setOpacity(a))})},e=function(){for(var a in P.Resources){var b=P.Resources[a].item;null!==b&&!function(a){$.getJSON(U.URL_API.ItemPrices+b,function(b){var c=E.deductTax(b.sells.unit_price);$("#nodPrice_"+a).html(E.createCoinString(c,!0))})}(a)}};$.getScript(U.URL_DATA.Resource).done(function(){P.Resources=GW2T_RESOURCE_DATA;var c,f,j,k,l,m,g=0,h=0,i=0;for(c in P.Resources){j=P.Resources[c];var n=c.toLowerCase();if(void 0!==j.riches&&j.riches.length>0){k=new L.layerGroup;for(f in j.riches)l=L.marker(M.convertGCtoLC(j.riches[f].c),{grade:"Rich",index:g,icon:L.divIcon({className:"nodRich",html:"<img src='img/node/"+n+I.cPNG+"' />",iconSize:[32,32],iconAnchor:[16,16]})}),d(l),k.addLayer(l),void 0!==j.riches[f].p&&(m=L.polyline(M.convertGCtoLCMulti(j.riches[f].p),{color:"white",dashArray:"5,10",opacity:.3}),k.addLayer(m)),g++;M.toggleLayer(k),P.Layer["Resource_Rich_"+c]=k,P.LayerArray.Resource.push(k)}if(void 0!==j.regulars&&j.regulars.length>0){k=new L.layerGroup;for(f in j.regulars)l=L.marker(M.convertGCtoLC(j.regulars[f].c),{grade:"Regular",index:h,icon:L.divIcon({className:"nodRegular",html:"<img src='img/node/"+n+I.cPNG+"' />",iconSize:[24,24],iconAnchor:[12,12]})}),d(l),k.addLayer(l),h++;M.toggleLayer(k),P.Layer["Resource_Regular_"+c]=k,P.LayerArray.Resource.push(k)}if(void 0!==j.zones){k=new L.layerGroup;for(f in j.zones){var o=j.zones[f],p=M.getZoneCenter(o);p[0]+=j.offset[0],p[1]+=j.offset[1],l=L.marker(M.convertGCtoLC(p),{grade:"Zone",index:i,icon:L.divIcon({className:"nodZone",html:"<img src='img/node/"+n+I.cPNG+"' />",iconSize:[32,32],iconAnchor:[16,16]})}),d(l),k.addLayer(l),i++}M.toggleLayer(k),P.Layer["Resource_Zone_"+c]=k,P.LayerArray.Resource.push(k)}}X.initializeChecklist(X.Checklists.ResourceRich,g),X.initializeChecklist(X.Checklists.ResourceRegular,h),X.initializeChecklist(X.Checklists.ResourceZone,i);for(c in P.LayerArray.Resource)P.LayerArray.Resource[c].eachLayer(function(c){c instanceof L.Marker&&b(c)===X.ChecklistEnum.Checked&&c.setOpacity(a)});for(c in P.Resources)j=P.Resources[c],$("#nodResource_"+j.type).append("<label><input id='nod_"+c+"' type='checkbox' checked='checked' /> <img src='img/node/"+c.toLowerCase()+I.cPNG+"' /> <var>"+D.getObjectName(j)+"</var><samp id='nodPrice_"+c+"'></samp></label>");for(c in P.Resources)$("#nod_"+c).change(function(){var a=U.getSubstringFromHTMLID($(this)),b=$(this).prop("checked"),c=$("#nodShowRegular").prop("checked");M.toggleLayer(P.Layer["Resource_Rich_"+a],b),M.toggleLayer(P.Layer["Resource_Regular_"+a],b&&c),M.toggleLayer(P.Layer["Resource_Zone_"+a],b&&c)});$("#mapToggle_Resource").data("checked",!0).click(function(){var a=I.toggleButtonState($(this));for(c in P.Resources)$("#nod_"+c).prop("checked",a).trigger("change")}),$("#nodToggle_ResourceMetal").click(function(){$("#nodResource_Metal input").trigger("click")}),$("#nodToggle_ResourcePlant").click(function(){$("#nodResource_Plant input").trigger("click")}),$("#nodToggle_ResourceWood").click(function(){$("#nodResource_Wood input").trigger("click")}),$("#nodShowRegular").change(function(){var a=$(this).prop("checked");for(var b in P.Resources){var c=$("#nod_"+b).prop("checked");M.toggleLayer(P.Layer["Resource_Regular_"+b],c&&a),M.toggleLayer(P.Layer["Resource_Zone_"+b],c&&a)}}).trigger("change"),$("#nodUncheck").click(function(){for(var a in P.LayerArray.Resource)P.LayerArray.Resource[a].eachLayer(function(a){a instanceof L.Marker&&a.setOpacity(1)});X.clearChecklist(X.Checklists.ResourceRich),X.clearChecklist(X.Checklists.ResourceRegular),X.clearChecklist(X.Checklists.ResourceZone)}),$("#nodRefresh").click(function(){e(),I.write("Prices refreshed.")}),e()})},generateAndInitializeJPs:function(){var a=function(a,b){a.setIcon(new L.icon({className:"jpzDifficulty"+b,iconUrl:"img/map/jp.png",iconSize:[32,32],iconAnchor:[16,16]}))};$.getScript(U.URL_DATA.JP).done(function(){P.JPs=GW2T_JP_DATA,P.Chests=GW2T_CHEST_DATA,X.Checklists.JP.length=O.getObjectLength(P.JPs),P.LayerArray.JP=new Array(X.Checklists.JP.length);var b,c;for(var b in P.JPs){var d=P.JPs[b],e=M.parseCoordinates(d.coord),f=4===d.difficulty?"Explorer":"JP",g=L.marker(M.convertGCtoLC(e),{id:d.id,difficulty:d.difficulty,title:"<div class='mapLoc'><dfn>"+f+":</dfn> "+D.getObjectName(d)+"<img src='"+U.getImageHosted(d.img)+"' /></div>"});a(g,d.difficulty),P.LayerArray.JP[d.id]=g,M.toggleLayerArray(P.LayerArray.JP,!0);var h=D.getObjectName(d);$("#jpzList_"+d.difficulty).append("<dt id='jpz_"+d.id+"' data-coord='"+d.coord+"'>"+h+"</dt><label><input type='checkbox' id='jpzCheck_"+d.id+"' /></label>&nbsp;<cite><a href='"+U.getYouTubeLink(h+" "+I.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+U.getWikiLanguageLink(h)+"' target='_blank'>[W]</a></cite><dd>"+d.description+"</dd>");var i=$("#jpz_"+d.id);i.attr("title","<div class='mapLoc'><img src='"+U.getImageHosted(d.img)+"' /></div>"),M.bindMapLinkBehavior(i,M.ZoomEnum.Same)}M.bindMapLinks(".jpzList"),U.convertExternalLink(".jpzList a"),I.qTip.init(".jpzList dt");var j=function(a,b){var c=a.c,d=null;a.t&&(d=a.t);var e=L.marker(M.convertGCtoLC(c),{icon:L.divIcon({className:"mapChest"+b,html:"<img src='img/map/chest.png' />",iconSize:[32,32],iconAnchor:[16,16]}),title:d});M.bindMappingZoomBehavior(e,"click"),P.Layer.Chest.addLayer(e)};for(b in P.Chests)for(c in P.Chests[b])j(P.Chests[b][c],b);$("#jpzToggleJP").change(function(){var b=$(this).prop("checked");if(M.toggleLayerArray(P.LayerArray.JP,b),b)for(var c in P.LayerArray.JP){var d=P.LayerArray.JP[c],b=X.getChecklistItem(X.Checklists.JP,d.options.id);b===X.ChecklistEnum.Unchecked?a(d,d.options.difficulty):a(d,0)}}),$("#jpzToggleChest").change(function(){M.toggleLayer(P.Layer.Chest,$(this).prop("checked"))}),$("#mapToggle_JP").data("checked",!0).click(function(){var a=I.toggleButtonState($(this));$("#jpzToggleJP").prop("checked",a).trigger("change"),$("#jpzToggleChest").prop("checked")&&$("#jpzToggleChest").prop("checked",a).trigger("change")}),I.qTip.init(".leaflet-marker-icon"),X.initializeChecklist(X.Checklists.JP,X.Checklists.JP.length);var b,k=function(){var a=X.countChecklist(X.Checklists.JP,X.ChecklistEnum.Checked),b=X.Checklists.JP.length;$("#jpzCounter").text(a+"/"+b)};for(b=0;b<X.Checklists.JP.length;b++)$("#jpzCheck_"+b).each(function(){var c=X.getChecklistItem(X.Checklists.JP,b,O.TypeEnum.isBoolean);$(this).prop("checked",c),c===!1?$(this).parent().prev().removeClass("jpzListNameChecked"):($(this).parent().prev().addClass("jpzListNameChecked"),a(P.LayerArray.JP[b],0))}).change(function(){var b=X.getCheckboxEnumState($(this)),c=U.getSubintegerFromHTMLID($(this));b===X.ChecklistEnum.Unchecked?($(this).parent().prev().removeClass("jpzListNameChecked"),a(P.LayerArray.JP[c],P.LayerArray.JP[c].options.difficulty)):($(this).parent().prev().addClass("jpzListNameChecked"),a(P.LayerArray.JP[c],0)),X.setChecklistItem(X.Checklists.JP,c,b),k()}).parent().hover(function(){$(this).prev().css({"text-decoration":"underline"}).trigger("mouseenter")},function(){$(this).prev().css({"text-decoration":"none"}).trigger("mouseleave")}),function(a){P.LayerArray.JP[a].on("click",function(){$("#jpzCheck_"+a).trigger("click"),I.scrollToElement($("#jpz_"+this.options.id),$("#plateMap"))}),P.LayerArray.JP[a].on("dblclick",function(){M.Map.getZoom()===M.ZoomEnum.Max?M.Map.setZoom(M.ZoomEnum.Default):M.goToLatLng(this.getLatLng())})}(b);$("#jpzUncheck").click(function(){var c="";for(b=0;b<X.Checklists.JP.length;b++)$("#jpzCheck_"+b).prop("checked",!1).parent().prev().removeClass("jpzListNameChecked"),a(P.LayerArray.JP[b],P.LayerArray.JP[b].options.difficulty),c+="0";X.Checklists.JP.value=c,localStorage[X.Checklists.JP.key]=X.Checklists.JP.value,k()}),k()})},generateCollectiblesUI:function(){$.getScript(U.URL_DATA.Collectible).done(function(){P.Collectibles=GW2T_COLLECTIBLE_DATA;var a,b,c;for(a in P.Collectibles)b=P.Collectibles[a],c=D.getObjectName(b),$("#cltList").append("<div><label style='color:"+b.color+"'><ins class='clt_"+a.toLowerCase()+"'></ins><input id='ned_"+a+"' type='checkbox' /> "+c+"</label><span><cite><a href='"+U.getYouTubeLink(c+" "+I.cGameNick)+"'>[Y]</a>&nbsp;<a href='"+b.wiki+"'>[W]</a>&nbsp;<a href='"+b.credit+"'>[C]</a>&nbsp;&nbsp;-&nbsp;&nbsp;</cite><a id='nedUncheck_"+a+"'>Reset</a></span></div>"),$("#ned_"+a).one("click",function(){var a=U.getSubstringFromHTMLID($(this));G.generateCollectibles(a),M.goToArguments(P.Collectibles[a].view)}),I.ArticleCurrent&&I.ArticleCurrent.toLowerCase()===X.Collectibles[a].urlkey&&($("#ned_"+a).trigger("click"),I.ArticleCurrent=null);U.convertExternalLink("#cltList cite a"),$("#mapToggle_Collectible").data("checked",!1).data("hideonly",!0).click(function(){for(a in P.Collectibles)$("#ned_"+a).prop("checked")&&$("#ned_"+a).trigger("click")})})},generateCollectibles:function(a){var b,c,f,g,h,i,d=U.Args[X.Collectibles[a].urlkey],e=P.Collectibles[a],j=D.getObjectName(e),k=new Array,l=function(a,b){a.setIcon(new L.divIcon({className:"mapNeedle"+b,html:"<span style='color:"+a.options.needleColor+"'>"+a.options.needleLabel+"</span>",iconSize:[16,16],iconAnchor:[8,8]}))};X.Collectibles[a].length=P.Collectibles[a].needles.length,X.initializeChecklist(X.Collectibles[a],X.Collectibles[a].length,d),P.LayerArray[a]=new Array,P.Layer[a]=new L.layerGroup;for(b in e.needles)c=parseInt(b)+1,f=e.needles[b],g=X.getChecklistItem(X.Collectibles[a],b),i="<div class='mapLoc'><dfn>"+j+":</dfn> #"+c,f.i?i+="<img src='"+f.i+"' />":f.t&&(i+="<br /><span class='mapTip'>"+f.t+"</span>"),i+="</div>",h=L.marker(M.convertGCtoLC(f.c),{needleIndex:b,needleType:a,needleKey:X.Collectibles[a].urlkey,needleColor:e.color,needleLabel:void 0===f.l?c:f.l,title:i}),l(h,g),h.on("click",function(a){var b=X.trackChecklistItem(X.Collectibles[this.options.needleType],this.options.needleIndex);l(this,b);var c=X.getCheckedIndexes(X.Collectibles[this.options.needleType]);0===c.length?U.updateQueryString():U.updateAddressBar("?"+this.options.needleKey+"="+c)}),P.LayerArray[a].push(h),k.push(f.c);var m=L.polyline(M.convertGCtoLCMulti(k),{color:"white",opacity:.2});P.Layer[a].addLayer(m),M.toggleLayerArray(P.LayerArray[a],!0),M.toggleLayer(P.Layer[a],!0),I.qTip.init(".leaflet-marker-icon"),$("#ned_"+a).change(function(){var a=$(this).prop("checked"),b=U.getSubstringFromHTMLID($(this));M.toggleLayerArray(P.LayerArray[b],a),M.toggleLayer(P.Layer[b],a),a&&M.goToArguments(P.Collectibles[b].view)}),$("#nedUncheck_"+a).click(function(){var a=U.getSubstringFromHTMLID($(this)),b=P.LayerArray[a];for(var c in b)l(b[c],X.ChecklistEnum.Unfound);X.clearChecklist(X.Collectibles[a]),U.updateQueryString()})},generateGuildUI:function(){hideGuildMapDrawings=function(a){M.toggleLayerArray(P.LayerArray["Guild_"+a],!1),$("#gldBook_"+a+" dfn").each(function(){I.toggleHighlight($(this),!1)}),void 0!==P.Guild[a].usedSubmaps&&M.toggleSubmapArray(P.Guild[a].usedSubmaps,!1)},finalizeGuildBook=function(a){U.convertExternalLink("#gldBook_"+a+" a"),I.qTip.init("#gldBook_"+a+" dfn"),$("#gldBook_"+a+" .cssWaypoint").each(function(){new ZeroClipboard($(this)[0]).on("aftercopy",function(a){I.write(K.cZeroClipboardSuccessText+a.data["text/plain"],5)})})},$.getScript(U.URL_DATA.Guild).done(function(){P.Guild=GW2T_GUILD_DATA;var a;for(a in P.Guild){var b=P.Guild[a],c=D.getObjectName(b);$("#gldButtons").append("<div><button class='gldButton curToggle' id='gldButton_"+a+"' title='<dfn>"+c+"</dfn><br />gw2timer.com/guild/"+a.toLowerCase()+"'><img src='img/guild/"+a.toLowerCase()+I.cPNG+"' /></button><a class='cssButton' href='"+U.getYouTubeLink(c+" "+I.cGameNick)+"' target='_blank'>Y</a>&nbsp;<a class='cssButton' href='"+D.getObjectURL(b)+"' target='_blank'>W</a></div>"),$("#gldBooks").append("<div class='gldBook' id='gldBook_"+a+"'></div>")}if($(".gldBook").hide(),I.qTip.init("#gldButtons button"),U.convertExternalLink("#gldButtons a"),$(".gldButton").click(function(){var a=U.getSubstringFromHTMLID($(this)),b=!0;$("#gldBook_"+a).is(":visible")&&(hideGuildMapDrawings(a),b=!1),$(".gldBook").hide(),b&&$("#gldBook_"+a).show(),I.updateScrollbar()}),$("#mapToggle_Guild").data("hideonly",!0).click(function(){$(".gldButton").each(function(){hideGuildMapDrawings(U.getSubstringFromHTMLID($(this))),$(".gldBook").hide(),I.updateScrollbar()}),M.movePin(M.Pin.Program)}),$("#gldButton_Bounty").one("click",function(){D.sortObjects(P.Guild.Bounty.data);for(var a in P.Guild.Bounty.data){var b=P.Guild.Bounty.data[a],c=D.getDefaultObjectName(b),d=D.getObjectName(b);$("#gldBook_Bounty").append("<div><img class='cssWaypoint' "+K.cZeroClipboardDataAttribute+"='"+b.wp+" "+D.getObjectName(P.Guild.Bounty)+": "+d+"' src='img/ui/placeholder.png' /> <dfn id='gldBounty_"+a+"' data-coord='["+b.coord[0]+","+b.coord[1]+"]'>"+d+"</dfn> <a href='"+U.getYouTubeLink(c+" "+I.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+U.getWikiLink(c)+"' target='_blank'>[W]</a></div>");var e=new L.layerGroup;if(void 0!==b.paths)for(var f in b.paths)e.addLayer(P.drawDirectedPath(b.paths[f]));void 0!==b.spawn&&e.addLayer(P.drawSpots(b.spawn)),P.LayerArray.Guild_Bounty.push(e);var g=$("#gldBounty_"+a);g.attr("title","<div class='mapLoc'><img src='"+b.img+"' /></div>").click(function(){I.toggleHighlight($(this)),M.toggleLayer(P.LayerArray.Guild_Bounty[U.getSubintegerFromHTMLID($(this))])}),M.bindMapLinkBehavior(g,M.invertZoomLevel(b.coord[2]))}finalizeGuildBook("Bounty")}),$("#gldButton_Trek").one("click",function(){D.sortObjects(P.Guild.Trek.data);for(var a in P.Guild.Trek.data){var b=P.Guild.Trek.data[a],c=D.getObjectName(b);$("#gldBook_Trek").append("<div><img class='cssWaypoint' "+K.cZeroClipboardDataAttribute+"='"+b.wp+" "+D.getObjectName(P.Guild.Trek)+": "+c+"' src='img/ui/placeholder.png' /> <dfn id='gldTrek_"+a+"' data-coord='["+b.coord[0]+","+b.coord[1]+"]'>"+c+"</dfn></div>");var d=new L.layerGroup;d.addLayer(L.polyline(M.convertGCtoLCMulti(b.path),{color:"gold"})),P.LayerArray.Guild_Trek.push(d);var e=$("#gldTrek_"+a);e.attr("title","<div class='mapLoc'><img src='"+b.img+"' /></div>").click(function(){I.toggleHighlight($(this)),M.toggleLayer(P.LayerArray.Guild_Trek[U.getSubintegerFromHTMLID($(this))])}),M.bindMapLinkBehavior(e,M.ZoomEnum.Same,M.Pin.Program)}finalizeGuildBook("Trek")}),$("#gldButton_Challenge").one("click",function(){P.Guild.Challenge.usedSubmaps=new Array,D.sortObjects(P.Guild.Challenge.data);for(var a in P.Guild.Challenge.data){var b=P.Guild.Challenge.data[a],c=D.getDefaultObjectName(b),d=D.getObjectName(b);$("#gldBook_Challenge").append("<div><img class='cssWaypoint' "+K.cZeroClipboardDataAttribute+"='"+b.wp+" "+D.getObjectName(P.Guild.Challenge)+": "+d+"' src='img/ui/placeholder.png' /> <dfn id='gldChallenge_"+a+"' data-coord='["+b.coord[0]+","+b.coord[1]+"]'>"+d+" - "+b.limit+"</dfn> <a href='"+U.getYouTubeLink(c+" "+I.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+U.getWikiLink(c)+"' target='_blank'>[W]</a></div>"),void 0!==b.submap&&(M.toggleSubmap(b.submap,!1),P.Guild.Challenge.usedSubmaps.push(b.submap));var e=new L.layerGroup;e.addLayer(L.polyline(M.convertGCtoLCMulti(b.path),{color:"gold"})),e.addLayer(P.drawSpots(b.spawn,{color:"gold"})),P.LayerArray.Guild_Challenge.push(e);var f=$("#gldChallenge_"+a);f.click(function(){var a=U.getSubintegerFromHTMLID($(this)),b=P.Guild.Challenge.data[a].submap,c=I.toggleHighlight($(this));void 0!==b&&M.toggleSubmap(b,c),M.toggleLayer(P.LayerArray.Guild_Challenge[a])}),M.bindMapLinkBehavior(f,M.ZoomEnum.Ground,M.Pin.Program)}finalizeGuildBook("Challenge")}),$("#gldButton_Rush").one("click",function(){P.Guild.Rush.usedSubmaps=new Array,D.sortObjects(P.Guild.Rush.data);for(var a in P.Guild.Rush.data){var b=P.Guild.Rush.data[a],c=D.getDefaultObjectName(b),d=D.getObjectName(b);$("#gldBook_Rush").append("<div><img class='cssWaypoint' "+K.cZeroClipboardDataAttribute+"='"+b.wp+" "+D.getObjectName(P.Guild.Rush)+": "+d+"' src='img/ui/placeholder.png' /> <dfn id='gldRush_"+a+"' data-coord='["+b.coord[0]+","+b.coord[1]+"]'>"+d+"</dfn> <a href='"+U.getYouTubeLink(c+" "+I.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+U.getWikiLink(c)+"' target='_blank'>[W]</a></div>"),void 0!==b.submap&&(M.toggleSubmap(b.submap,!1),P.Guild.Rush.usedSubmaps.push(b.submap));var e=new L.layerGroup;e.addLayer(L.polyline(M.convertGCtoLCMulti(b.path),{color:"gold"})),e.addLayer(L.polyline(M.convertGCtoLCMulti(b.track),{color:"lime",dashArray:"5,10"})),e.addLayer(L.marker(M.convertGCtoLC(b.finish),{icon:M.createStandardIcon("img/map/chest.png")})),void 0!==b.traps0&&e.addLayer(P.drawSpots(b.traps0,{radius:5,color:"red",weight:1,opacity:1})),void 0!==b.traps1&&e.addLayer(P.drawSpots(b.traps1,{radius:10,color:"red",weight:1,opacity:1})),e.addLayer(P.drawSpots(b.flags,{radius:2,color:"gold",weight:2,opacity:1})),P.LayerArray.Guild_Rush.push(e);var f=$("#gldRush_"+a);f.click(function(){var a=U.getSubintegerFromHTMLID($(this)),b=P.Guild.Rush.data[a].submap,c=I.toggleHighlight($(this));void 0!==b&&M.toggleSubmap(b,c),M.toggleLayer(P.LayerArray.Guild_Rush[a])}),M.bindMapLinkBehavior(f,M.ZoomEnum.Ground,M.Pin.Program)}finalizeGuildBook("Rush")}),$("#gldButton_Puzzle").one("click",function(){P.Guild.Puzzle.usedSubmaps=new Array,D.sortObjects(P.Guild.Puzzle.data);for(var a in P.Guild.Puzzle.data){var b=P.Guild.Puzzle.data[a],c=D.getDefaultObjectName(b),d=D.getObjectName(b);$("#gldBook_Puzzle").append("<div><img class='cssWaypoint' "+K.cZeroClipboardDataAttribute+"='"+b.wp+" "+D.getObjectName(P.Guild.Puzzle)+": "+d+"' src='img/ui/placeholder.png' /> <dfn id='gldPuzzle_"+a+"' data-coord='["+b.coord[0]+","+b.coord[1]+"]'>"+d+" - "+b.limit+"</dfn> <a href='"+U.getYouTubeLink(c+" "+I.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+U.getWikiLink(c)+"' target='_blank'>[W]</a></div>"),void 0!==b.submap&&(M.toggleSubmap(b.submap,!1),P.Guild.Puzzle.usedSubmaps.push(b.submap));var e=new L.layerGroup;e.addLayer(P.drawSpots(b.interactions,{color:"gold"})),e.addLayer(L.marker(M.convertGCtoLC(b.finish),{icon:M.createStandardIcon("img/map/chest.png")})),P.LayerArray.Guild_Puzzle.push(e);var f=$("#gldPuzzle_"+a);f.click(function(){var a=U.getSubintegerFromHTMLID($(this)),b=P.Guild.Puzzle.data[a].submap,c=I.toggleHighlight($(this));void 0!==b&&M.toggleSubmap(b,c),M.toggleLayer(P.LayerArray.Guild_Puzzle[a])}),M.bindMapLinkBehavior(f,M.ZoomEnum.Ground,M.Pin.Program)}finalizeGuildBook("Puzzle")}),$("#gldInfluence input").click(function(){$(this).select()}),$("#gldInfluenceToCoinInput").on("input",function(){$("#gldInfluenceToCoinOutput").val(E.createCoinString($(this).val()*E.Exchange.COPPER_PER_INFLUENCE))}),$("#gldCoinToInfluenceInput").on("input",function(){$("#gldCoinToInfluenceOutput").val(E.parseCoinString($(this).val())*E.Exchange.INFLUENCE_PER_COPPER)}),I.ArticleCurrent)for(a in P.Guild)if(I.ArticleCurrent.toLowerCase()===a.toLowerCase()){$("#gldButton_"+a).trigger("click"),I.ArticleCurrent=null;break}})}},W={MapEnum:"wvw",cInitialZone:"eternal",cMAP_BOUND:16384,cMAP_CENTER:[10400,12400],cMAP_CENTER_INITIAL:[-193.75,162.5],cMAP_CENTER_ACTUAL:[8192,8192],ZoomEnum:{Same:-1,Min:0,Default:3,Space:3,Sky:4,Bird:5,Ground:6,Max:6},ServerRegionThreshold:{Range:99,Americas:1e3,Europe:2e3,France:2100,Germany:2200,Spain:2300},Layer:{PersonalPin:new L.layerGroup,PersonalPath:new L.layerGroup,ZoneRectangle:new L.layerGroup,Pin:new L.layerGroup},LayerArray:{},Pin:{Program:{},Event:{},Over:{},Character:{},Camera:{}},initializeWvW:function(){
$.extend(W,$.extend({},M,W)),W.Zones=GW2T_LAND_DATA,W.ZoneAssociation=GW2T_LAND_ASSOCIATION,W.Regions=GW2T_REALM_DATA,W.initializeMap()}},T={DashboardAnnouncement:GW2T_DASHBOARD_DATA.Announcement,DashboardCountdown:GW2T_DASHBOARD_DATA.Countdowns,DashboardStory:GW2T_DASHBOARD_DATA.Story,DashboardSale:GW2T_DASHBOARD_DATA.Sale,isDashboardEnabled:!0,isDashboardAnnouncementEnabled:!1,isDashboardCountdownEnabled:!1,isDashboardCountdownTickEnabled:!1,isDashboardStoryEnabled:!1,isDashboardSaleEnabled:!1,DailyCalendar:GW2T_DAILY_CALENDAR,DST_IN_EFFECT:0,SECONDS_TILL_RESET:0,TIMESTAMP_UNIX_SECONDS:0,cUTC_OFFSET_USER:0,cUTC_OFFSET_SERVER:-8,cUTC_OFFSET_HAWAII:-10,cUTC_OFFSET_EASTERN:-4,cMILLISECONDS_IN_SECOND:1e3,cMILLISECONDS_IN_MINUTE:6e4,cSECONDS_IN_MINUTE:60,cSECONDS_IN_HOUR:3600,cSECONDS_IN_DAY:86400,cSECONDS_IN_WEEK:604800,cMINUTES_IN_HOUR:60,cMINUTES_IN_DAY:1440,cHOURS_IN_MERIDIEM:12,cHOURS_IN_DAY:24,cDAYS_IN_WEEK:7,cSECONDS_IN_TIMEFRAME:900,cMINUTES_IN_TIMEFRAME:15,cMINUTES_IN_DRYTOPFRAME:5,cNUM_TIMEFRAMES_IN_HOUR:4,cSECS_MARK_0:0,cSECS_MARK_1:900,cSECS_MARK_2:1800,cSECS_MARK_3:2700,cSECS_MARK_4:3599,cBASE_10:10,cPERCENT_100:100,DAILY_START_UNIX:1418774400,DAYS_SINCE_DAILY_START:0,cDAYTIME_DAY_MINUTES:80,cDAYTIME_NIGHT_MINUTES:40,cDAYTIME_DAY_START:25,cDAYTIME_NIGHT_START:45,ReferenceEnum:{UTC:0,Local:1,Server:2},UnitEnum:{Milliseconds:0,Seconds:1,Minutes:2,Hours:3},DayEnum:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},loginTrackOfficial:0,secondsTillResetWeekly:-1,isCountdownToResetStarted:!1,DryTopSets:{},DryTopCodes:{},Schedule:{},getCurrentDryTopEvents:function(a){return T.DryTopCodes[T.getDryTopMinute(a)].chat+I.siteTagCurrent},getCurrentDryTopColor:function(a){return T.DryTopCodes[T.getDryTopMinute(a)].color},getDryTopMinute:function(a){a=a||0;var b=new Date,c=b.getUTCMinutes(),d=~~(c/T.cMINUTES_IN_DRYTOPFRAME)*T.cMINUTES_IN_DRYTOPFRAME+a*T.cMINUTES_IN_DRYTOPFRAME;return d=T.wrapInteger(d,T.cMINUTES_IN_HOUR),d<T.cBASE_10&&(d="0"+d),d},initializeDryTopStrings:function(){getDryTopSet=function(a){var b=T.DryTopSets[a],c="";for(var d in b)c+=D.getObjectName(b[d])+"@"+b[d].wp+" ";return c.trim()},T.DryTopSets=[[C.DryTop.Victims,C.DryTop.Crystals,C.DryTop.Supplies,C.DryTop.Rustbucket,C.DryTop.Shaman,C.DryTop.TendrilW,C.DryTop.TendrilSE,C.DryTop.Tootsie],[C.DryTop.MineE,C.DryTop.Serene,C.DryTop.Insects,C.DryTop.Bridge,C.DryTop.Experiment,C.DryTop.Golem,C.DryTop.Nochtli,C.DryTop.Colocal],[C.DryTop.MineNE,C.DryTop.Basket,C.DryTop.Suit,C.DryTop.Leyline,C.DryTop.Town],[C.DryTop.Mites,C.DryTop.Haze,C.DryTop.Eway,C.DryTop.Skritts0,C.DryTop.Skritts1,C.DryTop.Skritts2,C.DryTop.Skritts3,C.DryTop.Explosives,C.DryTop.Giant],[C.DryTop.Devourer],[C.DryTop.Mites,C.DryTop.Haze,C.DryTop.Twister,C.DryTop.Chriikkt,C.DryTop.Eway,C.DryTop.Skritts0,C.DryTop.Skritts1,C.DryTop.Skritts2,C.DryTop.Skritts3,C.DryTop.Chickenado],[C.DryTop.Beetle,C.DryTop.Monster]],T.DryTopCodes={"00":{chat:":00 "+getDryTopSet(0),color:"red"},"05":{chat:":05 "+getDryTopSet(1),color:"orange"},10:{chat:":10 "+getDryTopSet(2),color:"yellow"},15:{chat:":15 "+getDryTopSet(0),color:"red"},20:{chat:":20 "+getDryTopSet(1),color:"orange"},25:{chat:":25 "+getDryTopSet(2),color:"yellow"},30:{chat:":30 "+getDryTopSet(0),color:"red"},35:{chat:":35 "+getDryTopSet(1),color:"orange"},40:{chat:":40 "+getDryTopSet(3),color:"lime"},45:{chat:":45 "+getDryTopSet(4),color:"limegreen"},50:{chat:":50 "+getDryTopSet(5),color:"dodgerblue"},55:{chat:":55 "+getDryTopSet(6),color:"orchid"}},K.updateDryTopClipboard(),$("#itemDryTopClip").show()},ChainAssociation:{fe:0,golem:1,jormag:2,maw:3,megades:4,sb:5,shatterer:6,taidha:7,ulgoth:8,wurm:9,queen:10,tequatl:11,triple:12},insertChainToSchedule:function(a,b){for(var c in b){var d=T.parseChainTime(b[c]);T.Schedule[d].c.unshift(a)}},initializeSchedule:function(){C.FE=C.Chains[0],C.Golem=C.Chains[1],C.Jormag=C.Chains[2],C.Maw=C.Chains[3],C.Megades=C.Chains[4],C.SB=C.Chains[5],C.Shatterer=C.Chains[6],C.Taidha=C.Chains[7],C.Ulgoth=C.Chains[8],C.Wurm=C.Chains[9],C.Queen=C.Chains[10],C.Tequatl=C.Chains[11],C.Triple=C.Chains[12],C.DryTop0=C.Chains[13],C.DryTop1=C.Chains[14],C.DryTop2=C.Chains[15],C.DryTop3=C.Chains[16],T.Schedule={0:{t:"00:00",c:[C.Taidha,C.Tequatl]},15:{t:"00:15",c:[C.Maw]},30:{t:"00:30",c:[C.Megades]},45:{t:"00:45",c:[C.FE]},60:{t:"01:00",c:[C.Shatterer,C.Triple]},75:{t:"01:15",c:[C.Wurm]},90:{t:"01:30",c:[C.Ulgoth]},105:{t:"01:45",c:[C.SB]},120:{t:"02:00",c:[C.Golem,C.Queen]},135:{t:"02:15",c:[C.Maw]},150:{t:"02:30",c:[C.Jormag]},165:{t:"02:45",c:[C.FE]},180:{t:"03:00",c:[C.Taidha,C.Tequatl]},195:{t:"03:15",c:[C.Wurm]},210:{t:"03:30",c:[C.Megades]},225:{t:"03:45",c:[C.SB]},240:{t:"04:00",c:[C.Shatterer,C.Triple]},255:{t:"04:15",c:[C.Maw]},270:{t:"04:30",c:[C.Ulgoth]},285:{t:"04:45",c:[C.FE]},300:{t:"05:00",c:[C.Golem]},315:{t:"05:15",c:[C.Wurm]},330:{t:"05:30",c:[C.Jormag]},345:{t:"05:45",c:[C.SB]},360:{t:"06:00",c:[C.Taidha,C.Queen]},375:{t:"06:15",c:[C.Maw]},390:{t:"06:30",c:[C.Megades]},405:{t:"06:45",c:[C.FE]},420:{t:"07:00",c:[C.Shatterer,C.Tequatl]},435:{t:"07:15",c:[C.Wurm]},450:{t:"07:30",c:[C.Ulgoth]},465:{t:"07:45",c:[C.SB]},480:{t:"08:00",c:[C.Golem,C.Triple]},495:{t:"08:15",c:[C.Maw]},510:{t:"08:30",c:[C.Jormag]},525:{t:"08:45",c:[C.FE]},540:{t:"09:00",c:[C.Taidha]},555:{t:"09:15",c:[C.Wurm]},570:{t:"09:30",c:[C.Megades]},585:{t:"09:45",c:[C.SB]},600:{t:"10:00",c:[C.Shatterer]},615:{t:"10:15",c:[C.Maw]},630:{t:"10:30",c:[C.Ulgoth,C.Queen]},645:{t:"10:45",c:[C.FE]},660:{t:"11:00",c:[C.Golem]},675:{t:"11:15",c:[C.Wurm]},690:{t:"11:30",c:[C.Jormag,C.Tequatl]},705:{t:"11:45",c:[C.SB]},720:{t:"12:00",c:[C.Taidha]},735:{t:"12:15",c:[C.Maw]},750:{t:"12:30",c:[C.Megades,C.Triple]},765:{t:"12:45",c:[C.FE]},780:{t:"13:00",c:[C.Shatterer]},795:{t:"13:15",c:[C.Wurm]},810:{t:"13:30",c:[C.Ulgoth]},825:{t:"13:45",c:[C.SB]},840:{t:"14:00",c:[C.Golem]},855:{t:"14:15",c:[C.Maw]},870:{t:"14:30",c:[C.Jormag]},885:{t:"14:45",c:[C.FE]},900:{t:"15:00",c:[C.Taidha,C.Queen]},915:{t:"15:15",c:[C.Wurm]},930:{t:"15:30",c:[C.Megades]},945:{t:"15:45",c:[C.SB]},960:{t:"16:00",c:[C.Shatterer,C.Tequatl]},975:{t:"16:15",c:[C.Maw]},990:{t:"16:30",c:[C.Ulgoth]},1005:{t:"16:45",c:[C.FE]},1020:{t:"17:00",c:[C.Golem,C.Triple]},1035:{t:"17:15",c:[C.Wurm]},1050:{t:"17:30",c:[C.Jormag]},1065:{t:"17:45",c:[C.SB]},1080:{t:"18:00",c:[C.Taidha,C.Queen]},1095:{t:"18:15",c:[C.Maw]},1110:{t:"18:30",c:[C.Megades]},1125:{t:"18:45",c:[C.FE]},1140:{t:"19:00",c:[C.Shatterer,C.Tequatl]},1155:{t:"19:15",c:[C.Wurm]},1170:{t:"19:30",c:[C.Ulgoth]},1185:{t:"19:45",c:[C.SB]},1200:{t:"20:00",c:[C.Golem,C.Triple]},1215:{t:"20:15",c:[C.Maw]},1230:{t:"20:30",c:[C.Jormag]},1245:{t:"20:45",c:[C.FE]},1260:{t:"21:00",c:[C.Taidha]},1275:{t:"21:15",c:[C.Wurm]},1290:{t:"21:30",c:[C.Megades]},1305:{t:"21:45",c:[C.SB]},1320:{t:"22:00",c:[C.Shatterer]},1335:{t:"22:15",c:[C.Maw]},1350:{t:"22:30",c:[C.Ulgoth]},1365:{t:"22:45",c:[C.FE]},1380:{t:"23:00",c:[C.Golem,C.Queen]},1395:{t:"23:15",c:[C.Wurm]},1410:{t:"23:30",c:[C.Jormag]},1425:{t:"23:45",c:[C.SB]}};var a,b,c,e,d=0;for(a in T.Schedule)T.Schedule[a].c.push(C["DryTop"+d]),d++,d>T.cNUM_TIMEFRAMES_IN_HOUR-1&&(d=0);T.DashboardStory.isEnabled&&T.isTimely(T.DashboardStory,new Date)&&(T.isDashboardStoryEnabled=!0),C.ScheduledChains=new Array,C.initializeAllChains();for(a in T.Schedule){T.Schedule[a].t=T.parseChainTime(T.Schedule[a].t),e=T.Schedule[a];for(b in C.ScheduledChains)for(c in e.c)if(C.ScheduledChains[b].nexus===e.c[c].nexus){C.ScheduledChains[b].scheduleKeys.push(a);break}}C.CurrentChainSD=T.getStandardChain()},getScheduleSlotTime:function(a){return T.Schedule[a].t},getScheduleSlotChainsByKey:function(a){return T.Schedule[a].c},getCurrentTimeframe:function(){var a=T.getTimeSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Minutes);return a-a%T.cMINUTES_IN_TIMEFRAME},getTimeframe:function(a){a=a||0;var b=T.getCurrentTimeframe()+a*T.cMINUTES_IN_TIMEFRAME;return T.wrapInteger(b,T.cMINUTES_IN_DAY)},getTimeframeChains:function(a){return T.Schedule[T.getTimeframe(a)].c},getTimeframeChainBySeries:function(a,b){var c,d=T.getTimeframeChains(a);for(c in d)if(d[c].series===b)return d[c];return null},getStandardChain:function(a){return T.getTimeframeChainBySeries(a,C.ChainSeriesEnum.Standard)},getHardcoreChain:function(a){return T.getTimeframeChainBySeries(a,C.ChainSeriesEnum.Hardcore)},getLivingStoryChain:function(a){return T.getTimeframeChainBySeries(a,C.ChainSeriesEnum.LivingStory)},getTimeframeKey:function(a){return T.getTimeframe(a).toString()},convertScheduleKeyToLocalSeconds:function(a){var b=T.getScheduleSlotTime(a)*T.cSECONDS_IN_MINUTE-(new Date).getTimezoneOffset()*T.cSECONDS_IN_MINUTE;return b=T.wrapInteger(b,T.cSECONDS_IN_DAY)},convertScheduleKeyToUTCMinutes:function(a){return parseInt(a)},getCurrentTimeframeElapsedTime:function(a){var b=new Date,c=b.getUTCMinutes(),d=b.getUTCSeconds();return a===T.UnitEnum.Minutes?c%T.cMINUTES_IN_TIMEFRAME:c%T.cMINUTES_IN_TIMEFRAME*T.cSECONDS_IN_MINUTE+d},getSecondsUntilChainStarts:function(a){var b=T.convertScheduleKeyToLocalSeconds(a.scheduleKeys[0]),c=T.getTimeSinceMidnight(T.ReferenceEnum.Local,T.UnitEnum.Seconds),d=T.cSECONDS_IN_TIMEFRAME*T.cNUM_TIMEFRAMES_IN_HOUR;return b>=T.cSECONDS_IN_DAY-d&&d>=c?T.cSECONDS_IN_DAY-b+c:c>=T.cSECONDS_IN_DAY-d&&d>=b?T.cSECONDS_IN_DAY-c+b:b-c},getTimeTillChainFormatted:function(a,b){var c=T.getSecondsUntilChainStarts(a),d=~~(c/T.cSECONDS_IN_MINUTE)%T.cSECONDS_IN_MINUTE,e=~~(c/T.cSECONDS_IN_HOUR),f=D.getTranslation("m"),g=D.getTranslation("h");return"speech"===b&&(f=" "+D.getSpeech("minute"),g=" "+D.getSpeech("hour"),Math.abs(d)>1&&(f=" "+D.getSpeech("minutes")),Math.abs(e)>1&&(g=" "+D.getSpeech("hours")),0===e&&30===Math.abs(d)&&(d=D.getTranslation("half an hour"),f="",g="")),g+=" ",d+=f,Math.abs(c)>=T.cSECONDS_IN_HOUR?e+=g:e="",0>c?" "+e+d+" "+D.getTranslation("ago"):" "+D.getTranslation("in")+" "+e+d},getRandomIntRange:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},wrapInteger:function(a,b){var c=a;return c%=b,0>c&&(c=b+c),c},stepFunction:function(a,b,c,d,e){var f=~~(a/d)*e+b;return f>c?c:f},parseEventTime:function(a){var b=new Array;return-1!==a.indexOf("~")?(b=a.split("~"),T.parseEventTime(b[0])+~~(T.parseEventTime(b[1])/2)):"*"===a?0:-1===a.indexOf(":")?parseInt(a,T.cBASE_10):(b=a.split(":"),2===b.length?parseInt(b[0],T.cBASE_10)*T.cSECONDS_IN_MINUTE+parseInt(b[1],T.cBASE_10):3===b.length?parseInt(b[0])*T.cSECONDS_IN_HOUR+parseInt(b[1],T.cBASE_10)*T.cSECONDS_IN_MINUTE+parseInt(b[2],T.cBASE_10):NaN)},parseChainTime:function(a){var b=a.split(":");return parseInt(b[0],T.cBASE_10)*T.cMINUTES_IN_HOUR+parseInt(b[1],T.cBASE_10)},checkDST:function(){Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var a=new Date;T.DST_IN_EFFECT=a.dst()&&O.Options.bol_detectDST?1:0},getTimeFormatted:function(a){a=a||{},void 0===a.reference&&(a.reference=T.ReferenceEnum.Local),void 0===a.want24&&(a.want24=O.Options.bol_use24Hour),void 0===a.wantSeconds&&(a.wantSeconds=!0),void 0===a.wantHours&&(a.wantHours=!0),void 0===a.wantLetters&&(a.wantLetters=!1);var b,c,d,e=new Date;if(void 0===a.customTimeInSeconds)switch(a.reference){case T.ReferenceEnum.Local:b=e.getSeconds(),c=e.getMinutes(),d=e.getHours();break;case T.ReferenceEnum.Server:b=e.getSeconds(),c=e.getMinutes(),d=e.getUTCHours()+T.cUTC_OFFSET_SERVER+T.DST_IN_EFFECT,d=T.wrapInteger(d,T.cHOURS_IN_DAY);break;case T.ReferenceEnum.UTC:b=e.getUTCSeconds(),c=e.getUTCMinutes(),d=e.getUTCHours()}else a.customTimeInSeconds=T.wrapInteger(a.customTimeInSeconds,T.cSECONDS_IN_DAY),b=a.customTimeInSeconds%T.cSECONDS_IN_MINUTE,c=~~(a.customTimeInSeconds/T.cSECONDS_IN_MINUTE)%T.cMINUTES_IN_HOUR,d=~~(a.customTimeInSeconds/T.cSECONDS_IN_HOUR);var f="";if(f=a.wantSeconds?a.wantLetters?0===d&&0===c?b+D.getWord("s"):c+D.getWord("m")+" "+b+D.getWord("s"):a.wantHours===!1?c+":"+(b<T.cBASE_10?"0"+b:b):(c<T.cBASE_10?"0"+c:c)+":"+(b<T.cBASE_10?"0"+b:b):a.wantLetters?c+D.getWord("m"):c<T.cBASE_10?"0"+c:c,a.wantLetters)return 0===d||a.wantHours===!1?f:d+D.getWord("h")+" "+f;if(a.want24)return a.wantHours===!1?f:(d<T.cBASE_10?"0"+d:d)+":"+f;var g=" AM";return d>=T.cHOURS_IN_MERIDIEM?(d>T.cHOURS_IN_MERIDIEM&&(d%=T.cHOURS_IN_MERIDIEM),g=" PM"):0===d&&(d=T.cHOURS_IN_MERIDIEM),d+":"+f+g},formatMilliseconds:function(a,b){var e,f,g,h,c=~~(a/T.cMILLISECONDS_IN_SECOND),d=~~(a%T.cMILLISECONDS_IN_SECOND/T.cBASE_10),i="",j="",k="",l="",m="",n="";return 0>c&&(c=-1*c,n="\u2212"),c>=T.cSECONDS_IN_DAY&&(e=~~(c/T.cSECONDS_IN_DAY),i=e+"::"),c>=T.cSECONDS_IN_HOUR&&(f=~~(c/T.cSECONDS_IN_HOUR)%T.cHOURS_IN_DAY,j=f+":",""!==i&&f<T.cBASE_10&&(j="0"+j)),c>=T.cSECONDS_IN_MINUTE?(g=~~(c/T.cSECONDS_IN_MINUTE)%T.cMINUTES_IN_HOUR,k=g+":",""!==j&&g<T.cBASE_10&&(k="0"+k)):k="0:",h=c%T.cSECONDS_IN_MINUTE,l=h.toString(),h<T.cBASE_10&&(l="0"+l),b&&(m="."+d,d<T.cBASE_10&&(m=".0"+d)),n+i+j+k+l+m},formatSeconds:function(a,b){var d,e,f,g,h,c=a,i="",j="",k="",l="",m="",n="";return 0>c&&(c=-1*c,n="\u2212"),c>=T.cSECONDS_IN_WEEK&&(d=~~(c/T.cSECONDS_IN_WEEK),i=d+D.getWord("w")+" "),c>=T.cSECONDS_IN_DAY&&(e=~~(c/T.cSECONDS_IN_DAY)%T.cDAYS_IN_WEEK,j=e+D.getWord("d")+" "),c>=T.cSECONDS_IN_HOUR&&(f=~~(c/T.cSECONDS_IN_HOUR)%T.cHOURS_IN_DAY,k=f+D.getWord("h")+" "),c>=T.cSECONDS_IN_MINUTE&&(g=~~(c/T.cSECONDS_IN_MINUTE)%T.cMINUTES_IN_HOUR,l=g+D.getWord("m")+" "),b&&(h=c%T.cSECONDS_IN_MINUTE,m=h.toString()+D.getWord("s")),n+i+j+k+l+m},isTimely:function(a,b){return b>=a.Start&&b<=a.Finish?!0:!1},isDaylight:function(){var a=new Date,b=a.getUTCHours(),c=a.getUTCMinutes();if(b%2===0){if(c>=T.cDAYTIME_DAY_START)return!0}else if(c<T.cDAYTIME_NIGHT_START)return!0;return!1},getDayPeriodRemaining:function(){var a=new Date,b=a.getUTCHours(),c=a.getUTCMinutes(),d="";return d=b%2===0?c>=T.cDAYTIME_DAY_START?T.cDAYTIME_DAY_START+T.cDAYTIME_DAY_MINUTES-c:T.cDAYTIME_DAY_START-c:c<T.cDAYTIME_NIGHT_START?T.cDAYTIME_NIGHT_START-c:T.cDAYTIME_NIGHT_START+T.cDAYTIME_NIGHT_MINUTES-c,d+D.getWord("m")},getUTCMidnight:function(){return(new Date).setUTCHours(0,0,0,0)},getTimeSinceMidnight:function(a,b){b=b||T.UnitEnum.Seconds,a=a||T.ReferenceEnum.UTC;var c=new Date,d=c.getUTCHours(),e=c.getUTCMinutes(),f=c.getUTCSeconds();switch(a){case T.ReferenceEnum.Server:d=d+T.cUTC_OFFSET_SERVER+T.DST_IN_EFFECT;break;case T.ReferenceEnum.UTC:break;case T.ReferenceEnum.Local:d=c.getHours(),e=c.getMinutes(),f=c.getSeconds()}return d=T.wrapInteger(d,T.cHOURS_IN_DAY),b===T.UnitEnum.Hours?d:b===T.UnitEnum.Minutes?d*T.cMINUTES_IN_HOUR+e:d*T.cSECONDS_IN_HOUR+e*T.cSECONDS_IN_MINUTE+f},getUNIXSeconds:function(){return~~((new Date).getTime()/T.cMILLISECONDS_IN_SECOND)},addDaysToDate:function(a,b){var c=new Date(a);return c.setDate(a.getDate()+b),c},getSecondsTillWeekday:function(a,b){void 0===b&&(b=0);var c=new Date,d=T.getTimeSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Seconds),e=T.cSECONDS_IN_DAY-d,f=c.getUTCDay(),g=0;return a>f?(g=(a-f-1)*T.cSECONDS_IN_DAY,e+g+b):f>a?(g=(T.cDAYS_IN_WEEK-1-f+a)*T.cSECONDS_IN_DAY,e+g+b):b>=d?b-d:T.cSECONDS_IN_WEEK-(d-b)},updateCountdownToReset:function(){T.secondsTillResetWeekly<0&&(T.secondsTillResetWeekly=T.getSecondsTillWeekday(T.DayEnum.Sunday)),$("#chlCountdownToReset").text(T.formatSeconds(T.secondsTillResetWeekly,!0)),T.secondsTillResetWeekly--},initializeDashboard:function(){var a=new Date;for(var b in T.DashboardCountdown)if(a<T.DashboardCountdown[b].Finish){T.isDashboardCountdownEnabled=!0;break}if(T.DashboardAnnouncement.length>0&&(U.convertExternalLink($("#dsbAnnouncement").html(T.DashboardAnnouncement).find("a")),M.bindMapLinks("#dsbAnnouncement"),T.isDashboardAnnouncementEnabled=!0),T.DashboardSale.Items.length>0&&T.isTimely(T.DashboardSale,a)&&(T.isDashboardSaleEnabled=!0),T.isDashboardCountdownEnabled===!1&&T.isDashboardAnnouncementEnabled===!1&&T.isDashboardSaleEnabled===!1||T.isDashboardEnabled===!1||I.isMapEnabled===!1||O.Options.bol_showDashboard===!1)return void(T.isDashboardEnabled=!1);if(T.isDashboardCountdownTickEnabled=!0,$("#dsbClose").click(function(){T.toggleDashboard(!1),T.isDashboardEnabled=!1}),T.isDashboardCountdownEnabled){T.toggleDashboard(!0);var e,f,g,c=D.getNameKey(),d=D.getURLKey();for(var b in T.DashboardCountdown)e=T.DashboardCountdown[b],e.isTimely=!0,e.StartStamp=e.Start.toLocaleString(),e.FinishStamp=e.Finish.toLocaleString(),f=void 0===e.name?e[c]:e.name,g=void 0===e.news?e[d]:U.getGW2NewsLink(e.news),g=void 0===g?e.url:g,-1!==g.indexOf(I.cSiteURL)?e.Anchor="<a href='"+g+"'>"+f+"</a>":e.Anchor="<a href='"+U.convertExternalURL(g)+"' target='_blank'>"+f+"</a>",$("#dsbCountdown").append("<div id='dsbCountdown_"+b+"' class='dsbCountdownEntry'><code>\u25a0</code>"+e.Anchor+" <time id='dsbCountdownTime_"+b+"'></time> <var></var> <samp></samp></div>");T.refreshDashboard(a)}T.isDashboardStoryEnabled&&($("#dsbStory").before("<div id='dsbStoryTitle'>"+D.getObjectName(T.DashboardStory)+"</div>").show(),I.initializeScrollbar($("#dsbStory"))),T.isDashboardSaleEnabled&&($("#dsbSale").append("<div id='dsbSaleHeader' class='curToggle'><img src='img/ui/gemstore.png' /> <u>"+(void 0===T.DashboardSale.Items[0].isExample?T.DashboardSale.Items.length:T.DashboardSale.Items.length-1)+" "+D.getTranslation("Gem Store Promotions")+"</u> (<span class='dsbSalePriceNew'>"+T.DashboardSale.range+"<ins class='s16 s16_gem'></ins></span>)<img src='img/ui/toggle.png' />\u21d3@ "+T.DashboardSale.Finish.toLocaleString()+"</div><div id='dsbSaleTable'></div>"),$("#dsbSaleHeader").click(function(){T.generateDashboardSale()}),T.DashboardSale.isPreshown===!0&&T.generateDashboardSale())},generateDashboardSale:function(){var a=200;$("#dsbSaleTable").is(":empty")===!1?$("#dsbSaleTable").animate({height:0},a,function(){$(this).css({height:"auto"}).empty()}):($("#dsbSaleTable").append(I.cThrobber),E.updateCoinInGem().always(function(){if($("#dsbSaleTable").empty().append("<div id='dsbSaleCol0'></div><div id='dsbSaleCol1'></div>"),0!==E.Exchange.CoinInGem)for(var b in T.DashboardSale.Items){var c=T.DashboardSale.Items[b],d=c.quantity>1?c.quantity+"/ ":"",e=c.pricenew<c.priceold?c.priceold:"",f=void 0!==c.col?c.col:parseInt(b)%2;$("#dsbSaleCol"+f).append("<div class='dsbSaleEntry'><a href='"+U.convertExternalURL(c.url)+"' target='_blank'><img class='dsbSaleIcon' src='"+c.img+"' /></a> <span class='dsbSalePriceOld'><del>"+d+e+"</del></span> <span class='dsbSalePriceNew'>"+d+c.pricenew+"<ins class='s16 s16_gem'></ins></span><span class='dsbSalePriceCoin'> \u2248 "+E.createCoinString(Math.round(c.pricenew*E.Exchange.CoinInGem),!0)+"</span><span class='dsbSalePriceMoney'> = "+E.convertGemToMoney(c.pricenew)+"<ins class='s16 s16_money'></ins></span></div>")}var g=$("#dsbSaleTable").height();$("#dsbSaleTable").css({height:0}).animate({height:g},a,function(){$(this).css({height:"auto"})})}))},updateDashboardCountdown:function(a){for(var b in T.DashboardCountdown){var c=T.DashboardCountdown[b];if(c.isTimely){var d=T.formatSeconds(~~((c.DesiredTime.getTime()-a.getTime())/T.cMILLISECONDS_IN_SECOND),!0);document.getElementById("dsbCountdownTime_"+b).innerHTML=d}}},refreshDashboard:function(a){for(var b in T.DashboardCountdown){var c=T.DashboardCountdown[b];if(c.isTimely){var e,f,g,d=$("#dsbCountdown_"+b);a<c.Start?(c.DesiredTime=c.Start,e="dsbCountdownDormant",f="\u21d1@",g=c.StartStamp):a<c.Finish?(c.DesiredTime=c.Finish,e="dsbCountdownActive",f="\u21d3@",g=c.FinishStamp):(c.isTimely=!1,d.remove()),c.isTimely&&(d.find("code").removeClass().addClass(e),d.find("var").text(f),d.find("samp").text(g))}}T.isTimely(T.DashboardStory,a)===!1&&(T.isDashboardStoryEnabled=!1,$("#dsbStory").hide()),T.isTimely(T.DashboardSale,a)===!1&&(T.isDashboardSaleEnabled=!1,$("#dsbSale").hide())},toggleDashboard:function(a){T.isDashboardEnabled&&(T.isDashboardCountdownTickEnabled=a,a?$("#itemDashboard").show().css({opacity:0}).animate({opacity:1},200):$("#itemDashboard").hide())}},K={tickerFrequency:250,tickerSecondPrevious:null,awakeTimestampPrevious:0,awakeTimestampTolerance:5,currentFrameOffsetMinutes:0,currentPredictionColor:"",iconOpacityChecked:.4,iconOpacitySpeed:200,oldQuadrantAngle:0,cDEGREES_IN_CIRCLE:360,cDEGREES_IN_QUADRANT:90,handSecond:{},handMinute:{},handHour:{},clockBackground:{},clockCircumference:{},timeProgress:{},timeDaylight:{},timeLocal:{},timeDaytime:{},timeBoard:{},timestampUTC:{},timestampLocal:{},timestampServer:{},timestampReset:{},WpChain0:{},WpChain1:{},WpChain2:{},WpChain3:{},IconSD0:{},IconSD1:{},IconSD2:{},IconSD3:{},IconHC0:{},IconHC1:{},IconHC2:{},IconHC3:{},IconsStandard:new Array,IconsHardcore:new Array,wpClipboards:[],lsClipboards:[],cZeroClipboardDataAttribute:"data-clipboard-text",cZeroClipboardSuccessText:"Chat link copied to clipboard :)<br />",TickerTimeout:{},initializeClock:function(){K.handSecond=$("#clkSecondHand")[0],K.handMinute=$("#clkMinuteHand")[0],K.handHour=$("#clkHourHand")[0],K.clockBackground=$("#paneClockBackground")[0],K.clockCircumference=$("#clkCircumference")[0],K.timeProgress=$("#chnProgress")[0],K.timeLocal=$("#itemTimeLocalActual")[0],K.timeDaytime=$("#itemTimeDayTime")[0],K.timeBoard=$("#itemBoardTime")[0],K.timestampUTC=$("#optTimestampUTC")[0],K.timestampLocal=$("#optTimestampLocalReset")[0],K.timestampServer=$("#optTimestampServerReset")[0],K.timestampReset=$("#optTimeTillReset")[0],T.initializeDashboard(),K.updateTimeFrame(new Date),K.updateDaytimeIcon(),K.tickFrequent(),K.updateDigitalClockMinutely(),K.initializeClipboard(),$("#itemTimeLocalActual").click(function(){$("#opt_bol_use24Hour").trigger("click")})},setClock:function(){var a=200,b=0;switch(O.Options.int_setClock){case O.IntEnum.Clock.Compact:$("#paneClock").show(),$("#itemTimeLocal, #itemTimeDaytime, #itemLanguage, #itemSocial").show(),I.bulkAnimate([{s:"#clock",p:{top:"0px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"-70px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#clkIconSD0",p:{top:"4px",left:"290px"}},{s:"#clkIconSD1",p:{top:"148px",left:"290px"}},{s:"#clkIconSD2",p:{top:"148px",left:"4px"}},{s:"#clkIconSD3",p:{top:"4px",left:"4px"}},{s:"#clkIconHC0",p:{top:"52px",left:"306px"}},{s:"#clkIconHC1",p:{top:"132px",left:"306px"}},{s:"#clkIconHC2",p:{top:"132px",left:"20px"}},{s:"#clkIconHC3",p:{top:"52px",left:"20px"}},{s:"#clkWaypoint0",p:{top:"24px",left:"274px"}},{s:"#clkWaypoint1",p:{top:"164px",left:"274px"}},{s:"#clkWaypoint2",p:{top:"164px",left:"52px"}},{s:"#clkWaypoint3",p:{top:"24px",left:"52px"}}],a),$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"}),$("#itemTimeLocal").css({width:"100%",right:"auto",bottom:"90px","text-align":"center",color:"#eee",opacity:.5}),$("#itemTimeDaytime").css({width:"100%",top:"90px",bottom:"auto",left:"auto","text-align":"center",color:"#eee",opacity:.5}),$("#itemLanguage").css({bottom:"72px",left:"10px"}),$("#itemSocial").css({bottom:"100px",right:"10px"}),b=I.cPANE_CLOCK_HEIGHT_COMPACT;break;case O.IntEnum.Clock.Full:$("#paneClock").show(),$("#itemTimeLocal, #itemTimeDaytime, #itemLanguage, #itemSocial").show(),I.bulkAnimate([{s:"#clock",p:{top:"70px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"0px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"12px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"12px"}},{s:"#clkIconSD0",p:{top:"4px",left:"148px"}},{s:"#clkIconSD1",p:{top:"148px",left:"290px"}},{s:"#clkIconSD2",p:{top:"290px",left:"148px"}},{s:"#clkIconSD3",p:{top:"148px",left:"4px"}},{s:"#clkIconHC0",p:{top:"12px",left:"212px"}},{s:"#clkIconHC1",p:{top:"212px",left:"298px"}},{s:"#clkIconHC2",p:{top:"298px",left:"100px"}},{s:"#clkIconHC3",p:{top:"100px",left:"12px"}},{s:"#clkWaypoint0",p:{top:"52px",left:"164px"}},{s:"#clkWaypoint1",p:{top:"164px",left:"274px"}},{s:"#clkWaypoint2",p:{top:"274px",left:"164px"}},{s:"#clkWaypoint3",p:{top:"164px",left:"52px"}}],a),$("#paneClockIcons .iconHC").css({width:"48px",height:"48px"}),$("#itemTimeLocal").css({width:"auto",right:"10px",bottom:"10px","text-align":"left",color:"#bbcc77",opacity:1}),$("#itemTimeDaytime").css({width:"auto",top:"auto",bottom:"10px",left:"10px","text-align":"left",color:"#bbcc77",opacity:1}),$("#itemLanguage").css({bottom:"0px",left:"10px"}),$("#itemSocial").css({bottom:"28px",right:"10px"}),b=I.cPANE_CLOCK_HEIGHT;break;case O.IntEnum.Clock.Bar:$("#paneClock").show(),$("#itemTimeLocal, #itemTimeDaytime, #itemLanguage, #itemSocial").hide(),I.bulkAnimate([{s:"#clock",p:{top:"0px",left:"0px",width:"85px",height:"85px"}},{s:"#paneClockFace",p:{width:"132px",height:"132px",top:"-24px",left:"-24px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#clkIconSD0",p:{top:"0px",left:"82px"}},{s:"#clkIconSD1",p:{top:"0px",left:"152px"}},{s:"#clkIconSD2",p:{top:"0px",left:"222px"}},{s:"#clkIconSD3",p:{top:"0px",left:"292px"}},{s:"#clkIconHC0",p:{top:"48px",left:"98px"}},{s:"#clkIconHC1",p:{top:"48px",left:"168px"}},{s:"#clkIconHC2",p:{top:"48px",left:"238px"}},{s:"#clkIconHC3",p:{top:"48px",left:"308px"}},{s:"#clkWaypoint0",p:{top:"-8px",left:"98px"}},{s:"#clkWaypoint1",p:{top:"-8px",left:"168px"}},{s:"#clkWaypoint2",p:{top:"-8px",left:"238px"}},{s:"#clkWaypoint3",p:{top:"-8px",left:"308px"}}],a),$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"}),b=I.cPANE_CLOCK_HEIGHT_BAR;break;case O.IntEnum.Clock.None:$("#paneMenu").animate({top:0},a),$("#paneContent").animate({top:I.cPANE_MENU_HEIGHT,"min-height":I.cPANEL_HEIGHT_MIN-I.cPANE_MENU_HEIGHT+"px"},a,function(){$("#paneClock").hide()})}switch(I.CLOCK_AND_MENU_HEIGHT=b+I.cPANE_MENU_HEIGHT,O.Options.int_setClock!==O.IntEnum.Clock.None&&($("#paneMenu").animate({top:b},a),$("#paneClock, #paneClockWall, #paneClockBackground, #paneClockIcons").animate({height:b},a),$("#paneContent").animate({top:b+I.cPANE_MENU_HEIGHT,"min-height":I.cPANEL_HEIGHT_MIN-(b+I.cPANE_MENU_HEIGHT)+"px"},a)),I.ModeCurrent){case I.ModeEnum.Overlay:$("#itemSocial").hide()}},setMarkerAngle:function(a,b){$(a).attr("transform","rotate("+b/10+", 50, 50)")},rotateClockElement:function(a,b){a.setAttribute("transform","rotate("+b+", 50, 50)")},reapplyFilters:function(){if(I.BrowserCurrent===I.BrowserEnum.Firefox){var a=$("#clkCircumference"),b=$("#clkHands"),c="url(#clkFilterShadowOuter)",d="url(#clkGradientCircumference)",e="url(#clkFilterShadowHand)";a.removeAttr("filter").attr("filter",c),a.css("stroke",d),b.removeAttr("filter").attr("filter",e)}},initializeClockItems:function(){K.IconsStandard=null,K.IconsHardcore=null,K.IconsStandard=new Array(K.IconSD0,K.IconSD1,K.IconSD2,K.IconSD3),K.IconsHardcore=new Array(K.IconHC0,K.IconHC1,K.IconHC2,K.IconHC3);var a,b,c="click",d="dblclick";for(I.ModeCurrent===I.ModeEnum.Website&&I.isProgramEmbedded===!1&&(c="dblclick",d="click"),a=0;a<T.cNUM_TIMEFRAMES_IN_HOUR;a++)$([K.IconsStandard[a],K.IconsHardcore[a]]).each(function(){$(this).unbind(d).on(d,function(){b=C.Chains[$(this).data(C.cIndexSynonym)].primaryEvents[0].path[0],M.goToView(b,M.ZoomEnum.Ground,M.Pin.Event)}).unbind(c).on(c,function(){$("#chnCheck_"+C.Chains[$(this).data(C.cIndexSynonym)].nexus).trigger("click")})})},checkoffChainIcon:function(a){var b,d,e,c=C.Chains[a];if(c.series===C.ChainSeriesEnum.Standard||c.series===C.ChainSeriesEnum.Hardcore)for(b=0;b<T.cNUM_TIMEFRAMES_IN_HOUR;b++){switch(c.series){case C.ChainSeriesEnum.Standard:d=T.getStandardChain(b),e=K.IconsStandard[b];break;case C.ChainSeriesEnum.Hardcore:d=T.getHardcoreChain(b),e=K.IconsHardcore[b]}d&&a===d.nexus&&(X.getChainChecklistState(d)!==X.ChecklistEnum.Unchecked?e.css({opacity:1}).animate({opacity:K.iconOpacityChecked},K.iconOpacitySpeed):e.css({opacity:K.iconOpacityChecked}).animate({opacity:1},K.iconOpacitySpeed))}},colorPrediction:function(a){a!==K.currentPredictionColor&&(K.currentPredictionColor=a,K.handMinute.style.stroke=a,K.timeProgress.style.background="linear-gradient(to right, black 0%, "+a+" 100%)")},tickFrequent:function(){var a=new Date,b=a.getSeconds();return K.tickerSecondPrevious===b?void(K.TickerTimeout=setTimeout(K.tickFrequent,K.tickerFrequency)):(K.tickerSecondPrevious=b,void K.tickSecond(a))},tickSecond:function(a){var b=a.getSeconds();T.TIMESTAMP_UNIX_SECONDS=T.getUNIXSeconds(),T.SECONDS_TILL_RESET=T.cSECONDS_IN_DAY-T.getTimeSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Seconds);var c=a.getMinutes(),d=a.getHours()%T.cHOURS_IN_MERIDIEM,e=60*c+b,f=6*b,g=6*c+b/10,h=30*d+c/60*30;K.rotateClockElement(K.clockCircumference,g),K.rotateClockElement(K.handSecond,f),K.rotateClockElement(K.handMinute,g),K.rotateClockElement(K.handHour,h);var i=1-(c%T.cMINUTES_IN_TIMEFRAME*60+b)/T.cSECONDS_IN_TIMEFRAME,j=I.ModeCurrent===I.ModeEnum.Tile?T.cPERCENT_100*i+"%":~~(I.cPANEL_WIDTH*i)+"px";if(K.timeProgress.style.width=j,c%T.cMINUTES_IN_TIMEFRAME===0&&0===b)0===O.Options.int_setDimming&&I.ModeCurrent!==I.ModeEnum.Simple&&I.ModeCurrent!==I.ModeEnum.Overlay&&$(K.clockBackground).fadeTo(800,1),K.updateTimeFrame(a);else{var k=T.TIMESTAMP_UNIX_SECONDS;K.awakeTimestampPrevious<k-K.awakeTimestampTolerance&&K.updateTimeFrame(a),K.awakeTimestampPrevious=k,0===O.Options.int_setDimming&&I.ModeCurrent!==I.ModeEnum.Simple&&(K.clockBackground.style.opacity=i)}C.CurrentChains.forEach(C.updateCurrentChainTimeHTML),0===b&&(K.updateDigitalClockMinutely(),C.updateChainsTimeHTML(),K.updateWaypointsClipboard(),O.Options.int_setAlarm===O.IntEnum.Alarm.Subscription&&(K.doSubscribedSpeech(O.Options.int_alertSubscribedFirst),K.doSubscribedSpeech(O.Options.int_alertSubscribedSecond)),c%T.cMINUTES_IN_DRYTOPFRAME===0&&(K.updateDaytimeIcon(),K.updateDryTopClipboard(),T.isDashboardEnabled&&T.refreshDashboard(a))),K.timeLocal.innerHTML=T.getTimeFormatted(),K.timeBoard.innerHTML=T.getTimeFormatted({want24:!0,wantHours:!1,wantLetters:!0,customTimeInSeconds:T.cSECONDS_IN_TIMEFRAME-T.getCurrentTimeframeElapsedTime()}),K.timestampUTC.innerHTML=T.TIMESTAMP_UNIX_SECONDS,K.timestampLocal.innerHTML=O.Utilities.lastLocalResetTimestamp.value,K.timestampServer.innerHTML=T.TIMESTAMP_UNIX_SECONDS+T.SECONDS_TILL_RESET,K.timestampReset.innerHTML=T.getTimeFormatted({customTimeInSeconds:T.SECONDS_TILL_RESET,want24:!0}),e>=K.currentFrameOffsetMinutes&&e<K.currentFrameOffsetMinutes+C.CurrentChainSD.minFinish?K.colorPrediction("lime"):e>=K.currentFrameOffsetMinutes+C.CurrentChainSD.minFinish&&e<K.currentFrameOffsetMinutes+C.CurrentChainSD.avgFinish?K.colorPrediction("orange"):e>=K.currentFrameOffsetMinutes+C.CurrentChainSD.avgFinish&&K.colorPrediction("red"),T.isCountdownToResetStarted&&T.updateCountdownToReset(),T.isDashboardCountdownTickEnabled&&T.updateDashboardCountdown(a),K.TickerTimeout=setTimeout(K.tickFrequent,K.tickerFrequency)},doSubscribedSpeech:function(a){if(a>0){var b=T.cMINUTES_IN_TIMEFRAME-T.getCurrentTimeframeElapsedTime(T.UnitEnum.Minutes),c=C.NextChainSD1,d=C.NextChainHC1,e=C.NextChainLS1,f=!1,g=!1,h=!1,i=D.getSpeech(D.orderModifier(D.orderModifier("boss","world"),"subscribed"))+" ",j=5;a>T.cMINUTES_IN_TIMEFRAME&&(c=C.NextChainSD2,d=C.NextChainHC2,e=C.NextChainLS2,b+=T.cMINUTES_IN_TIMEFRAME),f=O.objToBool(c)&&C.isChainSubscribed(c)&&C.isChainUnchecked(c),g=O.objToBool(d)&&C.isChainSubscribed(d)&&C.isChainUnchecked(d),h=O.objToBool(e)&&C.isChainSubscribed(e)&&C.isChainUnchecked(e),a===b&&(f||g)&&(f&&g?(i+=D.getChainPronunciation(c)+" "+D.getSpeech("and")+" "+D.getChainPronunciation(d),j=6):f?i+=D.getChainPronunciation(c):g&&(i+=D.getChainPronunciation(d)),D.speak(i,j),D.speak(D.getSpeech("will start")+T.getTimeTillChainFormatted(c,"speech"),3)),T.isDashboardStoryEnabled&&a===b&&h&&(D.speak(D.getSpeech("event","subscribed")+" "+D.getChainPronunciation(e),j),D.speak(D.getSpeech("will start")+T.getTimeTillChainFormatted(e,"speech"),3))}},updateTimeFrame:function(a){if(O.checkResetTimestamp(a),C.CurrentChainSD=T.getStandardChain(),C.NextChainSD1=T.getStandardChain(1),C.NextChainSD2=T.getStandardChain(2),
C.NextChainSD3=T.getStandardChain(3),C.NextChainSD4=T.getStandardChain(4),C.CurrentChainsSD=[C.CurrentChainSD,C.NextChainSD1,C.NextChainSD2,C.NextChainSD3],C.CurrentChainHC=T.getHardcoreChain(),C.NextChainHC1=T.getHardcoreChain(1),C.NextChainHC2=T.getHardcoreChain(2),C.NextChainHC3=T.getHardcoreChain(3),C.NextChainHC4=T.getHardcoreChain(4),T.isDashboardStoryEnabled&&(C.NextChainLS1=T.getLivingStoryChain(1),C.NextChainLS2=T.getLivingStoryChain(2)),C.PreviousChains2=T.getTimeframeChains(-2),C.PreviousChains1=T.getTimeframeChains(-1),C.CurrentChains=T.getTimeframeChains(),C.NextChains1=T.getTimeframeChains(1),C.sortChainsListHTML(),C.updateChainToday(),C.CurrentChains.forEach(C.queueEventsHighlight),$("#itemBoardCurrentSD").text(D.getObjectName(C.CurrentChainSD)),$("#itemBoardNextSD").text(D.getObjectName(C.NextChainSD1)),$("#itemBoardCurrentHC").text(""),$("#itemBoardNextHC").text(""),C.CurrentChainHC||C.NextChainHC1?($("#itemBoardHC").show(),C.CurrentChainHC&&$("#itemBoardCurrentHC").text(D.getObjectName(C.CurrentChainHC)),C.NextChainHC1&&$("#itemBoardNextHC").text(D.getObjectName(C.NextChainHC1))):$("#itemBoardHC").hide(),O.Options.int_setAlarm===O.IntEnum.Alarm.Checklist&&O.Options.bol_alertAtEnd){var b=", "+D.getSpeech("checked"),c="",d="",e="",f="",g=O.objToBool(C.CurrentChainSD),h=O.objToBool(C.CurrentChainHC),i=O.objToBool(C.NextChainSD1),j=O.objToBool(C.NextChainHC1),k=D.getSpeech("world boss","current")+" "+D.getSpeech("is")+" ";C.CurrentChainSD&&!C.isChainUnchecked(C.CurrentChainSD)&&(c=b),C.CurrentChainHC&&!C.isChainUnchecked(C.CurrentChainHC)&&(e=b),C.NextChainSD1&&!C.isChainUnchecked(C.NextChainSD1)&&(d=b),C.NextChainHC1&&!C.isChainUnchecked(C.NextChainHC1)&&(f=b),O.Options.bol_alertChecked===!1&&(c.length>0&&(g=!1),e.length>0&&(h=!1),d.length>0&&(i=!1),f.length>0&&(j=!1)),g&&h?(D.speak(k+D.getChainPronunciation(C.CurrentChainSD)+c,5),D.speak(D.getSpeech("and")+", "+D.getChainPronunciation(C.CurrentChainHC)+e,4)):g?D.speak(k+D.getChainPronunciation(C.CurrentChainSD)+c,5):h&&D.speak(k+D.getChainPronunciation(C.CurrentChainHC)+e,5),(g||h)&&(i&&j?(D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainSD1)+d,4),D.speak(D.getSpeech("and")+", "+D.getChainPronunciation(C.NextChainHC1)+f,4)):i?D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainSD1)+d,4):j&&D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainHC1)+f,4))}var l=a.getSeconds(),m=a.getMinutes(),n=60*m+l;$("#clkMarkers line").each(function(){$(this).attr("stroke","black")}),$("#paneClockIcons .iconSD").removeClass("clkIconCurrent clkIconNext"),$("#paneClockIcons .iconHC").removeClass("clkIconCurrent clkIconNext");var o=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){$([K.IconSD0,K.IconHC0]).each(function(){$(this).addClass("clkIconCurrent")}),$([K.IconSD1,K.IconHC1]).each(function(){$(this).addClass("clkIconNext")}),K.setMarkerAngle(b,C.CurrentChainSD.minFinish+k),K.setMarkerAngle(c,C.CurrentChainSD.avgFinish+k),K.setMarkerAngle(e,C.NextChainSD1.minFinish+l),K.setMarkerAngle(f,C.NextChainSD1.avgFinish+l),K.setMarkerAngle(g,C.NextChainSD2.minFinish+m),K.setMarkerAngle(h,C.NextChainSD2.avgFinish+m),K.setMarkerAngle(i,C.NextChainSD3.minFinish+n),K.setMarkerAngle(j,C.NextChainSD3.avgFinish+n);var o=function(a,b){a?(b.show(),b.attr("src","img/chain/"+a.alias.toLowerCase()+I.cPNG),b.data(C.cIndexSynonym,a.nexus),I.ModeCurrent===I.ModeEnum.Simple&&(b.attr("title",D.getObjectName(a)),I.qTip.init(b)),X.getChainChecklistState(a)!==X.ChecklistEnum.Unchecked?b.css({opacity:K.iconOpacityChecked}):b.css({opacity:1})):b.hide()};o(C.CurrentChainSD,K.IconSD0),o(C.NextChainSD1,K.IconSD1),o(C.NextChainSD2,K.IconSD2),o(C.NextChainSD3,K.IconSD3),o(C.CurrentChainHC,K.IconHC0),o(C.NextChainHC1,K.IconHC1),o(C.NextChainHC2,K.IconHC2),o(C.NextChainHC3,K.IconHC3),$(a).attr("stroke","lime"),$(b).attr("stroke","orange"),$(c).attr("stroke","red"),$(d).attr("stroke","green")},p=function(a){var b,c,d,e;switch(a){case T.cSECS_MARK_0:b="0",c="1",d="2",e="3";break;case T.cSECS_MARK_1:b="1",c="2",d="3",e="0";break;case T.cSECS_MARK_2:b="2",c="3",d="0",e="1";break;case T.cSECS_MARK_3:b="3",c="0",d="1",e="2"}K.currentFrameOffsetMinutes=a,K.WpChain0=$("#clkWaypoint"+b),K.IconSD0=$("#clkIconSD"+b),K.WpChain1=$("#clkWaypoint"+c),K.IconSD1=$("#clkIconSD"+c),K.WpChain2=$("#clkWaypoint"+d),K.IconSD2=$("#clkIconSD"+d),K.WpChain3=$("#clkWaypoint"+e),K.IconSD3=$("#clkIconSD"+e),K.IconHC0=$("#clkIconHC"+b),K.IconHC1=$("#clkIconHC"+c),K.IconHC2=$("#clkIconHC"+d),K.IconHC3=$("#clkIconHC"+e),C.showChainDailyIcon(),o($("#clkMarker"+b),$("#clkMarker"+b+"A"),$("#clkMarker"+b+"B"),$("#clkMarker"+c),$("#clkMarker"+c+"A"),$("#clkMarker"+c+"B"),$("#clkMarker"+d+"A"),$("#clkMarker"+d+"B"),$("#clkMarker"+e+"A"),$("#clkMarker"+e+"B"),T["cSECS_MARK_"+b],T["cSECS_MARK_"+c],T["cSECS_MARK_"+d],T["cSECS_MARK_"+e]);var f=document.getElementById("clkQuadrant"),g=parseInt(b)*K.cDEGREES_IN_QUADRANT;0===g&&0!==K.oldQuadrantAngle&&(g=K.cDEGREES_IN_CIRCLE),$({angle:K.oldQuadrantAngle}).animate({angle:g},{duration:600,step:function(){K.rotateClockElement(f,this.angle)},done:function(){K.rotateClockElement(f,g)}}),g===K.cDEGREES_IN_CIRCLE&&(g=0),K.oldQuadrantAngle=g};n>=T.cSECS_MARK_0&&n<T.cSECS_MARK_1?p(T.cSECS_MARK_0):n>=T.cSECS_MARK_1&&n<T.cSECS_MARK_2?p(T.cSECS_MARK_1):n>=T.cSECS_MARK_2&&n<T.cSECS_MARK_3?p(T.cSECS_MARK_2):n>=T.cSECS_MARK_3&&n<=T.cSECS_MARK_4&&p(T.cSECS_MARK_3),K.updateWaypointsClipboard(),K.updateDryTopClipboard(),K.initializeClockItems()},initializeClipboard:function(){ZeroClipboard.config({swfPath:"bin/ZeroClipboard.swf"});for(var a=0;a<T.cNUM_TIMEFRAMES_IN_HOUR;a++)K.wpClipboards.push(new ZeroClipboard(document.getElementById("clkWaypoint"+a))),K.wpClipboards[a].on("aftercopy",function(a){I.write(K.cZeroClipboardSuccessText+a.data["text/plain"],5)});if(C.DryTopChains.length>0)for(var a=0;2>a;a++)K.lsClipboards.push(new ZeroClipboard(document.getElementById("chnDryTopWaypoint"+a))),K.lsClipboards[a].on("aftercopy",function(a){I.write(K.cZeroClipboardSuccessText+a.data["text/plain"],5)})},updateDaytimeIcon:function(){var a="img/ui/day_night.png";T.isDaylight()&&(a="img/ui/day_light.png"),$("#itemTimeDayIcon").attr("src",a)},updateDigitalClockMinutely:function(){K.timeDaytime.innerHTML=T.getDayPeriodRemaining(),K.timeLocal.title="Anet: "+T.getTimeFormatted({reference:T.ReferenceEnum.Server,wantSeconds:!1})+"<br />UTC: "+T.getTimeFormatted({reference:T.ReferenceEnum.UTC,wantSeconds:!1,want24:!0})+"<br />Reset: "+T.getTimeFormatted({customTimeInSeconds:T.SECONDS_TILL_RESET,wantSeconds:!1,wantLetters:!0}),I.qTip.init(K.timeLocal)},updateWaypointsClipboard:function(){var a=function(a,b,c,d,e){var f="";f+=b.waypoint+" "+D.getChainAlias(b),c&&c.nexus!==C.Triple.nexus?c.nexus!==C.Triple.nexus&&(f+=" "+D.getTranslation("and")+" "+c.waypoint+" "+D.getChainAlias(c)+T.getTimeTillChainFormatted(c)):f+=T.getTimeTillChainFormatted(b),f+=", "+D.getTranslation("then")+" "+d.waypoint+" "+D.getChainAlias(d),e&&e.nexus!==C.Triple.nexus?e.nexus!==C.Triple.nexus&&(f+=" "+D.getTranslation("and")+" "+e.waypoint+" "+D.getChainAlias(e)+T.getTimeTillChainFormatted(e)):f+=T.getTimeTillChainFormatted(d),f+=I.siteTagCurrent,a.attr(K.cZeroClipboardDataAttribute,f)};a(K.WpChain0,C.CurrentChainSD,C.CurrentChainHC,C.NextChainSD1,C.NextChainHC1),a(K.WpChain1,C.NextChainSD1,C.NextChainHC1,C.NextChainSD2,C.NextChainHC2),a(K.WpChain2,C.NextChainSD2,C.NextChainHC2,C.NextChainSD3,C.NextChainHC3),a(K.WpChain3,C.NextChainSD3,C.NextChainHC3,C.NextChainSD4,C.NextChainHC4)},updateDryTopClipboard:function(){if(C.isDryTopIconsShown){var a=T.getCurrentDryTopEvents(),b=T.getCurrentDryTopEvents(1);document.getElementById("chnDryTopWaypoint0").setAttribute(K.cZeroClipboardDataAttribute,a),document.getElementById("chnDryTopWaypoint1").setAttribute(K.cZeroClipboardDataAttribute,b),$("#mapDryTopClip0").val(a),$("#mapDryTopClip1").val(b)}}},I={cSiteName:"GW2Timer.com",cSiteURL:"http://gw2timer.com/",cImageHost:"http://i.imgur.com/",cGameName:"Guild Wars 2",cGameNick:"GW2",cPNG:".png",cThrobber:"<div class='itemThrobber'><em></em></div>",cTextDelimiterChar:"|",cTextDelimiterRegex:/[|]/g,consoleTimeout:{},siteTagDefault:" - gw2timer.com",siteTagCurrent:" - gw2timer.com",Symbol:{Expand:"[+]",Collapse:"[\u2212]",Help:"[?]"},cPANEL_WIDTH:360,cPANEL_HEIGHT_MIN:220,cPANE_CLOCK_HEIGHT:360,cPANE_CLOCK_HEIGHT_COMPACT:220,cPANE_CLOCK_HEIGHT_BAR:85,cPANE_MENU_HEIGHT:48,cTOOLTIP_WIDTH_MAX:360,cTOOLTIP_OVERFLOW_WIDTH:240,cTOOLTIP_OVERFLOW_MAX:10,cTOOLTIP_DEFAULT_OFFSET_X:-180,cTOOLTIP_DEFAULT_OFFSET_Y:30,cTOOLTIP_ALTERNATE_OFFSET_X:24,cTOOLTIP_ADD_OFFSET_Y:42,cTOOLTIP_ADD_OFFSET_X:36,cTOOLTIP_MOUSEMOVE_RATE:20,CLOCK_AND_MENU_HEIGHT:0,posX:0,posY:0,isMouseOnPanel:!1,isProgramLoaded:!1,isProgramEmbedded:!1,isMapEnabled:!0,isScrollEnabled:!1,isSpeechSynthesisEnabled:!1,ModeCurrent:null,ModeEnum:{Website:"Website",Mobile:"Mobile",Simple:"Simple",Tile:"Tile",Overlay:"Overlay"},cPagePrefix:"#plate",cMenuPrefix:"#menu",PageCurrent:"",PagePrevious:"",PageEnum:{Chains:"Chains",Map:"Map",Help:"Help",Options:"Options"},SpecialPageEnum:{WvW:"WvW",DryTop:"DryTop"},SectionEnum:{Chains:{DryTop:"DryTop",Timetable:"Timetable"},Map:{Daily:"Daily",Resource:"Resource",JP:"JP",Collectible:"Collectible",Guild:"Guild",TP:"TP",Notepad:"Notepad",Personal:"Personal"},Help:{FAQ:"FAQ",About:"About",Embed:"Embed",Scheduled:"Scheduled",Legacy:"Legacy",Temples:"Temples",Dungeons:"Dungeons"}},MapEnum:{Tyria:"map",Mists:"wvw"},MapCurrent:0,ArticleCurrent:null,contentCurrentPlate:"",isContentLoaded_Map:!1,isContentLoaded_Help:!1,isSectionLoaded_Daily:!1,sectionPrefix:"sectionCurrent_",cHeaderPrefix:"#header",BrowserCurrent:"Unknown",BrowserEnum:{IE:0,Opera:1,Firefox:2,Chrome:3},isOnSmallDevice:!1,isOnBigDevice:!1,cSMALL_DEVICE_WIDTH:800,cSMALL_DEVICE_HEIGHT:600,cBIG_DISPLAY_HEIGHT:1200,initializeFirst:function(){D.stopSpeech(),window!==window.top&&(I.isProgramEmbedded=!0),U.enforceURLArgumentsFirst(),I.enforceProgramMode(),T.checkDST(),T.cUTC_OFFSET_USER=-((new Date).getTimezoneOffset()/T.cMINUTES_IN_HOUR),T.cUTC_OFFSET_USER<=T.cUTC_OFFSET_EASTERN&&T.cUTC_OFFSET_USER>=T.cUTC_OFFSET_HAWAII&&(O.Options.bol_use24Hour=!1);var a=T.getUNIXSeconds(),b=parseInt(localStorage[O.Utilities.lastLocalResetTimestamp.key]);void 0===localStorage[O.Utilities.lastLocalResetTimestamp.key]||isFinite(b)===!1||b>a?(O.Utilities.lastLocalResetTimestamp.value=a,localStorage[O.Utilities.lastLocalResetTimestamp.key]=O.Utilities.lastLocalResetTimestamp.value):O.Utilities.lastLocalResetTimestamp.value=b,K.awakeTimestampPrevious=a,screen.width<=I.cSMALL_DEVICE_WIDTH&&screen.height<=I.cSMALL_DEVICE_HEIGHT&&I.ModeCurrent===I.ModeEnum.Website&&(I.isOnSmallDevice=!0),window.innerHeight>I.cBIG_DISPLAY_HEIGHT&&(I.isOnBigDevice=!0);var c=navigator.userAgent;-1!==c.indexOf("MSIE")||-1!==c.indexOf("Trident")?I.BrowserCurrent=I.BrowserEnum.IE:-1!==c.indexOf("Chrome")?(I.BrowserCurrent=I.BrowserEnum.Chrome,I.isSpeechSynthesisEnabled=!0):-1!==c.indexOf("Firefox")?I.BrowserCurrent=I.BrowserEnum.Firefox:-1!==c.indexOf("Opera")&&(I.BrowserCurrent=I.BrowserEnum.Opera),$("#plateMap, #plateWvW, #plateHelp").each(function(){$(this).append(I.cThrobber)}),I.qTip.start(),I.PageCurrent=I.PageEnum.Chains},initializeLast:function(){I.initializeTooltip(),I.bindHelpButtons("#plateOptions"),I.initializeUIforMenu(),I.initializeUIForHUD(),I.styleContextMenu("#ctxMap"),$("#mapSwitchButton").one("click",function(){$.getScript(U.URL_DATA.WvW).done(function(){W.initializeWvW()})}).click(function(){I.toggleMap(I.MapEnum.Mists)}),$("#wvwSwitchButton").click(function(){I.toggleMap(I.MapEnum.Tyria)}),U.enforceURLArgumentsLast(),I.PageCurrent===I.PageEnum.Chains&&U.openSectionFromURL(),$("#itemWarning").remove(),$("#cslClose").click(function(){I.clear()}),$("#cslSelect").click(function(){I.selectText("#cslContent")}),$("#mapOptions, #wvwOptions, #mapGPS, #wvwGPS").one("mouseenter",function(){$(this).find("img").each(function(){$(this).attr("src",$(this).attr("data-src"))})}),$("#optAlarmSpeaker").click(function(){D.speak(D.getWord("alarm"))}),$("#optMute").click(function(){D.stopSpeech()}),$("#chnOptions").one("mouseover",function(){I.loadImg($(this))}),U.convertExternalLink(".linkExternal"),I.BrowserCurrent!==I.BrowserEnum.IE&&$("head").append("<style>.leaflet-clickable{cursor: url('img/cursor/pointer.cur'), pointer;}</style>"),$(document).mouseup(function(a){$(".jsRemovable, .jsHidable").each(function(){$(this).is(a.target)||0!==$(this).has(a.target).length||($(this).hasClass("jsHidable")&&$(this).hide(),$(this).hasClass("jsRemovable")&&$(this).remove())})}),$("#itemLanguage").hover(function(){$("#paneClock").css("z-index",3)},function(){$("#paneClock").css("z-index",1)}),I.isMapEnabled&&I.initializeScrollbar($("#cslContent, #plateChains, #plateOptions")),O.cleanLocalStorage(),O.enforceProgramVersion(),D.translateAfter(),P.wantZoomToFirstEvent()?$("#chnEvent_"+C.CurrentChainSD.nexus+"_"+C.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click"):I.isMapEnabled&&M.goToDefault(),I.isMapEnabled&&M.changeFloor(O.Options.int_setFloor),O.isServerReset&&C.ChainToday&&I.greet(D.getModifiedWord("boss","daily",U.CaseEnum.Sentence)+" "+D.getObjectName(C.ChainToday)+" "+D.getTranslation("will start")+" "+D.getTranslation("at")+" "+T.getTimeFormatted({wantSeconds:!1,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(C.ChainToday.scheduleKeys[0])})+" "+D.getTranslation("in")+" "+T.getTimeFormatted({wantLetters:!0,wantSeconds:!1,customTimeInSeconds:T.getSecondsUntilChainStarts(C.ChainToday)}),15),I.isProgramLoaded=!0},initializeChainsUI:function(){$("#plateChains header").click(function(){var a=U.getSubstringFromHTMLID($(this));$(this).next().slideToggle("fast",function(){if($(this).is(":visible")){I.updateScrollbar();var b=$(I.cPagePrefix+I.PageEnum.Chains),c=$(this).prev();c.find("kbd").html(I.Symbol.Collapse),I.scrollToElement(c,b,"fast"),"sectionChains_Drytop"===$(this).attr("id")?(M.goToZone("dry",M.ZoomEnum.Bird),I.PageCurrent=I.SpecialPageEnum.DryTop,U.updateTitle(I.SpecialPageEnum.DryTop),P.toggleDryTopIcons(!0)):I[I.sectionPrefix+I.PageEnum.Chains]=a}else I.updateScrollbar(),$(this).prev().find("kbd").html(I.Symbol.Expand),"sectionChains_Drytop"===$(this).attr("id")&&(I.PageCurrent=I.PageEnum.Chains,P.toggleDryTopIcons(!1)),I[I.sectionPrefix+I.PageEnum.Chains]="";U.updateQueryString()})}),$("#plateChains header:not(:first)").each(function(){$(this).next().toggle(0),$(this).find("kbd").html(I.Symbol.Expand)}),$("#plateChains header:first").each(function(){$(this).find("kbd").html(I.Symbol.Collapse)}),I.ModeCurrent!==I.ModeEnum.Tile?$("#headerChains_Drytop").one("click",function(){P.generateDryTop()}):$("#headerChains_Drytop").hide(),$("#headerChains_Legacy").one("click",function(){C.LegacyChains.forEach(C.initializeChain),C.LegacyChains.forEach(P.drawChainPaths),I.readjustTile()}),$("#headerChains_Temple").one("click",function(){C.TempleChains.forEach(C.initializeChain),C.TempleChains.forEach(P.drawChainPaths),I.readjustTile()}),$("#headerChains_Timetable").one("click",function(){C.isTimetableGenerated=!0,C.initializeTimetableHTML(),I.readjustTile()}),I.readjustTile()},write:function(a,b,c){$("#itemConsole").show();var d=$("#cslContent"),e=18;a=void 0===a||null===a?"emptystring":a.toString(),void 0===c&&(c=!1),c===!0&&d.empty(),isFinite(b)===!1&&(b=3+parseInt(a.length/e)),d.append(a+"<br />"),I.updateScrollbar(d),window.clearTimeout(I.consoleTimeout),I.consoleTimeout=setTimeout(function(){d.css({opacity:1}).animate({opacity:0},600,function(){$(this).empty().css({opacity:1}),$("#itemConsole").hide()})},b*T.cMILLISECONDS_IN_SECOND)},greet:function(a,b,c){I.isProgramEmbedded===!1&&I.write(a,b,c)},clear:function(){window.clearTimeout(I.consoleTimeout),$("#itemConsole").hide(),$("#cslContent").empty()},log:function(a,b,c){I.write(a,b||30,c)},selectText:function(a){var b=document.querySelector(a),c=window.getSelection(),d=document.createRange();d.selectNodeContents(b),c.removeAllRanges(),c.addRange(d)},scrollToElement:function(a,b,c){switch(I.ModeCurrent){case I.ModeEnum.Mobile:$("body").scrollTop(a.offset().top);break;case I.ModeEnum.Tile:$("#windowMain").animate({scrollTop:a.offset().top-$("#windowMain").offset().top+$("#windowMain").scrollTop()},c||0);break;default:b?b.animate({scrollTop:a.offset().top-b.offset().top+b.scrollTop()},c||0):a.scrollTop(0)}},bulkAnimate:function(a,b){for(var c in a){var d=a[c];$(d.s).animate(d.p,{duration:b,queue:!1})}},toggleHighlight:function(a,b){return void 0===b?a.hasClass("cssHighlight")?(a.removeClass("cssHighlight"),!1):(a.addClass("cssHighlight"),!0):b?(a.addClass("cssHighlight"),!0):(a.removeClass("cssHighlight"),!1)},styleContextMenu:function(a){$(a).addClass("jsHidable").find("li").each(function(){O.Options.enu_Language!==O.OptionEnum.Language.Default&&$(this).text(D.getPhraseOriginal($(this).text())),$(this).prepend("<ins class='s16 s16_bullet'></ins> ")})},initializeScrollbar:function(a){if(I.isScrollEnabled===!1)try{var b=1;switch(I.BrowserCurrent){case I.BrowserEnum.Opera:b=5;break;case I.BrowserEnum.Firefox:b=3}$(a).perfectScrollbar({wheelSpeed:b,suppressScrollX:!0})}catch(c){}},updateScrollbar:function(a){if(I.isScrollEnabled===!1)if(I.isMapEnabled)try{void 0===a?($("#plateMap").perfectScrollbar("update"),$("#plateChains").perfectScrollbar("update"),$("#plateHelp").perfectScrollbar("update"),$("#plateOptions").perfectScrollbar("update")):$(a).perfectScrollbar("update")}catch(b){}else $("#windowMain").perfectScrollbar("update")},generateSectionMenu:function(a){if(!($(a+" header.jsSection").length<=0)){var b=a.substring(I.cPagePrefix.length,a.length),c="menuBeam_"+b,d=$("<div class='menuBeamContainer'></div>").prependTo(a),e=$("<div class='menuBeam' id='"+c+"'></div>").prependTo(d);$(a+" header.jsSection").each(function(){var c=$(this),d=$(this).children("var").first(),f=d.data(O.Options.enu_Language)||c.text();d.text(f),c.next().hide(),c.wrapInner("<span></span>"),c.append("<sup>"+I.Symbol.Expand+"</sup>"),c.click(function(){var c=!1,d=U.getSubstringFromHTMLID($(this));$(a+" .menuBeamIcon").removeClass("menuBeamIconActive"),$(this).next().is(":visible")?($(this).children("sup").text(I.Symbol.Expand),I.displaySectionMarkers(d,!1),I[I.sectionPrefix+b]="",$(a+" header.jsSection").show(),$(a+" header.cntHeader").show()):(c=!0,$(this).children("sup").text(I.Symbol.Collapse),$(a+" .menuBeamIcon[data-section='"+d+"']").addClass("menuBeamIconActive"),I.displaySectionMarkers(d,!0),I[I.sectionPrefix+b]=d,$(this).data("beamclicked")===!0&&($(a+" header.jsSection").not(this).hide(),$(a+" header.cntHeader").hide(),$(this).removeData("beamclicked")),$(this).hasClass("jsMapDefault")&&M.goToDefault()),U.updateQueryString(),$(this).data("donotanimate")!==!0?I.ModeCurrent===I.ModeEnum.Website?$(this).next().toggle("fast",function(){I.updateScrollbar(a)}):($(this).next().toggle(),I.updateScrollbar(a)):$(this).next().toggle(),$(this).removeData("donotanimate"),c&&I.scrollToElement($(this),$(a),"fast")}),c.one("click",function(){I.loadImg($(this).next())}),$("<div class='jsSectionDone'><img src='img/ui/close.png' />"+f+"</div>").appendTo(c.next()).click(function(){$(this).parent().prev().trigger("click")});var g=U.getSubstringFromHTMLID(c),h=c.find("img:eq(0)").attr("src");(I.isMapEnabled||c.hasClass("mapOnly")===!1)&&$("<img class='menuBeamIcon' data-section='"+g+"' src='"+h+"' title='&lt;dfn&gt;"+D.getWordCapital("section")+": &lt;/dfn&gt;"+f+"' />").appendTo(e).click(function(){$(a+" header.jsSection").each(function(){$(this).next().is(":visible")&&$(this).attr("id")!==c.attr("id")&&($(this).data("donotanimate",!0),$(this).trigger("click"))}),c.data("beamclicked",!0),c.trigger("click")})}),$("<img class='menuBeamIcon menuBeamIconCollapse' src='img/ui/exit.png' title='&lt;dfn&gt;"+D.getPhraseTitle("collapse section")+"&lt;/dfn&gt;' />").prependTo(e).click(function(){$(a+" header.jsSection").each(function(){$(this).next().is(":visible")&&$(this).trigger("click")}),$(a+" .menuBeamIcon").removeClass("menuBeamIconActive")}),I.qTip.init(a+" .menuBeamIcon")}},displaySectionMarkers:function(a,b){var d,e,c=$("#mapToggle_"+a);c.length&&(d=c.data("checked"),e=c.data("hideonly"),e?b||c.trigger("click"):b?d||(c.trigger("click"),c.data("checked",!0)):d&&(c.trigger("click"),c.data("checked",!1)))},loadStylesheet:function(a){a!==I.ModeEnum.Website&&$("head").append("<link rel='stylesheet' type='text/css' href='style/"+a.toLowerCase()+".css' />")},loadImg:function(a){a.find("img").each(function(){$(this).attr("data-src")&&($(this)[0].src=$(this).data("src"))})},bindHelpButtons:function(a){$(a+" .jsHelpCollapsible").each(function(){$(this).text("[?+]").attr("title","<dfn>More Info</dfn>"),$(this).next().hide(),$(this).click(function(){$(this).next().toggle(),$(this).next().is(":visible")?$(this).text("[?-]"):$(this).text("[?+]")})}),$(a+" .jsHelpTooltip").each(function(){var a="<dfn>Info:</dfn> "+$(this).attr("title");$(this).text(I.Symbol.Help).attr("title",a)}),I.qTip.init(a+" .jsHelpCollapsible"),I.qTip.init(a+" .jsHelpTooltip")},toggleButtonState:function(a){var b=!a.data("checked");return a.data("checked",b),b},initializeUIforMenu:function(){!function(){var a=200,b=.5;$("#paneMenu").hover(function(){$("#paneMenu kbd").each(function(){$(this).is(":hover")||$(this).animate({opacity:b},a)})},function(){$("#paneMenu kbd").finish().each(function(){$(this).animate({opacity:1},a)})}),$("#paneMenu kbd").hover(function(){$(this).animate({opacity:1},a)},function(){$(this).animate({opacity:b},a)}).mousedown(function(){$(this).finish().css({opacity:b})}).mouseup(function(){$(this).finish().css({opacity:1})})}(),$("#paneMenu kbd").each(function(){$(this).click(function(){var a=$(this).attr("id");switch(I.PageCurrent=a.substring(I.cMenuPrefix.length-1,a.length),I.contentCurrentPlate=I.cPagePrefix+I.PageCurrent,I.MapCurrent===I.MapEnum.Mists&&(I.PagePrevious=I.PageCurrent),I.PageCurrent){case I.PageEnum.Chains:T.toggleDashboard(!0);break;case I.PageEnum.Map:I.isMapEnabled&&M.movePin(M.Pin.Event)}$("#paneContent article").hide(),I.PageCurrent!==I.PageEnum.Chains&&T.isDashboardCountdownTickEnabled&&T.toggleDashboard(!1),I.ModeCurrent===I.ModeEnum.Website&&($(I.contentCurrentPlate+" .cntHeader").css({opacity:0}).animate({opacity:1},400),$(I.contentCurrentPlate).animate({width:"show"},200)),$(I.contentCurrentPlate).show(),U.updateQueryString(),I.isMapEnabled&&M.toggleLayer(M.ZoneCurrent.Layers.Path,I.PageCurrent!==I.PageEnum.Map&&O.Options.bol_showChainPaths)})}),$("#menuMap").one("click",I.loadMapPlate),$("#menuHelp").one("click",I.loadHelpPlate)},toggleMap:function(a){switch(a){case I.MapEnum.Tyria:$("#wvwPane").hide(),$("#mapPane").show(),M.refreshMap(),I.PageCurrent=I.PagePrevious,I.PagePrevious=I.SpecialPageEnum.WvW,I.MapCurrent=I.MapEnum.Tyria;break;case I.MapEnum.Mists:$("#mapPane").hide(),$("#wvwPane").show(),W.isMapInitialized&&W.refreshMap(),I.PagePrevious=I.PageCurrent,I.PageCurrent=I.SpecialPageEnum.WvW,I.MapCurrent=I.MapEnum.Mists}U.updateQueryString()},bindAfterAJAXContent:function(a){var b=I.cPagePrefix+a;I.generateSectionMenu(b),I.isMapEnabled&&I.initializeScrollbar($(b)),I.bindHelpButtons(b),M.bindMapLinks(b),U.convertExternalLink(b+" a"),I.qTip.init("button"),U.openSectionFromURL(),D.translateElements()},loadMapPlate:function(){I.loadStylesheet("features"),$("#plateMap").load(U.getPageSrc("map"),function(){I.bindAfterAJAXContent(I.PageEnum.Map),I.ModeCurrent===I.ModeEnum.Mobile&&$(".mapOnly").remove(),$("#headerMap_Daily").one("click",function(){G.generateAndInitializeDailies(),I.isSectionLoaded_Daily=!0}),$("#headerMap_Resource").one("click",function(){G.generateAndInitializeResources()}),$("#headerMap_JP").one("click",function(){G.generateAndInitializeJPs()}),$("#headerMap_Personal").one("click",function(){X.initializePersonalChecklist()}),$("#headerMap_TP").one("click",function(){E.initializeCalculator(),E.initializeTrading(),E.initializeExchange()}),$("#headerMap_Notepad").one("click",function(){X.initializeNotepad()}),$("#headerMap_Collectible").one("click",function(){G.generateCollectiblesUI()}),$("#headerMap_Guild").one("click",function(){G.generateGuildUI()}),I.qTip.init("#plateMap label")})},loadHelpPlate:function(){$("#plateHelp").load(U.getPageSrc("help"),function(){I.bindAfterAJAXContent(I.PageEnum.Help),$(".jsCopyCode").click(function(){$(this).select()})})},initializeUIForHUD:function(){var a=200;$(".mapHUDContainer").each(function(){$(this).hover(function(){$(this).find(".cntComposition").show().animate({opacity:.8},a)},function(){$(this).find(".cntComposition").animate({opacity:0},a)})})},showHomeLink:function(){I.qTip.init($("<a title='&lt;dfn&gt;Switch back to full site.&lt;/dfn&gt;' href='./'> <img id='iconSimpleHome' src='img/ui/about.png' /></a>").appendTo("#itemHome"))},enforceProgramMode:function(){switch(I.loadStylesheet(I.ModeCurrent),I.ModeCurrent){case I.ModeEnum.Website:$("head").append("<link rel='alternate' media='only screen and (max-width: 640px)' href='http://gw2timer.com/?mode=Mobile'>");break;case I.ModeEnum.Overlay:I.cPANE_MENU_HEIGHT=32;break;case I.ModeEnum.Simple:I.isMapEnabled=!1,I.showHomeLink(),I.readjustSimple(),$(window).resize(function(){I.readjustSimple()});break;case I.ModeEnum.Mobile:I.isMapEnabled=!1,I.isScrollEnabled=!0,I.showHomeLink(),$("head").append("<meta name='viewport' content='width=device-width, initial-scale=1' />").append("<link rel='canonical' href='http://gw2timer.com' />"),$("#chnOptionsRight").prependTo("#chnOptionsPopup");break;case I.ModeEnum.Tile:I.isMapEnabled=!1,K.iconOpacityChecked=.2,I.showHomeLink(),$("#itemLanguage").prependTo("#plateChains"),$("#chnOptionsRight").prependTo("#chnOptionsPopup"),I.initializeScrollbar("#windowMain"),$(window).resize(function(){I.readjustTile()})}I.ModeCurrent===I.ModeEnum.Website&&I.isProgramEmbedded===!1?$("#paneClockIcons img").addClass("curZoom"):$("#paneClockIcons img").addClass("curClick"),I.isProgramEmbedded&&($("#itemWarning").remove(),$(".itemMapPeripheral a, .itemMapPeripheral span").hide(),T.isDashboardEnabled=!1),I.ModeCurrent!==I.ModeEnum.Website&&($("#itemLanguagePopup a").each(function(){var a=$(this).attr("href");$(this).attr("href",a+"&mode="+I.ModeCurrent)}),I.ModeCurrent!==I.ModeEnum.Overlay&&(T.isDashboardEnabled=!1))},readjustSimple:function(){var a=$(window).height()/2,b=$(window).width()/2,c=I.cPANE_CLOCK_HEIGHT/2;$("#paneBoard").css({"margin-top":a-c-72}),$("#paneClock").css({"margin-top":a-c,"margin-left":b-c})},readjustTile:function(){if(I.ModeCurrent===I.ModeEnum.Tile){var a=T.stepFunction($(window).width(),14,22,400,3);$(".chnTitle h1").css({fontSize:a+"px"})}},initializeTooltip:function(){I.qTip.init("#chnOptions img, a, ins, kbd, span, fieldset, label, input, button"),$("#panelApp").hover(function(){I.isMouseOnPanel=!0},function(){I.isMouseOnPanel=!1})},qTip:{name:"qTip",offsetX:-180,offsetY:15,a:null,start:function(){if(!a)var a="qTip";var b=document.getElementById(a);b||(b=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","div"):document.createElement("div"),b.setAttribute("id",a),document.getElementsByTagName("body").item(0).appendChild(b)),document.getElementById&&(this.a=document.getElementById(this.name),this.a&&(document.onmousemove=$.throttle(I.cTOOLTIP_MOUSEMOVE_RATE,function(a){I.qTip.move(a)})))},init:function(a){var b,c=document.getElementById("qTip");$(a).each(function(){b=$(this)[0],c=b.getAttribute("title"),b&&c&&(b.setAttribute("tiptitle",c),b.removeAttribute("title"),b.removeAttribute("alt"),b.onmouseover=function(){I.qTip.show(this.getAttribute("tiptitle"))},b.onmouseout=function(){I.qTip.hide()})})},move:function(a){I.posX=a.pageX,I.posY=a.pageY;var b=$("#qTip").width(),c=$("#qTip").height(),d=$(window).width(),e=$(window).height();I.isMouseOnPanel?(c+I.posY+I.cTOOLTIP_ADD_OFFSET_Y>e?I.qTip.offsetY=-c-I.cTOOLTIP_ADD_OFFSET_Y:I.qTip.offsetY=I.cTOOLTIP_DEFAULT_OFFSET_Y,b>=I.cTOOLTIP_OVERFLOW_WIDTH&&I.isMapEnabled&&O.Options.bol_alignPanelRight?I.qTip.offsetX=d-I.posX-I.cPANEL_WIDTH-I.cTOOLTIP_OVERFLOW_MAX:d-I.posX>I.cPANEL_WIDTH/2?I.qTip.offsetX=I.cTOOLTIP_ALTERNATE_OFFSET_X:I.qTip.offsetX=I.cTOOLTIP_DEFAULT_OFFSET_X):(I.posX+I.cTOOLTIP_ADD_OFFSET_X+b>d&&b>I.cTOOLTIP_WIDTH_MAX?I.qTip.offsetX=-b-I.cTOOLTIP_ADD_OFFSET_X:I.qTip.offsetX=I.cTOOLTIP_ALTERNATE_OFFSET_X,c-I.cTOOLTIP_ALTERNATE_OFFSET_X+I.posY>e?I.qTip.offsetY=-c-I.cTOOLTIP_ADD_OFFSET_Y:I.posY<I.cTOOLTIP_ADD_OFFSET_Y?I.qTip.offsetY=I.cTOOLTIP_DEFAULT_OFFSET_Y:I.qTip.offsetY=-I.cTOOLTIP_ADD_OFFSET_Y),this.a.style.left=I.posX+this.offsetX+"px",this.a.style.top=I.posY+this.offsetY+"px"},show:function(a){this.a&&(this.a.innerHTML=a,this.a.style.display="block")},hide:function(){this.a&&(this.a.innerHTML="",this.a.style.display="none")}}},I.initializeFirst(),O.initializeOptions(),T.initializeSchedule(),P.initializeMap(),K.initializeClock(),I.initializeLast()});