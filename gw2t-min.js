$(window).on("load",function(){var O,X,E,D,C,M,P,T,K,U,I={};O={lengthOfPrefixes:3,prefixOption:"opt_",legalLocalStorageKeys:new Array,Utilities:{programVersion:{key:"int_utlProgramVersion",value:141219},lastLocalResetTimestamp:{key:"int_utlLastLocalResetTimestamp",value:0}},Options:{enu_Language:"en",bol_hideChecked:false,bol_expandWB:true,bol_expandLS:true,bol_collapseChains:true,bol_useCountdown:true,int_setClock:0,int_setDimming:0,int_setPredictor:0,bol_tourPrediction:true,bol_showChainPaths:true,bol_showMap:true,bol_showWorldCompletion:false,bol_displaySectors:true,bol_displayWaypoints:true,bol_displayPOIs:true,bol_displayVistas:true,bol_displaySkills:true,bol_displayHearts:true,bol_displayEvents:false,int_setAlarm:0,bol_alertAtStart:true,bol_alertAtEnd:true,bol_alertChecked:false,int_alertSubscribedFirst:1,int_alertSubscribedSecond:15,int_sizeNotepadFont:12,int_sizeNotepadHeight:500,bol_refreshPrices:true,int_numTradingCalculators:25,int_numTradingResults:30,int_secTradingRefresh:60,int_shiftLogin:0,bol_clearChainChecklistOnReset:true,bol_clearPersonalChecklistOnReset:true,bol_use24Hour:true,bol_detectDST:true,bol_useSiteTag:true},OptionRange:{},OptionEnum:{Language:{Default:"en",English:"en",German:"de",Spanish:"es",French:"fr",Czech:"cs",Italian:"it",Polish:"pl",Portuguese:"pt",Russian:"ru",Mandarin:"zh"}},IntEnum:{Predictor:{Auto:0,Min:1,MinAvg:2,Avg:3},Clock:{Compact:0,Full:1,Bar:2,None:3},Alarm:{Off:0,Checklist:1,Subscription:2}},validateEnum:function(e,t){var n;var r=O.OptionEnum[O.getVariableSuffix(e)];for(n in r){if(r[n]===t){return t}}return O.Options[e]},TypeEnum:{isBoolean:"bol",isInteger:"int",isFloat:"flt",isEnum:"enu",isString:"str"},getVariableSuffix:function(e){return e.split("_")[1]},getVariablePrefix:function(e){return e.split("_")[0]},enforceProgramVersion:function(){var e=O.Utilities.programVersion.value;var t=parseInt(localStorage[O.Utilities.programVersion.key]);if(isFinite(t)&&t!==e){var n=20;if(I.ModeCurrent===I.ModeEnum.Overlay){n=10}I.clear();I.write(I.cSiteName+" was updated since your last visit.<br />"+"This version: "+e+"<br />"+"Your version: "+t+"<br />"+"Would you like to see the <a class='urlUpdates' href='"+U.URL_META.News+"'>changes</a>?<br />",n);U.convertExternalLink(".urlUpdates")}localStorage[O.Utilities.programVersion.key]=O.Utilities.programVersion.value},initializeLegalLocalStorageKeys:function(){var e;for(e in O.Utilities){O.legalLocalStorageKeys.push(O.Utilities[e].key)}for(e in O.Options){O.legalLocalStorageKeys.push(e)}for(e in X.Checklists){O.legalLocalStorageKeys.push(X.Checklists[e].key)}for(e in X.Textlists){O.legalLocalStorageKeys.push(X.Textlists[e].key)}},cleanLocalStorage:function(){var e,t;var n;var r;for(e=0;e<localStorage.length;e++){n=localStorage.key(e);for(t in O.legalLocalStorageKeys){if(n===O.legalLocalStorageKeys[t]){r=true;break}}if(r!==true){localStorage.removeItem(n)}else{r=false}}},convertLocalStorageDataType:function(e){var t=e.toLowerCase();if(t==="true"){return true}if(t==="false"){return false}if(isFinite(t)){if(t%0===0){return parseInt(t)}return parseFloat(t)}return e},intToBool:function(e){if(e>0){return true}return false},boolToInt:function(e){if(e){return 1}return 0},objToBool:function(e){if(e){return true}return false},updateLocalResetTimestamp:function(){O.Utilities.lastLocalResetTimestamp.value=T.getUNIXSeconds();localStorage[O.Utilities.lastLocalResetTimestamp.key]=O.Utilities.lastLocalResetTimestamp.value},checkResetTimestamp:function(){var e=T.getUNIXSeconds()-T.getTimeOffsetSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Seconds);if(O.Utilities.lastLocalResetTimestamp.value<e){O.clearServerSensitiveOptions()}},getIndexOfSelectedRadioButton:function(e){var t=$("fieldset[name="+e+"] "+"input:radio[name="+e+"]");return t.index(t.filter(":checked"))},initializeOptions:function(){O.initializeLegalLocalStorageKeys();var e;var t;var n;for(e in O.Options){$("#"+O.prefixOption+e).each(function(){t=$(this).attr("type");n=O.getVariablePrefix(e);if(t==="radio"){O.OptionRange[e]=new Array(0,$("fieldset[name="+e+"] input").length-1)}else if(t==="number"||t==="range"){O.OptionRange[e]=new Array($(this).prop("min"),$(this).prop("max"))}});if(I.isProgramEmbedded){if(U.Args[e]!==undefined){O.Options[e]=O.convertLocalStorageDataType(U.sanitizeURLOptionsValue(e,U.Args[e]))}}else{if(U.Args[e]!==undefined){localStorage[e]=U.sanitizeURLOptionsValue(e,U.Args[e])}if(localStorage[e]===undefined){localStorage[e]=O.Options[e]}else{O.Options[e]=O.convertLocalStorageDataType(localStorage[e])}}$("#"+O.prefixOption+e).each(function(){t=$(this).attr("type");n=O.getVariablePrefix(e);if(t==="checkbox"){$(this).prop("checked",O.Options[e])}else if(t==="number"||t==="range"){$(this).val(O.Options[e])}else if(t==="radio"){$("input:radio[name="+e+"]:eq("+O.Options[e]+")").prop("checked",true)}if(t==="radio"){$("fieldset[name="+e+"]").change(function(){var e=$(this).attr("name");O.Options[e]=O.getIndexOfSelectedRadioButton(e);localStorage[e]=O.Options[e]})}else{$(this).change(function(){var e=$(this).attr("type");var t=$(this).attr("id").slice(O.prefixOption.length);if(e==="checkbox"){O.Options[t]=$(this).prop("checked")}else if(e==="number"||e==="range"){var n=$(this).val();var r=parseInt(n);if(isFinite(n)&&r>=O.OptionRange[t][0]&&r<=O.OptionRange[t][1]){O.Options[t]=r}else{O.Options[t]=O.OptionRange[t][0]}$(this).val(O.Options[t])}else{O.Options[t]=$(this).val()}localStorage[t]=O.Options[t]})}})}O.bindOptionsInputs();U.initializeAPIURLs()},clearServerSensitiveOptions:function(){var e=10;I.write("Daily Reset / Timestamp Expired!",e);var t;if(O.Options.bol_clearChainChecklistOnReset){var n;for(t in C.Chains){n=C.Chains[t];$("#chnCheck_"+n.nexus).removeClass("chnChecked");$("#barChain_"+n.nexus).css({opacity:1});if(X.getChecklistItem(X.Checklists.Chain,n.nexus)!==X.ChecklistEnum.Disabled){$("#barChain_"+n.nexus).show()}}X.clearChecklist(X.Checklists.Chain,X.ChecklistJob.UncheckTheChecked)}if(O.Options.bol_clearPersonalChecklistOnReset){$("#chlDungeonUncheck").trigger("click");$("#chlCustomUncheck").trigger("click");X.clearChecklist(X.Checklists.Dungeon,X.ChecklistJob.UncheckTheChecked);X.clearChecklist(X.Checklists.Custom,X.ChecklistJob.UncheckTheChecked)}P.shiftLoginTrack();I.write("",e);O.updateLocalResetTimestamp()},bindOptionsInputs:function(){var e;for(e in O.Enact){(function(e){var t;var n=O.prefixOption+e;var r=$("#"+n).attr("type");if(r==="radio"){t="fieldset[name="+e+"]"}else{t="#"+n}$(t).change(function(){O.Enact[e]()})})(e)}$("#opt_bol_showWorldCompletion").change(function(){if(O.Options.bol_showWorldCompletion===true&&M.isMappingIconsGenerated===false){location.reload()}$("#mapOptionsDisplay label input").each(function(){X.setCheckboxEnumState($(this),X.boolToChecklistEnum(O.Options.bol_showWorldCompletion))})});$("#opt_bol_displayEvents").change(function(){if(O.Options.bol_displayEvents===true&&M.isEventIconsGenerated===false){location.reload()}if(M.isEventIconsGenerated){M.refreshCurrentZone()}});$("#mapOptionsDisplay label input").each(function(){$(this).change(function(){if(M.isAPIRetrieved_MAPFLOOR){M.refreshCurrentZone()}})});O.Enact.int_setAlarm();O.Enact.bol_hideChecked();O.Enact.bol_detectDST();O.Enact.bol_useSiteTag();if(I.ModeCurrent!==I.ModeEnum.Simple){O.Enact.int_setClock();O.Enact.int_setDimming();O.Enact.bol_showMap()}$("#optRestoreAllChains").click(function(){var e;for(var t in C.Chains){e=C.Chains[t];$("#chnCheck_"+e.nexus).removeClass("chnChecked");$("#barChain_"+e.nexus).show().css({opacity:1})}X.clearChecklist(X.Checklists.Chain);for(t=0;t<T.cNUM_TIMEFRAMES_IN_HOUR;t++){K.checkoffChainIcon(T.getStandardChain(t).nexus);var n=T.getHardcoreChain(t);if(n){K.checkoffChainIcon(n.nexus)}}$("#menuChains").trigger("click")});$("#optClearLocalStorage").click(function(){if(confirm(I.cSiteName+" Reset: This is will clear all options and everything you have written in this website. Continue?")){localStorage.clear();location.reload()}});$("#optPrintLocalStorage").click(function(){var e;var t=new Array;for(e=0;e<localStorage.length;e++){var n=U.escapeHTML(localStorage.key(e));t.push(n)}t.sort();var r="";for(e in t){var i=U.escapeHTML(localStorage.getItem(t[e]));r+=t[e]+": "+i+"<br />"}I.write(r,30,true)})},Enact:{int_setAlarm:function(){var e="img/ui/placeholder.png";switch(O.Options.int_setAlarm){case O.IntEnum.Alarm.Checklist:e="img/ui/check.png";break;case O.IntEnum.Alarm.Subscription:e="img/ui/subscription.png";break}if(O.Options.int_setAlarm===O.IntEnum.Alarm.Off){$("#optAlarmSpeaker").attr("src","img/ui/mute.png")}else{$("#optAlarmSpeaker").attr("src","img/ui/speaker.png")}$("#optAlarmIcon").attr("src",e)},bol_hideChecked:function(){$(".barChain").each(function(){if(X.getChecklistItem(X.Checklists.Chain,U.getSubintegerFromHTMLID($(this)))===X.ChecklistEnum.Checked){if(O.Options.bol_hideChecked){$(this).hide()}else{$(this).show()}}})},bol_expandWB:function(){for(var e in C.CurrentChains){if(C.CurrentChains[e].series!==C.ChainSeriesEnum.Story){$("#chnDetails_"+C.CurrentChains[e].nexus).toggle(O.Options.bol_expandWB)}}},bol_expandLS:function(){for(var e in C.CurrentChains){if(C.CurrentChains[e].series===C.ChainSeriesEnum.Story){$("#chnDetails_"+C.CurrentChains[e].nexus).toggle(O.Options.bol_expandLS)}}},bol_use24Hour:function(){C.initializeTimetableHTML();C.updateChainsTimeHTML()},bol_detectDST:function(){T.checkDST()},int_setClock:function(){K.setClock()},int_setDimming:function(){switch(O.Options.int_setDimming){case 1:$("#paneClockBackground").css({opacity:1});break;case 2:$("#paneClockBackground").css({opacity:0});break}},bol_useCountdown:function(){C.updateChainsTimeHTML()},bol_showChainPaths:function(){M.setEntityGroupDisplay(M.ChainPathEntities,O.Options.bol_showChainPaths);M.setEntityGroupDisplay(M.StoryEventActive,O.Options.bol_showChainPaths)},bol_showMap:function(){if(O.Options.bol_showMap){$("#panelLeft").show();M.refreshMap()}else{$("#panelLeft").hide()}},bol_refreshPrices:function(){if(O.Options.bol_refreshPrices&&E.isTradingCalculatorsInitialized){E.loopRefresh()}else{E.cancelLoopRefresh()}},int_shiftLogin:function(){P.shiftLoginTrack()},bol_useSiteTag:function(){if(O.Options.bol_useSiteTag){I.siteTagCurrent=I.siteTagDefault}else{I.siteTagCurrent=""}}}};U={URL_META:{News:"http://forum.renaka.com/topic/5500046/",Overlay:"http://forum.renaka.com/topic/5546166/"},URL_API:{Tiles:"https://tiles.guildwars2.com/1/1/{z}/{x}/{y}.jpg",MapFloor:"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1",EventNames:"https://api.guildwars2.com/v1/event_names.json",EventDetails:"https://api.guildwars2.com/v1/event_details.json",ItemListing:"https://api.guildwars2.com/v2/commerce/listings/",ItemPrices:"https://api.guildwars2.com/v2/commerce/prices/",ItemDetails:"https://api.guildwars2.com/v1/item_details.json?item_id=",ItemRender:"https://render.guildwars2.com/file/",CoinPrice:"https://api.guildwars2.com/v2/commerce/exchange/gems?quantity=",GemPrice:"https://api.guildwars2.com/v2/commerce/exchange/coins?quantity=",ItemSearch:"http://www.gw2spidy.com/api/v0.9/json/item-search/",ItemData:"http://www.gw2spidy.com/api/v0.9/json/item/"},URL_IMG:{Placeholder:"img/ui/placeholder.png",Waypoint:"img/map/waypoint.png",WaypointOver:"img/map/waypoint_h.png",Landmark:"img/map/landmark.png",LandmarkOver:"img/map/landmark_h.png",Vista:"img/map/vista.png",Skill:"img/map/skill.png",Heart:"img/map/heart.png"},initializeAPIURLs:function(){var e=D.getFullySupportedLanguage();U.URL_API.MapFloor+="&lang="+e;U.URL_API.EventNames+="?lang="+e},Args:{},KeyEnum:{Page:"page",Section:"section",Article:"article",Mode:"mode",Go:"go"},CaseEnum:{None:0,Lower:1,Sentence:2,Title:3,Every:4,All:5},isEnumWithin:function(e,t){for(var n in t){if(t[n].toLowerCase()===e.toLowerCase()){return true}}return false},getURLArguments:function(){var e=window.location.search.substr(1).split("&");if(e===""){return{}}var t={};for(var n=0;n<e.length;++n){var r=e[n].split("=");if(r.length!==2){continue}t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t},enforceURLArgumentsFirst:function(){U.Args=U.getURLArguments();U.enforceURLArgumentsSpecial();var e;var t=U.Args[U.KeyEnum.Mode];if(t){for(e in I.ModeEnum){if(I.ModeEnum[e].toLowerCase()===t.toLowerCase()){I.ModeCurrent=I.ModeEnum[e];break}}}if(I.ModeCurrent===null){I.ModeCurrent=I.ModeEnum.Website}I.ArticleCurrent=parseInt(U.Args[U.KeyEnum.Article]);if(isFinite(I.ArticleCurrent)){I.ArticleCurrent=I.ArticleCurrent-1}},enforceURLArgumentsLast:function(){U.openPageFromURL()},enforceURLArgumentsSpecial:function(){var e,t;var n;var r=function(e){$("body").hide();document.location=e};var i=U.Args[U.KeyEnum.Page];if(i&&U.isEnumWithin(i,I.PageEnum)===false){i=i.toLowerCase();if(i==="navi"||i==="overlay"){r(U.URL_META.Overlay)}else if(i==="m"||i==="simple"){U.Args[U.KeyEnum.Mode]=I.ModeEnum.Simple}else if(i==="chests"){U.Args[X.Checklists.Collectible1.urlkey]="true"}else{for(e in I.SectionEnum){n=I.SectionEnum[e];for(t in n){if(t.toLowerCase()===i){U.Args[U.KeyEnum.Page]=e;U.Args[U.KeyEnum.Section]=t;return}}}for(e in M.Zones){if(i.indexOf(e)!==-1){U.Args[U.KeyEnum.Go]=e;return}}}}var s=U.Args[X.Checklists.Collectible1.urlkey];if(s){U.Args[U.KeyEnum.Page]=I.PageEnum.Map;U.Args[U.KeyEnum.Section]=I.SectionEnum.Map.Collectible;U.Args[U.KeyEnum.Article]="2";U.Args[U.KeyEnum.Go]="4816,16443,1"}},sanitizeURLOptionsValue:function(e,t){var n=e.substring(0,O.lengthOfPrefixes);var r=t.toLowerCase();switch(n){case O.TypeEnum.isBoolean:{if(r==="true"||r==="false"){return r}return O.Options[e].toString()}break;case O.TypeEnum.isInteger:{if(isFinite(r)){var i=parseInt(r);if(i>=O.OptionRange[e][0]&&i<=O.OptionRange[e][1]){return i.toString()}}return O.Options[e].toString()}break;case O.TypeEnum.isFloat:{if(isFinite(r)){var s=parseFloat(r);if(s>=O.OptionRange[e][0]&&s<=O.OptionRange[e][1]){return s.toString()}}return O.Options[e].toString()}break;case O.TypeEnum.isEnum:{return O.validateEnum(e,t)}break;case O.TypeEnum.isString:{return U.escapeHTML(t)}break}return"null"},stripToAlphanumeric:function(e){return e.replace(/\W/g,"")},stripToSentence:function(e){return e.replace(/[^\w\s\'\"\:\,]/gi,"")},stripToCalculation:function(e){return e.replace(/[^0-9.()\-+/*]/gi,"")},toFirstUpperCase:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},changeCase:function(e,t){var n;var r=[];if(t===undefined||t===U.CaseEnum.None){return e}if(t===U.CaseEnum.Title||t===U.CaseEnum.Every){r=e.split(" ")}switch(t){case U.CaseEnum.Lower:return e.toLowerCase();case U.CaseEnum.Sentence:return U.toFirstUpperCase(e);case U.CaseEnum.Title:{if(r.length>1){r[0]=U.toFirstUpperCase(r[0]);for(n=1;n<r.length;n++){if(r[n].length!==2){r[n]=U.toFirstUpperCase(r[n])}}return r.join(" ")}else{return U.toFirstUpperCase(e)}};case U.CaseEnum.Every:{if(r.length>1){for(n in r){r[n]=U.toFirstUpperCase(r[n])}return r.join(" ")}else{return U.toFirstUpperCase(e)}};case U.CaseEnum.All:return e.toUpperCase()}},wrapSubstringHTML:function(e,t,n){var r=e.toLowerCase().indexOf(t.toLowerCase());var i=r+t.length;var s="";if(r!==-1){if(n===undefined){n="u"}s=e.substring(0,r)+"<"+n+">"+e.substring(r,i)+"</"+n+">"+e.substring(i,e.length)}else{s=e}return s},escapeHTML:function(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},replaceCharAt:function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)},repeatChar:function(e,t){return Array(t+1).join(e)},countOccurrence:function(e,t){return e.split(t).length-1},updateAddressBar:function(e){history.replaceState("",null,e);K.reapplyFilters()},updateQueryString:function(){if(I.PageCurrent!==""){var e=I[I.sectionPrefix+I.PageCurrent];var t=U.Args[U.KeyEnum.Article];var n=U.Args[U.KeyEnum.Go];var r="?"+U.KeyEnum.Page+"="+I.PageCurrent;var i="";var s="";var o="";var u="";if(I.ModeCurrent===I.ModeEnum.Overlay){u="&mode=Overlay"}if(e){i="&"+U.KeyEnum.Section+"="+e}if(t){s="&"+U.KeyEnum.Article+"="+t}if(n){o="&"+U.KeyEnum.Go+"="+n}U.updateAddressBar(r+i+s+o+u)}},openSectionFromURL:function(){setTimeout(function(){if(U.Args[U.KeyEnum.Section]!==undefined){var e=U.stripToAlphanumeric(U.Args[U.KeyEnum.Section]);var t=$(I.cHeaderPrefix+I.PageCurrent+"_"+U.toFirstUpperCase(e));if(!t.length){t=$(I.cHeaderPrefix+I.PageCurrent+"_"+e.toUpperCase())}t.trigger("click")}},0)},openPageFromURL:function(){if(U.Args[U.KeyEnum.Page]!==undefined){var e=U.stripToAlphanumeric(U.Args[U.KeyEnum.Page]);$(I.cMenuPrefix+U.toFirstUpperCase(e)).trigger("click")}},convertExternalLink:function(e){$(e).each(function(){$(this).attr("href",I.cSiteURL+"out?"+escape($(this).attr("href")));$(this).attr("target","_blank")})},openExternalURL:function(e){var t=e;if(I.ModeCurrent!==I.ModeEnum.Overlay){t=I.cSiteURL+"out?"+escape(e)}window.open(t,"_blank")},getSubstringFromHTMLID:function(e){return O.getVariableSuffix(e.attr("id"))},getSubintegerFromHTMLID:function(e){return parseInt(O.getVariableSuffix(e.attr("id")))},getImageHosted:function(e){return I.cImageHost+e+I.cPNG},getWikiLink:function(e){e=e.replace(/ /g,"_");return"http://wiki.guildwars2.com/wiki/"+escape(e)},getWikiLanguageLink:function(e){e=e.replace(/ /g,"_");return"http://wiki-"+D.getFullySupportedLanguage()+".guildwars2.com/wiki/"+escape(e)},getWikiSearchLink:function(e){e=e.replace(/ /g,"+");return"http://wiki.guildwars2.com/index.php?title=Special%3ASearch&search="+escape(e)},getYouTubeLink:function(e){return"http://www.youtube.com/results?search_query="+escape(e)},getTradingSearchLink:function(e){return"https://www.gw2tp.com/search?name="+escape(e)},getTradingItemLink:function(e,t){return"http://www.gw2spidy.com/item/"+escape(e)+"#"+U.stripToSentence(t)},getChatlinkFromPoiID:function(e){var t=String.fromCharCode(4);for(var n=0;n<4;n++){t+=String.fromCharCode(e>>n*8&255)}return"[&"+btoa(t)+"]"},getChatlinkFromItemID:function(e){return"[&"+btoa(String.fromCharCode(2)+String.fromCharCode(1)+String.fromCharCode(e%256)+String.fromCharCode(Math.floor(e/256))+String.fromCharCode(0)+String.fromCharCode(0))+"]"},getAssetIconURL:function(e){return U.URL_API.ItemRender+e["icon_file_signature"]+"/"+e["icon_file_id"]+".png"}};X={Checklists:{Chain:{key:"str_chlChain",value:""},ChainSubscription:{key:"str_chlChainSubscription",value:""},JP:{key:"str_chlJP",value:""},Dungeon:{key:"str_chlDungeon",value:"",money:0},Custom:{key:"str_chlCustom",value:""},Collectible0:{key:"str_chlDiveMaster",urlkey:"divemaster",value:"",cushion:new Array},Collectible1:{key:"str_chlBuriedChest",urlkey:"chests",value:"",cushion:new Array},Collectible2:{key:"str_chlCoinProspect",urlkey:"coinprospect",value:"",cushion:new Array},Collectible3:{key:"str_chlCoinUplands",urlkey:"coinuplands",value:"",cushion:new Array},Collectible4:{key:"str_chlCoinChallenger",urlkey:"coinchallenger",value:"",cushion:new Array},TradingOverwrite:{key:"str_chlTradingOverwrite",value:""},TradingNotify:{key:"str_chlTradingNotify",value:""}},ChecklistEnum:{Unchecked:"0",Checked:"1",Disabled:"2",Unfound:"0",Tracked:"1",Found:"2"},ChecklistJob:{AllUnchecked:0,AllChecked:1,UncheckTheChecked:2},Textlists:{CustomText:{key:"str_txlCustomText",value:new Array,valueDefault:new Array},NotepadText:{key:"str_txlNotepadText",value:new Array,valueDefault:new Array},TradingItem:{key:"str_txlTradingItem",value:new Array},TradingName:{key:"str_txlTradingName",value:new Array},TradingBuy:{key:"str_txlTradingBuy",value:new Array},TradingSell:{key:"str_txlTradingSell",value:new Array},TradingQuantity:{key:"str_txlTradingQuantity",value:new Array},NotifyBuyLow:{key:"str_txlNotifyBuyLow",value:new Array},NotifyBuyHigh:{key:"str_txlNotifyBuyHigh",value:new Array},NotifySellLow:{key:"str_txlNotifySellLow",value:new Array},NotifySellHigh:{key:"str_txlNotifySellHigh",value:new Array},ExchangeUnit:{key:"str_txlExchangeUnit",value:new Array}},boolToChecklistEnum:function(e){if(e){return X.ChecklistEnum.Checked}return X.ChecklistEnum.Unchecked},initializeChecklist:function(e,t,n,r){var i;var s;var o;var u=localStorage[e.key];e.length=t;if(n){X.clearChecklist(e);s=n.split(",");for(i in s){o=parseInt(s[i]);if(isFinite(o)){X.setChecklistItem(e,o-1,X.ChecklistEnum.Checked)}}}else if(u===undefined){X.clearChecklist(e,r)}else if(u.length>t){localStorage[e.key]=u.substring(0,t)}else if(u.length<t){var a=U.repeatChar(t-u.length,X.ChecklistEnum.Unchecked);localStorage[e.key]=u+a}e.value=localStorage[e.key]},setChecklistItem:function(e,t,n){t=parseInt(t);var r=n.toString();if(r.length===1&&e.value[t]!==r&&t>=0&&t<e.value.length){var i=U.replaceCharAt(e.value,t,r);localStorage[e.key]=i;e.value=i}},trackChecklistItem:function(e,t){t=parseInt(t);var n=e.value.charAt(t);switch(n){case X.ChecklistEnum.Unfound:n=X.ChecklistEnum.Tracked;break;case X.ChecklistEnum.Tracked:n=X.ChecklistEnum.Found;break;case X.ChecklistEnum.Found:n=X.ChecklistEnum.Unfound;break;default:n=X.ChecklistEnum.Unfound}var r=U.replaceCharAt(e.value,t,n);localStorage[e.key]=r;e.value=r;return n},getChecklistItem:function(e,t,n){var r=e.value.charAt(t);if(n===undefined){return r}if(n===O.TypeEnum.isInteger){return parseInt(r)}if(n===O.TypeEnum.isBoolean){return O.intToBool(parseInt(r))}return r},isChecked:function(e,t){var n=U.getSubintegerFromHTMLID(t);if(X.getChecklistItem(e,n)===X.ChecklistEnum.Checked){return true}return false},getCheckedIndexes:function(e){var t;var n="";var r=e.value;for(t=0;t<r.length;t++){if(r[t]===X.ChecklistEnum.Checked){n+=t+1+","}}n=n.slice(0,-1);return n},clearChecklist:function(e,t){var n;var r="";var i="";switch(t){case X.ChecklistJob.AllChecked:{for(n=0;n<e.length;n++){r+=X.ChecklistEnum.Checked}}break;case X.ChecklistJob.UncheckTheChecked:{if(localStorage[e.key]!==undefined){i=localStorage[e.key]}else{i=e.value}for(n=0;n<i.length;n++){if(i[n]===X.ChecklistEnum.Checked){r+=X.ChecklistEnum.Unchecked}else{r+=i[n]}}}break;default:{for(n=0;n<e.length;n++){r+=X.ChecklistEnum.Unchecked}}}e.value=r;localStorage[e.key]=r},countChecklist:function(e,t){return U.countOccurrence(e.value,t)},getCheckboxEnumState:function(e){if(e.prop("disabled")===true){return X.ChecklistEnum.Disabled}if(e.prop("checked")===true){return X.ChecklistEnum.Checked}return X.ChecklistEnum.Unchecked},setCheckboxEnumState:function(e,t){switch(t){case X.ChecklistEnum.Disabled:{e.prop("disabled",true);e.prop("checked",false)}break;case X.ChecklistEnum.Checked:{e.prop("checked",true)}break;default:e.prop("checked",false)}e.trigger("change")},triggerCheckbox:function(e,t){var n=X.getCheckboxEnumState(e);if(t===X.ChecklistEnum.Checked&&n===X.ChecklistEnum.Unchecked||t===X.ChecklistEnum.Unchecked&&n===X.ChecklistEnum.Checked){e.trigger("click")}else if(t===X.ChecklistEnum.Disabled&&n!==X.ChecklistEnum.Disabled){e.trigger("dblclick")}},triggerCheckboxEnumState:function(e,t,n){var r=X.getChecklistItem(e,t);X.triggerCheckbox(n,r)},styleCheckbox:function(e,t,n){var r=X.getChecklistItem(e,t);switch(r){case X.ChecklistEnum.Disabled:{n.parent().removeClass("chlCheckboxChecked").addClass("chlCheckboxDisabled")}break;case X.ChecklistEnum.Checked:{n.parent().removeClass("chlCheckboxDisabled").addClass("chlCheckboxChecked")}break;default:{n.parent().removeClass("chlCheckboxDisabled").removeClass("chlCheckboxChecked")}}},initializeCheckboxlist:function(e,t,n){X.initializeChecklist(e,t.length,null,n);t.each(function(t){$(this).change(function(){var n=X.getCheckboxEnumState($(this));X.setChecklistItem(e,t,n)});X.triggerCheckboxEnumState(e,t,$(this))})},initializeTextlist:function(e,t,n,r,i){t.each(function(){var t=$(this).val();e.value.push(t);if(e.valueDefault){e.valueDefault.push(t)}});var s;if(localStorage[e.key]===undefined){localStorage[e.key]=e.value.join(I.cTextDelimiterChar)}else{var o=localStorage[e.key].split(I.cTextDelimiterChar);for(s=0;s<e.value.length;s++){if(o[s]){e.value[s]=o[s]}else{e.value[s]=""}}localStorage[e.key]=e.value.join(I.cTextDelimiterChar)}var u=function(){t.each(function(t){e.value[t]=$(this).val().replace(I.cTextDelimiterRegex,"")});localStorage[e.key]=e.value.join(I.cTextDelimiterChar)};t.each(function(t){$(this).attr("maxlength",r);$(this).val(e.value[t]);$(this).change(function(){if(n){I.write(n+" #"+(t+1)+" updated.")}u()})});if(i){i.click(function(){t.each(function(t){$(this).val(e.valueDefault[t]).trigger("change")})})}},initializeChainChecklist:function(){var e;var t;X.initializeChecklist(X.Checklists.Chain,C.Chains.length);X.initializeChecklist(X.Checklists.ChainSubscription,C.Chains.length);for(e in C.Chains){t=C.Chains[e];var n=$("#barChain_"+t.nexus);var r=$("#chnCheck_"+t.nexus);var i=$("#chnTime_"+t.nexus);switch(X.getChecklistItem(X.Checklists.Chain,t.nexus)){case X.ChecklistEnum.Unchecked:{}break;case X.ChecklistEnum.Checked:{n.css({opacity:K.iconOpacityChecked});r.addClass("chnChecked");if(O.Options.bol_hideChecked){n.hide()}}break;case X.ChecklistEnum.Disabled:{n.hide()}break}if(X.getChecklistItem(X.Checklists.ChainSubscription,t.nexus)===X.ChecklistEnum.Checked){i.addClass("chnTimeSubscribed")}i.click(function(){var e=U.getSubintegerFromHTMLID($(this));if(X.getChecklistItem(X.Checklists.ChainSubscription,e)===X.ChecklistEnum.Checked){$(this).removeClass("chnTimeSubscribed");X.setChecklistItem(X.Checklists.ChainSubscription,e,X.ChecklistEnum.Unchecked)}else{$(this).addClass("chnTimeSubscribed");X.setChecklistItem(X.Checklists.ChainSubscription,e,X.ChecklistEnum.Checked)}});r.click(function(){var e=U.getSubintegerFromHTMLID($(this));var t=$("#barChain_"+e);switch(X.getChecklistItem(X.Checklists.Chain,e)){case X.ChecklistEnum.Unchecked:{t.css({opacity:1}).animate({opacity:K.iconOpacityChecked},K.iconOpacitySpeed);$("#chnDetails_"+e).hide("fast");$(this).addClass("chnChecked");X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Checked)}break;case X.ChecklistEnum.Checked:{t.css({opacity:1}).show("fast");t.css({opacity:K.iconOpacityChecked}).animate({opacity:1},K.iconOpacitySpeed);$("#chnDetails_"+e).show("fast");$(this).removeClass("chnChecked");X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Unchecked)}break;case X.ChecklistEnum.Disabled:{t.css({opacity:1}).show("fast");$("#chnDetails_"+e).show("fast");$(this).removeClass("chnChecked");X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Unchecked)}break}if(X.getChecklistItem(X.Checklists.Chain,e)===X.ChecklistEnum.Checked){if(O.Options.bol_hideChecked){t.hide("fast")}else{t.show("fast")}}K.checkoffChainIcon(e)});$("#chnDelete_"+t.nexus).click(function(){var e=U.getSubintegerFromHTMLID($(this));var t=$("#barChain_"+e);t.hide("slow");X.setChecklistItem(X.Checklists.Chain,e,X.ChecklistEnum.Disabled);K.checkoffChainIcon(e)})}},getChainChecklistState:function(e){return X.getChecklistItem(X.Checklists.Chain,e.nexus)},initializeDungeonChecklist:function(){X.initializeChecklist(X.Checklists.Dungeon,$("#chlDungeon input").length);$("#chlDungeon .chlDungeonBar").each(function(){$(this).prepend("<img src='img/dungeon/"+$(this).data("name").toLowerCase()+I.cPNG+"' />")});var e=function(){var e=X.Checklists.Dungeon.money;var t=~~(e/E.Exchange.COPPER_IN_GOLD);var n=~~(e/E.Exchange.SILVER_IN_GOLD)%E.Exchange.COPPER_IN_SILVER;var r=e%E.Exchange.COPPER_IN_SILVER;$("#chlDungeonCalculator_Gold").text(t);$("#chlDungeonCalculator_Silver").text(n);$("#chlDungeonCalculator_Copper").text(r)};$("#chlDungeon input").each(function(t){$(this).change(function(){var n=X.getCheckboxEnumState($(this));X.setChecklistItem(X.Checklists.Dungeon,t,n);X.styleCheckbox(X.Checklists.Dungeon,t,$(this));var r=$("#chlDungeonCalculator");var i=X.Checklists.Dungeon.money;var s=$(this).data("money");switch($(this).data("mode")){case"E":s+=r.data("moneyaddexp");break}switch(n){case X.ChecklistEnum.Disabled:{X.Checklists.Dungeon.money=i-s}break;case X.ChecklistEnum.Checked:{X.Checklists.Dungeon.money=i+s}break;default:{X.Checklists.Dungeon.money=i-s}}e()})});$("#chlDungeon label").each(function(e){$(this).dblclick(function(){var t=$(this).find("input:first-child");if(t.prop("disabled")===false){if(t.prop("checked")===true){X.triggerCheckbox(t,X.ChecklistEnum.Unchecked)}t.prop("disabled",true).prop("checked",false)}else{t.prop("disabled",false)}X.setChecklistItem(X.Checklists.Dungeon,e,X.getCheckboxEnumState(t));X.styleCheckbox(X.Checklists.Dungeon,e,t)})});$("#chlDungeon input").each(function(e){X.triggerCheckboxEnumState(X.Checklists.Dungeon,e,$(this))});$("#chlDungeonUncheck").click(function(){X.clearChecklist(X.Checklists.Dungeon,X.ChecklistJob.UncheckTheChecked);$("#chlDungeon input").each(function(e){if($(this).prop("checked")===true){$(this).trigger("click")}X.styleCheckbox(X.Checklists.Dungeon,e,$(this))})})},initializeCustomChecklist:function(){var e=$("#chlCustom input:checkbox");X.initializeChecklist(X.Checklists.Custom,e.length);e.each(function(e){$(this).change(function(){var t=X.getCheckboxEnumState($(this));X.setChecklistItem(X.Checklists.Custom,e,t);X.styleCheckbox(X.Checklists.Custom,e,$(this));if(t===X.ChecklistEnum.Checked){$(this).parent().next().addClass("chlCustomTextChecked")}else{$(this).parent().next().removeClass("chlCustomTextChecked")}});X.triggerCheckboxEnumState(X.Checklists.Custom,e,$(this))});$("#chlCustomUncheck").click(function(){X.clearChecklist(X.Checklists.Custom,X.ChecklistJob.UncheckTheChecked);$("#chlCustom input:checkbox").each(function(e){if($(this).prop("checked")===true){$(this).trigger("click")}X.styleCheckbox(X.Checklists.Custom,e,$(this))})});var t=$("#chlCustom input:text");var n=$("#chlCustomRestore");X.initializeTextlist(X.Textlists.CustomText,t,"Custom checklist item",48,n)},initializeNotepad:function(){$("#chlNotepadButtons button").each(function(e){$(this).click(function(){$("#chlNotepadSheets textarea").hide().eq(e).show().css({opacity:.5}).animate({opacity:1},400);$("#chlNotepadButtons button").removeClass("btnFocused");$(this).addClass("btnFocused")})}).first().click();var e=$("#chlNotepadSheets textarea");var t=$("#chlNotepadRestore");X.initializeTextlist(X.Textlists.NotepadText,e,"Notepad sheet",4096,t);e.css("height",O.Options.int_sizeNotepadHeight);e.css("font-size",O.Options.int_sizeNotepadFont);e.first().show()}};E={Exchange:{COPPER_IN_SILVER:100,COPPER_IN_GOLD:1e4,SILVER_IN_GOLD:100,CENTS_IN_DOLLAR:100,GEM_PER_DOLLAR:.8,DOLLAR_PER_GEM:1.25,GEM_SAMPLE:100,COIN_SAMPLE:1e6},Rarity:{Junk:0,Basic:1,Fine:2,Masterwork:3,Rare:4,Exotic:5,Ascended:6,Legendary:7},cNUM_ITEM_RARITIES:8,cREFRESH_LIMIT:5e3,cSEARCH_LIMIT:750,cEXCHANGE_LIMIT:250,isTradingCalculatorsInitialized:false,RefreshTimeout:{},ProgressTimeout:{},ProgressWait:0,ProgressTick:0,CalculatorHistoryArray:new Array(64),CalcHistoryIndex:0,copper:function(e){return"<copper>"+e+"</copper>"},silver:function(e){return"<silver>"+e+"</silver>"},gold:function(e){return"<gold>"+e+"</gold>"},parseCoinString:function(e){if(e===undefined||e===null){return 0}var t=e.split(".");var n=t.length;var r=0,i=0,s=0;if(n===0){return 0}if(n===1){i=parseInt(t[0])}if(n>=2){r=parseInt(t[n-1]);i=parseInt(t[n-2])}if(n===2&&t[n-1].length===1){r=r*T.cBASE_10}if(n>=3){s=parseInt(t[n-3])}if(!isFinite(r)){r=0}if(!isFinite(i)){i=0}if(!isFinite(s)){s=0}return parseInt(r+i*E.Exchange.COPPER_IN_SILVER+s*E.Exchange.COPPER_IN_GOLD)},parseGemString:function(e){if(e===undefined||e===null){return 0}if(!isFinite(parseInt(e))){return 0}return parseInt(e)},parseQuantityString:function(e){var t=parseInt(e);if(!isFinite(t)){t=1}return t},createCoinString:function(e){if(e===undefined||isFinite(e)===false){return"0.00"}e=parseInt(e);var t=Math.abs(~~(e/E.Exchange.COPPER_IN_GOLD));var n=Math.abs(~~(e/E.Exchange.SILVER_IN_GOLD)%E.Exchange.COPPER_IN_SILVER);var r=Math.abs(e%E.Exchange.COPPER_IN_SILVER);var i=e<0?"−":"";if(t>0&&n<T.cBASE_10){n="0"+n}if(r<T.cBASE_10){r="0"+r}if(t>0){return i+t+"."+n+"."+r}if(n>0){return i+n+"."+r}return i+"0."+r},parseMoneyString:function(e){if(e===undefined||e===null){return 0}var t=e.split(".");var n=t.length;var r=0,i=0;if(n===0){return 0}if(n===1){i=parseInt(t[0])}if(n>=2){r=parseInt(t[n-1]);i=parseInt(t[n-2])}if(n>=2&&t[n-1].length===1){r=r*T.cBASE_10}else if(n>=2&&t[n-1].length>=2){r=parseInt(r.toString().substring(0,2))}if(!isFinite(r)){r=0}if(!isFinite(i)){i=0}return parseInt(r+i*E.Exchange.CENTS_IN_DOLLAR)},createMoneyString:function(e){if(e===undefined||isFinite(e)===false){return"0.00"}e=parseInt(e);var t=Math.abs(~~(e/E.Exchange.CENTS_IN_DOLLAR));var n=Math.abs(e%E.Exchange.CENTS_IN_DOLLAR);var r=e<0?"−":"";if(n<T.cBASE_10){n="0"+n}return r+t+"."+n},createPercentString:function(e,t){if(e===undefined||isFinite(e)===false){return"0%"}if(t===undefined){t=0}var n=e<0?"−":"";return n+Math.abs(e*100).toFixed(t)+"%"},setRarityClass:function(e,t){e.each(function(){for(var e=0;e<E.cNUM_ITEM_RARITIES;e++){$(this).removeClass("rarity"+e.toString())}});if(E.Rarity[t]!==undefined){e.addClass("rarity"+E.Rarity[t].toString())}},animateValue:function(e,t,n){if(n<t){e.css({color:"#ff2200"}).animate({color:"#ffeebb"},5e3)}else if(n>t){e.css({color:"#44dd44"}).animate({color:"#ffeebb"},5e3)}else{e.css({"border-radius":32}).animate({"border-radius":4},1e3)}},calculateTrading:function(e){var t=.05;var n=.1;var r=t+n;var i=1-r;var s=E.parseCoinString(e.find(".trdBuy").val());var o=E.parseCoinString(e.find(".trdSell").val());var u=E.parseQuantityString(e.find(".trdQuantity").val());var a=e.find(".trdCost");var f=e.find(".trdTax");var l=e.find(".trdRevenue");var c=e.find(".trdProfit");var h=e.find(".trdBreak");var p=e.find(".trdMargin");var d=(o-o*r-s)*u;var v=(o-o*n)*u;var m=s*u;var g=o*t*u;var y=o*n*u;a.val("−"+E.createCoinString(Math.round(m)));f.val("−"+E.createCoinString(Math.round(g))+" + −"+E.createCoinString(Math.round(y)));h.val(E.createCoinString(Math.round(s/i)));l.val(E.createCoinString(Math.round(v)));c.val(E.createCoinString(Math.round(d)));p.val(E.createPercentString(v/(m+g)-1,2));$([c,p]).each(function(){var e=Math.round(d);$(this).removeClass("trdZero trdGain trdLoss");if(e===0){$(this).addClass("trdZero")}else if(e>0){$(this).addClass("trdGain")}else if(e<0){$(this).addClass("trdLoss")}})},updateTradingDetails:function(e){var t=e.find(".trdName").val();var n=e.find(".trdItem").val();if(isFinite(parseInt(n))===false||t.length===0){return}$.getJSON(U.URL_API.ItemDetails+n,function(t){E.setRarityClass(e.find(".trdName"),t.rarity);e.find(".trdIcon").attr("src",U.getAssetIconURL(t));e.find(".trdLink").val(U.getChatlinkFromItemID(n))})},updateTradingPrices:function(e){var t=encodeURIComponent(e.find(".trdName").val());var n=e.find(".trdItem").val();if(isFinite(parseInt(n))===false||t.length===0){return}var r=0,i=0;var s=0,o=0;var u=e.find(".trdName");var a=e.find(".trdCurrentBuy");var f=e.find(".trdCurrentSell");var l=e.find(".trdNotifyBuyLow");var c=e.find(".trdNotifyBuyHigh");var h=e.find(".trdNotifySellLow");var p=e.find(".trdNotifySellHigh");var d=E.parseCoinString(l.val());var v=E.parseCoinString(c.val());var m=E.parseCoinString(h.val());var g=E.parseCoinString(p.val());$.getJSON(U.URL_API.ItemPrices+n,function(t){r=E.parseCoinString(e.find(".trdCurrentBuy").first().val());i=E.parseCoinString(e.find(".trdCurrentSell").first().val());if(t.buys!==undefined){s=parseInt(t.buys.unit_price)}if(t.sells!==undefined){o=parseInt(t.sells.unit_price)}a.val(E.createCoinString(s));f.val(E.createCoinString(o));if(X.getChecklistItem(X.Checklists.TradingOverwrite,U.getSubintegerFromHTMLID(e))===X.ChecklistEnum.Checked){e.find(".trdBuy").val(a.val()).trigger("input");e.find(".trdSell").val(f.val()).trigger("input")}}).done(function(){E.animateValue(a,r,s);E.animateValue(f,i,o);if(X.isChecked(X.Checklists.TradingNotify,e)){u.removeClass("trdMatched");if(s<=d&&d!==0&&s!==0){u.addClass("trdMatched");l.addClass("trdMatched");D.speak(D.getString("buy low")+" "+t)}else{l.removeClass("trdMatched")}if(s>=v&&v!==0&&s!==0){u.addClass("trdMatched");c.addClass("trdMatched");D.speak(D.getString("buy high")+" "+t)}else{c.removeClass("trdMatched")}if(o<=m&&m!==0&&o!==0){u.addClass("trdMatched");h.addClass("trdMatched");D.speak(D.getString("sell low")+" "+t)}else{h.removeClass("trdMatched")}if(o>=g&&g!==0&&o!==0){u.addClass("trdMatched");p.addClass("trdMatched");D.speak(D.getString("sell high")+" "+t)}else{p.removeClass("trdMatched")}}}).fail(function(){I.write("Error retrieving API data for "+U.escapeHTML(e.find(".trdName").val()))})},updateAllTradingDetails:function(){$("#trdList .trdEntry").each(function(){E.updateTradingDetails($(this))})},updateAllTradingPrices:function(){$("#trdList .trdEntry").each(function(){E.updateTradingPrices($(this))})},clearCalculator:function(e){E.setRarityClass(e.find(".trdName"));e.find(".trdIcon").attr("src",U.URL_IMG.Placeholder);e.find(".trdItem").val("").trigger("change");e.find(".trdCurrentBuy").val("");e.find(".trdCurrentSell").val("");e.find(".trdLink").val("");e.find(".trdResultsContainer").remove();e.find(".trdName").removeClass("trdMatched");e.find(".trdNotifyBuyLow").val("").trigger("change").removeClass("trdMatched");e.find(".trdNotifyBuyHigh").val("").trigger("change").removeClass("trdMatched");e.find(".trdNotifySellLow").val("").trigger("change").removeClass("trdMatched");e.find(".trdNotifySellHigh").val("").trigger("change").removeClass("trdMatched")},initializeTrading:function(){var e;var t="";var n,r,i,s;for(e=0;e<O.Options.int_numTradingCalculators;e++){t="#trdEntry_"+e;$("#trdList").append("<div id='trdEntry_"+e+"' class='trdEntry'>"+"<div class='trdAccordion trdAccordionShut'>"+"<samp><img class='trdIcon' src='"+U.URL_IMG.Placeholder+"' /></samp>"+"<input class='trdItem' type='text' />"+"<div class='trdResultsFocus'><input class='trdName' type='text' /></div>"+"<div class='trdButtons'>"+"<button class='trdSearch' tabindex='-1'>S</button><button class='trdWiki' tabindex='-1'>W</button><br />"+"</div>"+"<div class='trdExpand'>"+"<samp>$~O</samp><input class='trdBuy' type='text' />"+"<samp>−$~</samp><input class='trdCost trdOutput' type='text' tabindex='-1' /><br />"+"<samp>O~$</samp><input class='trdSell' type='text' />"+"<samp>$=$</samp><input class='trdBreak trdOutput' type='text' tabindex='-1' /><br />"+"<samp>×</samp><input class='trdQuantity' type='text' />"+"<samp>−$%</samp><input class='trdTax trdOutput' type='text' tabindex='-1' /><br />"+"<samp>+$</samp><input class='trdProfit trdOutput' type='text' tabindex='-1' />"+"<samp>=$</samp><input class='trdRevenue trdOutput' type='text' tabindex='-1' /><br />"+"<samp>+$%</samp><input class='trdMargin trdOutput' type='text' tabindex='-1' />"+"<samp>[]</samp><input class='trdLink trdOutput' type='text' tabindex='-1' /><br />"+"<samp>$~!</samp>"+"<input class='trdNotifyBuyHigh' type='text' />"+"<input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' />"+"<input class='trdNotifyBuyLow' type='text' />"+"<label title='<dfn>"+D.getSentence("overwrite")+"</dfn>: Replace your buy and sell prices with the current prices when refreshing.'>"+"<input class='trdOverwrite' type='checkbox' tabindex='-1' />&zwnj;</label>"+"<samp>!~$</samp>"+"<input class='trdNotifySellHigh' type='text' />"+"<input class='trdCurrentSell trdOutput' type='text' tabindex='-1' />"+"<input class='trdNotifySellLow' type='text' />"+"<label title='<dfn>"+D.getSentence("notify")+"</dfn>: Turn on sound notification for this item.'>"+"<input class='trdNotify' type='checkbox' tabindex='-1' />&zwnj;</label>"+"<br /><br /></div>"+"</div>"+"<div class='trdPreview'>"+"<input class='trdCurrentBuy trdOutput' type='text' tabindex='-1' />"+"<input class='trdCurrentSell trdOutput' type='text' tabindex='-1' />"+"</div>"+"</div>");I.qTip.init($(t+" .trdOverwrite").parent());I.qTip.init($(t+" .trdNotify").parent());n=$(t+" .trdName");r=$(t+" .trdBuy");i=$(t+" .trdSell");s=$(t+" .trdQuantity");$(t+" input").click(function(){$(this).select()});$(t+" .trdWiki").click(function(){var e=$(this).parents(".trdEntry").find(".trdName").val();U.openExternalURL(U.getWikiLink(e))});$(t+" .trdSearch").click(function(){var e=$(this).parents(".trdEntry").find(".trdItem").val();var t=$(this).parents(".trdEntry").find(".trdName").val();if(e.length===0){U.openExternalURL(U.getTradingSearchLink(t))}else{U.openExternalURL(U.getTradingItemLink(e,t))}});$([r,i,s]).each(function(){$(this).on("input",function(){E.calculateTrading($(this).parent())})});$(t+" .trdCurrentBuy, "+t+" .trdCurrentSell").each(function(){$(this).dblclick(function(){var e=E.parseCoinString($(this).val());if(e!==0){$(this).prev().val(E.createCoinString(e+1)).trigger("change");$(this).next().val(E.createCoinString(e-1)).trigger("change");E.updateTradingPrices($(this).parents(".trdEntry"))}})});$(n).on("input",$.throttle(E.cSEARCH_LIMIT,function(){var e=$(this).val();var t=$(this).parents(".trdEntry");var n,r;if(e.length<3){E.clearCalculator(t);return}$.getJSON(U.URL_API.ItemSearch+e,function(i){t.find(".trdResultsContainer").remove();var s;var o,u;if(i.results.length>0){n=$("<div class='trdResultsContainer jsRemovable'></div>").insertAfter(t.find(".trdName"));r=$("<div class='trdResults cntPopup'></div>").appendTo(n);for(s=0;s<i.results.length&&s<O.Options.int_numTradingResults;s++){o=i.results[s];u=$("<ins class='rarity"+o.rarity+"' data-id='"+o.data_id+"' "+"data-buy='"+E.createCoinString(o.max_offer_unit_price)+"' "+"data-sell='"+E.createCoinString(o.min_sale_unit_price)+"'>"+"<img src='"+o.img+"'>"+U.wrapSubstringHTML(o.name,e,"u")+"</ins>").appendTo(r);u.click(function(){var e=$(this).parents(".trdResultsContainer");var t=e.parents(".trdEntry");t.find(".trdItem").val($(this).data("id")).trigger("change");t.find(".trdName").val($(this).text()).trigger("change");E.updateTradingDetails(t);E.updateTradingPrices(t);e.remove()})}}})})).onEnterKey(function(){U.openExternalURL(U.getTradingSearchLink($(this).val()))}).onEscapeKey(function(){$(this).parents(".trdEntry").find(".trdResultsContainer").remove()}).click(function(){$(this).trigger("input")})}t="#trdEntry_"+0;$(t+" .trdIcon").attr("src","img/ui/faq.png");$(t+" .trdName").val("Bifrost");$(t+" .trdBuy").val("4500.37.68");$(t+" .trdSell").val("550037.68");$(t+" .trdQuantity").val("1");$(t).css("margin-bottom","6px");var o=function(e,n,r){if(r===undefined){r=""}else{r=": "+r}$(t+" .trd"+e).attr("title","<dfn>"+D.getString(n)+"</dfn>"+r)};o("Name","name");o("Buy","your buy");o("Sell","your sell");o("Quantity","quantity");o("Cost","cost","Money needed to buy the items.");o("Break","breakpoint","Sell higher than this to make a profit.");o("Tax","tax","Pay 5% fee of sell price to list, and deduct 10% tax of sell price when sold.");o("Profit","profit","Gains after losses from buying and tax.");o("Margin","margin","Revenue over cost and fee.");o("Revenue","revenue","What you will receive at the trader.");o("Link","chatlink","Paste this in game chat to see the item.");o("NotifyBuyLow","notify if current buy < this buy");o("NotifyBuyHigh","notify if this buy < current buy");o("NotifySellLow","notify if current sell < this sell");o("NotifySellHigh","notify if this sell < current sell");o("CurrentBuy","current buy","Double click to flank price.");o("CurrentSell","current sell","Double click to flank price.");I.qTip.init($(t+" input"));X.initializeTextlist(X.Textlists.TradingItem,$("#trdList .trdItem"),null,16);X.initializeTextlist(X.Textlists.TradingName,$("#trdList .trdName"),null,64);X.initializeTextlist(X.Textlists.TradingBuy,$("#trdList .trdBuy"),null,16);X.initializeTextlist(X.Textlists.TradingSell,$("#trdList .trdSell"),null,16);X.initializeTextlist(X.Textlists.TradingQuantity,$("#trdList .trdQuantity"),null,16);X.initializeTextlist(X.Textlists.NotifyBuyLow,$("#trdList .trdNotifyBuyLow"),null,16);X.initializeTextlist(X.Textlists.NotifyBuyHigh,$("#trdList .trdNotifyBuyHigh"),null,16);X.initializeTextlist(X.Textlists.NotifySellLow,$("#trdList .trdNotifySellLow"),null,16);X.initializeTextlist(X.Textlists.NotifySellHigh,$("#trdList .trdNotifySellHigh"),null,16);X.initializeCheckboxlist(X.Checklists.TradingOverwrite,$("#trdList .trdOverwrite"),X.ChecklistJob.AllChecked);X.initializeCheckboxlist(X.Checklists.TradingNotify,$("#trdList .trdNotify"),X.ChecklistJob.AllChecked);$("#trdList .trdSell").trigger("input");E.updateAllTradingDetails();$("#trdToggle").click(function(){if($("#trdEntry_0 .trdBuy").is(":visible")){$(".trdAccordion").addClass("trdAccordionShut").removeClass("trdAccordionOpen");$(".trdPreview").removeClass("cssHidden")}else{$(".trdAccordion").removeClass("trdAccordionShut").addClass("trdAccordionOpen");$(".trdPreview").addClass("cssHidden")}});$("#trdRefresh").click($.throttle(E.cREFRESH_LIMIT,function(){E.loopRefresh(true)}));$("#trdMute").click(function(){D.resetSpeechQueue()})},updateCoinTo:function(e){var t=0,n=0;var r=0,i=0;var s=0,o=0;var u=0,a=0;var f=$("#trdExchange .trdCoinTo");var l=$("#trdExchange .trdCoinToGem");var c=$("#trdExchange .trdCoinToMoney");var h=$("#trdExchange .trdCoinToGemInverse");var p=$("#trdExchange .trdCoinToMoneyInverse");var d=0;var v=E.parseCoinString(f.val());if(v===0){l.val("");c.val("");h.val("");p.val("")}else{$.getJSON(U.URL_API.GemPrice+v,function(e){if(e.quantity!==undefined){t=parseInt(l.val());r=E.parseMoneyString(c.val());n=parseInt(e.quantity);i=Math.round(n*E.Exchange.DOLLAR_PER_GEM);l.val(n);c.val(E.createMoneyString(i))}}).always(function(){if(e===undefined||e){E.animateValue(l,t,n);E.animateValue(c,r,i)}if(n===0){l.val("0");c.val("0")}});$.getJSON(U.URL_API.CoinPrice+E.Exchange.GEM_SAMPLE,function(e){if(e.quantity!==undefined){d=E.Exchange.GEM_SAMPLE/e.quantity}}).always(function(){if(d!==0){s=parseInt(h.val());u=E.parseMoneyString(p.val());o=Math.round(v*d);a=Math.round(o*E.Exchange.DOLLAR_PER_GEM);h.val(o);p.val(E.createMoneyString(a));if(e===undefined||e){E.animateValue(h,s,o);E.animateValue(p,u,a)}}})}},updateGemTo:function(e){var t=0,n=0;var r=0,i=0;var s=0,o=0;var u=$("#trdExchange .trdGemTo");var a=$("#trdExchange .trdGemToCoin");var f=$("#trdExchange .trdGemToMoney");var l=$("#trdExchange .trdGemToCoinInverse");var c=0;var h=u.val();if(h===0){a.val("");f.val("")}else{$.getJSON(U.URL_API.CoinPrice+h,function(e){if(e.quantity!==undefined){t=E.parseCoinString(a.val());r=E.parseMoneyString(f.val());n=parseInt(e.quantity);i=parseInt(h*E.Exchange.DOLLAR_PER_GEM);a.val(E.createCoinString(n));f.val(E.createMoneyString(i))}}).always(function(){if(e===undefined||e){E.animateValue(a,t,n);E.animateValue(f,r,i)}if(n===0){a.val("0");f.val("0")}});$.getJSON(U.URL_API.GemPrice+E.Exchange.COIN_SAMPLE,function(e){if(e.quantity!==undefined){c=E.Exchange.COIN_SAMPLE/e.quantity}}).always(function(){if(c!==0){s=E.parseCoinString(l.val());o=Math.round(h*c);l.val(E.createCoinString(o));if(e===undefined||e){E.animateValue(l,s,o)}}})}},updateMoneyTo:function(e){var t=0,n=0;var r=0,i=0;var s=$("#trdExchange .trdMoneyTo");var o=$("#trdExchange .trdMoneyToGem");var u=$("#trdExchange .trdMoneyToCoin");var a=E.parseMoneyString(s.val());var f=a*E.Exchange.GEM_PER_DOLLAR;if(a===0){o.val("");u.val("")}else{$.getJSON(U.URL_API.CoinPrice+f,function(e){if(e.quantity!==undefined){t=parseInt(o.val());r=E.parseCoinString(u.val());n=f;i=parseInt(e.quantity);o.val(f);u.val(E.createCoinString(i))}}).always(function(){if(e===undefined||e){E.animateValue(o,t,n);E.animateValue(u,r,i)}if(i===0){o.val("0");u.val("0")}})}},updateNotifyCoinTo:function(e){var t=0,n=0;var r=$("#trdExchange .trdNotifyCoinTo");var i=$("#trdExchange .trdNotifyCoinToGem");var s=$("#trdExchange .trdNotifyCoinToGemHigh");var o=E.parseGemString(s.val());var u=E.parseCoinString(r.val());if(u===0){i.val("")}else{$.getJSON(U.URL_API.GemPrice+u,function(e){if(e.quantity!==undefined){t=parseInt(i.val());n=parseInt(e.quantity);i.val(n)}}).always(function(){if(e===undefined||e){E.animateValue(i,t,n)}if(n===0){i.val("0")}else if(n>=o&&o!==0){s.addClass("trdMatched");D.speak(D.getString("buy gem high"))}else{s.removeClass("trdMatched")}})}},updateNotifyGemTo:function(e){var t=0,n=0;var r=$("#trdExchange .trdNotifyGemTo");var i=$("#trdExchange .trdNotifyGemToCoin");var s=$("#trdExchange .trdNotifyGemToCoinHigh");var o=E.parseCoinString(s.val());var u=r.val();if(u===0){i.val("")}else{$.getJSON(U.URL_API.CoinPrice+u,function(e){if(e.quantity!==undefined){t=E.parseCoinString(i.val());n=parseInt(e.quantity);i.val(E.createCoinString(n))}}).always(function(){if(e===undefined||e){E.animateValue(i,t,n)}if(n===0){i.val("0")}else if(n>=o&&o!==0){s.addClass("trdMatched");D.speak(D.getString("buy coin high"))}else{s.removeClass("trdMatched")}})}},updateAllExchange:function(){E.updateCoinTo();E.updateGemTo();E.updateMoneyTo();E.updateNotifyCoinTo();E.updateNotifyGemTo()},initializeExchange:function(){var e=$("#trdExchange .trdCoinTo");var t=$("#trdExchange .trdGemTo");var n=$("#trdExchange .trdMoneyTo");var r=$("#trdExchange .trdNotifyCoinTo");var i=$("#trdExchange .trdNotifyGemTo");var s=$("#trdExchange .trdNotifyCoinToGemHigh");var o=$("#trdExchange .trdNotifyGemToCoinHigh");e.val("200..");t.val("4000");n.val("50");var u=function(e,t){$("#trdExchange .trd"+e).attr("title","<dfn>"+D.getString(t)+"</dfn>")};u("CoinTo","your coin");u("GemTo","your gem");u("MoneyTo","your dollar");u("CoinToGem","your coin to gem");u("GemToCoin","your gem to coin");u("MoneyToGem","your dollar to gem");u("CoinToMoney","your coin to dollar");u("GemToMoney","your gem to dollar");u("MoneyToCoin","your dollar to coin");u("CoinToGemInverse","gem to your coin");u("GemToCoinInverse","coin to your gem");u("CoinToMoneyInverse","dollar to your coin");u("NotifyCoinTo","your coin");u("NotifyGemTo","your gem");u("NotifyCoinToGem","your coin to current gem");u("NotifyGemToCoin","your gem to current coin");u("NotifyCoinToGemHigh","notify if current gem > this gem");u("NotifyGemToCoinHigh","notify if current coin > this coin");I.qTip.init($("#trdExchange input"));$("#trdExchange input").click(function(){$(this).select()});e.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateCoinTo(false)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateCoinTo()}));t.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateGemTo(false)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateGemTo()}));n.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateMoneyTo(false)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateMoneyTo()}));r.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyCoinTo(false)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyCoinTo()}));i.on("input",$.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyGemTo(false)})).onEnterKey($.throttle(E.cEXCHANGE_LIMIT,function(){E.updateNotifyGemTo()}));X.initializeTextlist(X.Textlists.ExchangeUnit,$([e,t,n,r,i,s,o]),null,16);$(".trdProgress").data("width",$(".trdProgress").width());E.isTradingCalculatorsInitialized=true;E.loopRefresh()},cancelLoopRefresh:function(){window.clearTimeout(E.ProgressTimeout);window.clearTimeout(E.RefreshTimeout);$(".trdProgress").width($(".trdProgress").data("width"))},animateProgress:function(){var e=$(".trdProgress");if(E.ProgressTick<E.ProgressWait){e.width(e.width()-e.data("width")/E.ProgressWait)}E.ProgressTick-=1;E.ProgressTimeout=setTimeout(E.animateProgress,T.cMILLISECONDS_IN_SECOND)},loopRefresh:function(e){E.cancelLoopRefresh();if(e===true||O.Options.bol_refreshPrices){E.updateAllTradingPrices();E.updateAllExchange();if(O.Options.bol_refreshPrices){var t=O.Options.int_secTradingRefresh*T.cMILLISECONDS_IN_SECOND;E.ProgressTick=O.Options.int_secTradingRefresh;E.ProgressWait=O.Options.int_secTradingRefresh;E.animateProgress();E.RefreshTimeout=setTimeout(E.loopRefresh,t)}}},initializeCalculator:function(){$("#trdCalculation .trdCalculator").onEnterKey(function(){E.doCalculation($(this))}).click(function(){$(this).select()});$("#trdCalculation .trdCalcSubmit").click(function(){E.doCalculation($(this).prev())});for(var e in E.CalculatorHistoryArray){E.CalculatorHistoryArray[e]=""}$("#trdCalculation .trdCalculator").onArrowUpKey(function(){if(E.CalcHistoryIndex===0){var e=U.stripToCalculation($(this).val());if(E.CalculatorHistoryArray[0]!==$(this).val().toString()){E.CalculatorHistoryArray.pop();E.CalculatorHistoryArray.unshift(e)}}if(E.CalcHistoryIndex+1<E.CalculatorHistoryArray.length){E.CalcHistoryIndex++;$(this).val(E.CalculatorHistoryArray[E.CalcHistoryIndex])}});$("#trdCalculation .trdCalculator").onArrowDownKey(function(){if(E.CalcHistoryIndex-1>=0){E.CalcHistoryIndex--;$(this).val(E.CalculatorHistoryArray[E.CalcHistoryIndex])}})},doCalculation:function(pCalculator){var expression=U.stripToCalculation(pCalculator.val());var result="";try{result=eval(expression)}catch(pException){}pCalculator.val(parseFloat(result)).select();if(result.toString().length>0){E.CalculatorHistoryArray.pop();E.CalculatorHistoryArray.unshift(expression);E.CalcHistoryIndex=0}}};D={Phrase:{s_TEMPLATE:{de:"",es:"",fr:"",cs:"",it:"",pl:"",pt:"",ru:"",zh:""},s_h:{de:"s",es:"h",fr:"h",cs:"h",it:"o",pl:"g",pt:"h",ru:"ч",zh:"時"},s_m:{de:"m",es:"m",fr:"m",cs:"m",it:"m",pl:"m",pt:"m",ru:"м",zh:"分"},s_s:{de:"s",es:"s",fr:"s",cs:"s",it:"s",pl:"s",pt:"s",ru:"с",zh:"秒"},s_hour:{de:"stunde",es:"hora",fr:"heure",cs:"hodina",it:"ora",pl:"godzinę",pt:"hora",ru:"час",zh:"時"},s_minute:{de:"minute",es:"minuto",fr:"minute",cs:"minuta",it:"minuto",pl:"minuta",pt:"minuto",ru:"минута",zh:"分"},s_second:{de:"sekunde",es:"segundo",fr:"seconde",cs:"sekunda",it:"secondo",pl:"sekund",pt:"segundo",ru:"секунду",zh:"秒"},s_hours:{de:"studen",es:"horas",fr:"heures",cs:"hodin",it:"secondi",pl:"godzin",pt:"horas",ru:"часов",zh:"時"},s_minutes:{de:"minuten",es:"minutos",fr:"minutes",cs:"minut",it:"minuti",pl:"minut",pt:"minutos",ru:"минут",zh:"分"},s_seconds:{de:"sekunden",es:"segundos",fr:"secondes",cs:"sekund",it:"ore",pl:"sekund",pt:"segundos",ru:"секунд",zh:"秒"},s_half_an_hour:{de:"eine halbe stunde",es:"media hora",fr:"demi-heure",cs:"půl hodiny",it:"mezz'ora",pl:"pół godziny",pt:"meia hora",ru:"полчаса",zh:"半小時"},s_world_boss:{de:"weltboss",es:"jefe mundo",fr:"chef monde",cs:"svět boss",it:"boss mondo",pl:"świat szef",pt:"chefe mundo",ru:"мир босс",zh:"世界頭目"},s_section:{de:"paragraph",es:"sección",fr:"section",cs:"oddíl",it:"sezione",pl:"sekcja",pt:"seção",ru:"параграф",zh:"節"},s_Vista:{de:"Aussichtspunkt",es:"Vista",fr:"Panorama"},s_Skill_Challenge:{de:"Fertigkeitspunkt",es:"Desafío de habilidad",fr:"Défi de compétence"},s_checklist:{de:"prüfliste",es:"lista de comprobación",fr:"liste de contrôle",cs:"kontrolní seznam",it:"elenco di controllo",pl:"lista kontrolna",pt:"lista de verificação",ru:"контрольный список",zh:"檢查清單"},s_subscription:{de:"abonnement",es:"suscripción",fr:"abonnement",cs:"předplatné",it:"sottoscrizione",pl:"abonament",pt:"assinatura",ru:"подписка",zh:"訂閱"},s_alarm:{de:"alarm",es:"alarma",fr:"alarme",cs:"alarmu",it:"allarme",pl:"alarmu",pt:"alarme",ru:"будильник",zh:"鬧鐘"},s_mode:{de:"modus",es:"modo",fr:"mode",cs:"režim",it:"modalità",pl:"tryb",pt:"modo",ru:"режим",zh:"方式"},s_chatlink:{de:"chatlink",es:"vínculo chat",fr:"lien chat",cs:"chat odkaz",it:"collegamento chat",pl:"czat łącze",pt:"link bate-papo",ru:"чат связь",zh:"連結聊天"},s_is:{de:"ist",es:"es",fr:"est",cs:"je",it:"è",pl:"jest",pt:"é",ru:"является",zh:"是"},s_subscribe:{de:"abonnieren",es:"subscribir",fr:"abonner",cs:"předplatit si",it:"sottoscrivere",pl:"abonować",pt:"assinar",ru:"подписываться",zh:"訂閱"},s_will_start:{de:"wird starten",es:"se iniciará",fr:"débutera",cs:"začne",it:"inizierà",pl:"rozpocznie się",pt:"começará",ru:"начнется",zh:"開始"},s_ago:{de:"vor",es:"hace",fr:"il ya",cs:"před",it:"fa",pl:"temu",pt:"há",ru:"назад",zh:"前"},s_also:{de:"auch",es:"también",fr:"aussi",cs:"také",it:"anche",pl:"też",pt:"também",ru:"то́же",zh:"也"},s_checked:{de:"abgehakt",es:"visto",fr:"coché",cs:"odškrtnout",it:"controllato",pl:"zakończony",pt:"marcado",ru:"галочка",zh:"勾掉"},s_current:{de:"aktuelle",es:"actual",fr:"actuel",cs:"současný",it:"corrente",pl:"bieżący",pt:"corrente",ru:"текущий",zh:"活期"},s_next:{de:"nächste",es:"siguiente",fr:"prochain",cs:"příští",it:"seguente",pl:"następny",pt:"próximo",ru:"следующий",zh:"下一"},s_off:{de:"aus",es:"desactivado",fr:"désactivé",cs:"vypnuto",it:"disattivato",pl:"wyłączany",pt:"desativado",ru:"выключено",zh:"關"},s_subscribed:{de:"abonniert",es:"suscrito",fr:"souscrit",cs:"odebírané",it:"sottoscritti",pl:"subskrypcji",pt:"assinado",ru:"подписал",zh:"訂閱"},s_then:{de:"dann",es:"luego",fr:"puis",cs:"pak",it:"poi",pl:"potem",pt:"então",ru:"затем",zh:"接著"},s_and:{de:"und",es:"y",fr:"et",cs:"a",it:"e",pl:"i",pt:"e",ru:"и",zh:"和"},s_if:{de:"wenn",es:"si",fr:"si",cs:"jestliže",it:"se",pl:"jeśli",pt:"se",ru:"если",zh:"如果"},s_in:{de:"in",es:"en",fr:"en",cs:"za",it:"in",pl:"w",pt:"em",ru:"в",zh:"在"},s_to:{de:"zu",es:"a",fr:"contre",cs:"ku",it:"a",pl:"na",pt:"a",ru:"до",zh:"比"},s_Scheduled_Bosses:{de:"Geplant",es:"Programado",fr:"Planifié",cs:"Plánované",it:"Pianificata",pl:"Zaplanowane",pt:"Agendado",ru:"Запланирован",zh:"已排程"},s_Legacy_Bosses:{de:"Legacy",es:"Heredado",fr:"Hérité",cs:"Starší",it:"Legacy",pl:"Starsze",pt:"Herdado",ru:"Устаревший",zh:"舊版"},s_Orr_Temples:{de:"Tempel",es:"Templos",fr:"Temples",cs:"Chrámy",it:"Templi",pl:"Świątynie",pt:"Templos",ru:"Храмы",zh:"寺廟"},s_Full_Timetable:{de:"Zeitplan",es:"Horario",fr:"Horaire",cs:"Plán",it:"Programma",pl:"Harmonogram",pt:"Horário",ru:"Расписание",zh:"時間表"},s_news:{de:"nachrichten",es:"noticias",fr:"actualités",cs:"zprávy",it:"notizie",pl:"wiadomości",pt:"notícias",ru:"новости",zh:"新聞"},s_simple_mode:{de:"einfach modus",es:"modo simple",fr:"mode simple",cs:"prostý režim",it:"modalità semplice",pl:"prosty tryb",pt:"modo simples",ru:"простой режим",zh:"方式簡單"},s_chests:{de:"schatztruhen",es:"cofres del tesoro",fr:"coffres au trésor",cs:"truhly",it:"scrigni del tesoro",pl:"skrzynie",pt:"baús de tesouro",ru:"сундуки с сокровищами",zh:"寶箱"},s_this:{de:"dieses",es:"esto",fr:"ce",cs:"toto",it:"questo",pl:"to",pt:"isto",ru:"это",zh:"這"},s_your:{de:"dein",es:"tu",fr:"ton",cs:"tvůj",it:"tuo",pl:"twój",pt:"teu",ru:"твой",zh:"你的"},s_name:{de:"namen",es:"nombre",fr:"nom",cs:"název",it:"nome",pl:"nazwa",pt:"nome",ru:"имя",zh:"名"},s_buy:{de:"kaufen",es:"comprar",fr:"acheter",cs:"koupit",it:"comprare",pl:"kupić",pt:"comprar",ru:"купить",zh:"買"},s_sell:{de:"verkaufen",es:"vender",fr:"vendre",cs:"prodat",it:"vendere",pl:"sprzedać",pt:"vender",ru:"продать",zh:"賣"},s_quantity:{de:"quantität",es:"cantidad",fr:"quantité",cs:"množství",it:"quantità",pl:"ilość",pt:"quantidade",ru:"количество",zh:"量"},s_profit:{de:"gewinn",es:"beneficio",fr:"profit",cs:"zisk",it:"profitto",pl:"zysk",pt:"lucro",ru:"прибыль",zh:"利潤"},s_cost:{de:"kosten",es:"costo",fr:"coût",cs:"náklady",it:"costo",pl:"koszt",pt:"custo",ru:"стоимость",zh:"成本"},s_breakpoint:{de:"gewinnschwelle",es:"punto muerto",fr:"seuil de rentabilité",cs:"bod zvratu",it:"punto di pareggio",pl:"próg rentowności",pt:"ponto de equilíbrio",ru:"точка безубыточности",zh:"收支平衡點"},s_tax:{de:"steuer",es:"impuestos",fr:"impôt",cs:"daň",it:"fiscale",pl:"podatek",pt:"fiscal",ru:"налог",zh:"稅"},s_revenue:{de:"einnahmen",es:"ingresos",fr:"revenus",cs:"příjmy",it:"entrate",pl:"dochody",pt:"receita",ru:"доходов",zh:"收入"},s_margin:{de:"marge",es:"margen",fr:"marge",cs:"marže",it:"margine",pl:"marża",pt:"margem",ru:"валовая",zh:"邊際"},s_low:{de:"niedrigen",es:"bajo",fr:"bas",cs:"nízký",it:"bassa",pl:"niski",pt:"baixa",ru:"низкая",zh:"低"},s_high:{de:"hohen",es:"alta",fr:"haut",cs:"vysoký",it:"alta",pl:"wysoki",pt:"alta",ru:"высокая",zh:"高"},s_notify:{de:"benachrichtigen",es:"notificar",fr:"notifier",cs:"oznámit",it:"notifica",pl:"powiadom",pt:"notificar",ru:"уведомить",zh:"通知"},s_overwrite:{de:"überschreiben",es:"sobrescribir",fr:"remplacer",cs:"přepsat",it:"sovrascrivi",pl:"zastąp",pt:"substituir",ru:"перезаписать",zh:"覆寫"},s_gem:{de:"edelsteine",es:"gema",fr:"gemme",cs:"klenot",it:"gemma",pl:"klejnot",pt:"gema",ru:"самоцвет",zh:"寶石"},s_coin:{de:"münze",es:"moneda",fr:"monnaie",cs:"mince",it:"moneta",pl:"moneta",pt:"moeda",ru:"монета",zh:"硬幣"},s_dollar:{de:"dollar",es:"dólar",fr:"dollar",cs:"dolar",it:"dollaro",pl:"polar",pt:"dólar",ru:"доллар",zh:"元"}},Element:{s_TEMPLATE:{de:"",es:"",fr:"",cs:"",it:"",pl:"",pt:"",ru:"",zh:""},s_menuChains:{de:"Ketten",es:"Cadenas",fr:"Chaînes",cs:"Řetězy",it:"Catene",pl:"Łańcuchy",pt:"Cadeias",ru:"Цепи",zh:"鏈"},s_menuMap:{de:"Werkzeuge",es:"Útiles",fr:"Outils",cs:"Nástroje",it:"Strumenti",pl:"Narzędzia",pt:"Ferramentas",ru:"Средства",zh:"工具"},s_menuWvW:{de:"WvW",es:"WvW",fr:"WvW",cs:"WvW",it:"WvW",pl:"WvW",pt:"WvW",ru:"WvW",zh:"WvW"},s_menuHelp:{de:"Hilfe",es:"Ayuda",fr:"Assistance",cs:"Pomoci",it:"Guida",pl:"Pomoc",pt:"Ajuda",ru:"Помощь",zh:"輔助"},s_menuOptions:{de:"Optionen",es:"Opciónes",fr:"Options",cs:"Možnosti",it:"Opzioni",pl:"Opcje",pt:"Opções",ru:"Параметры",zh:"選項"}},getTranslation:function(e,t){if(O.Options.enu_Language===O.OptionEnum.Language.Default){return e}var n;var r;var i=e;if(i.indexOf(" ")!==-1){i=i.replace(/ /g,"_")}var n=t["s_"+i];if(n){r=n[O.Options.enu_Language];if(r){return r}}return e},getPhrase:function(e){return D.getTranslation(e,D.Phrase)},getSentence:function(e){return U.toFirstUpperCase(D.getTranslation(e,D.Phrase))},getElement:function(e){return D.getTranslation(e,D.Element)},getString:function(e,t){if(t===undefined){t=U.CaseEnum.Every}var n=e.split(" ");for(var r in n){n[r]=D.getTranslation(n[r],D.Phrase)}return U.changeCase(n.join(" "),t)},getModifiedWord:function(e,t,n){var r="";if(t){var i=D.getPhrase(e);var s=D.getPhrase(t);r=D.isLanguageModifierFirst()?s+" "+i:i+" "+s}else{r=D.getPhrase(e)}return U.changeCase(r,n)},translatePageHeader:function(e){if(O.Options.enu_Language!==O.OptionEnum.Language.Default){$("#layer"+e+" .cntHeader").text(D.getElement("menu"+e))}},translateAfter:function(){if(O.Options.enu_Language!==O.OptionEnum.Language.Default){$(".jsTranslate").each(function(){$(this).text(D.getPhrase($(this).text()))});$(".menuButton").each(function(){$(this).attr("title","<dfn>"+D.getElement($(this).attr("id"))+"</dfn>");I.qTip.init($(this))});D.translatePageHeader(I.PageEnum.Options)}$("#optAlarmLegend").text(D.getModifiedWord("mode","alarm",U.CaseEnum.Every));$("#opt_int_setAlarm").after(" "+D.getSentence("off"));$("#optAlarmChecklist").after(" "+D.getSentence("checklist"));$("#optAlarmSubscription").after(" "+D.getSentence("subscription"))},isLanguageFullySupported:function(){if(O.Options.enu_Language===O.OptionEnum.Language.English||O.Options.enu_Language===O.OptionEnum.Language.German||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.French){return true}return false},getFullySupportedLanguage:function(){if(D.isLanguageFullySupported()){return O.Options.enu_Language}return O.OptionEnum.Language.Default},isLanguageSecondary:function(){if(O.Options.enu_Language===O.OptionEnum.Language.German||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.French){return true}return false},isLanguageModifierFirst:function(){if(O.Options.enu_Language===O.OptionEnum.Language.French||O.Options.enu_Language===O.OptionEnum.Language.Spanish||O.Options.enu_Language===O.OptionEnum.Language.Italian||O.Options.enu_Language===O.OptionEnum.Language.Portuguese||O.Options.enu_Language===O.OptionEnum.Language.Mandarin){return false}return true},isLanguageLogographic:function(){if(O.Options.enu_Language===O.OptionEnum.Language.Mandarin){return true}return false},ChainTitle:[{en:"Fire Elemental",de:"Feuerelementar",es:"Elemental de Fuego",fr:"Elémentaire de Feu",cs:"Ohnivý Elementál",it:"Elementale del Fuoco",pl:"Ognisty Żywioł",pt:"Fogo Elemental",ru:"Огонь Элементаль",zh:"火焰元素"},{en:"Golem Mark II",de:"Golem Typ II",es:"Gólem Serie II",fr:"Golem Marque II",cs:"Golem Typu II",it:"Golem Tipo II",pl:"Golem Model II",pt:"Golem Tipo II",ru:"Голем Тип II",zh:"魔像馬克II型"},{en:"Claw of Jormag",de:"Klaue Jormags",es:"Garra de Jormag",fr:"Griffe de Jormag",cs:"Dráp Jormag",it:"Artiglio di Jormag",pl:"Szpon Jormaga",pt:"Garra de Jormag",ru:"Йормаг Коготь",zh:"卓瑪之爪"},{en:"Svanir Shaman",de:"Schamanenoberhaupt der Svanir",es:"Jefe Chamán Svanir",fr:"Chef Chamane de Svanir",cs:"Hlavní Svanir Šaman",it:"Capo Sciamano Svanir",pl:"Wódz Szamanów Svanira",pt:"Chefe Xamã Svanir",ru:"Главный Шаман Сванир",zh:"斯瓦尼亞薩滿"},{en:"Megadestroyer",de:"Megazerstörer",es:"Megadestructor",fr:"Mégadestructeur",cs:"Meganičitel",it:"Megadistruttore",pl:"Wielkiniszczyciel",pt:"Megadestruidor",ru:"Мегадеструктор",zh:"超能毀滅者"},{en:"Shadow Behemoth",de:"Schatten-Behemoth",es:"Behemot de las Sombras",fr:"Béhémoth des Ombres",cs:"Stín Behemoth",it:"Behemoth d'Ombra",pl:"Mroczny Behemot",pt:"Behemoth de Sombra",ru:"Бегемот из Тени",zh:"暗影巨獸"},{en:"The Shatterer",de:"Den Zerschmetterer",es:"El Asolador",fr:"Le Destructeur",cs:"Shatterer",it:"Il Shatterer",pl:"Shatterer",pt:"O Shatterer",ru:"Шаттерер",zh:"碎裂巨獸"},{en:"Taidha Covington",de:"Taidha Covington",es:"Taidha Covington",fr:"Taidha Covington",cs:"Taidha Covington",it:"Taidha Covington",pl:"Taidha Covington",pt:"Taidha Covington",ru:"Таидха Цовингтон",zh:"泰達·科文頓"},{en:"Modniir Ulgoth",de:"Ulgoth den Modniir",es:"Ulgoth el Modniir",fr:"Ulgoth le Modniir",cs:"Ulgoth na Modniir",it:"Ulgoth il Modniir",pl:"Modniir Ulgoth",pt:"Ulgoth o Modniir",ru:"Улготх в Модниир",zh:"莫迪爾沃爾格斯"},{en:"Great Jungle Wurm",de:"Großen Dschungelwurm",es:"Gran Sierpe de la Selva",fr:"Grande Guivre de la Jungle",cs:"Velká Džungle Červ",it:"Grande Verme Giungla",pl:"Wielki Robak z Dżungli",pt:"Grande Verme Selva",ru:"Великий Червь из Джунглей",zh:"巨型叢林地虫"},{en:"Karka Queen",de:"Karka-Königin",es:"Reina Karka",fr:"Reine Karka",cs:"Karka Královna",it:"Regina Karka",pl:"Karka Królowa",pt:"Rainha Karka",ru:"Карка Королева",zh:"喀殼虫女王"},{en:"Tequatl the Sunless",de:"Tequatl den Sonnenlosen",es:"Tequatl el Sombrío",fr:"Tequatl le Sans-soleil",cs:"Tequatl Bez Slunce",it:"Tequatl il Senza Sole",pl:"Tequatl ma Słońca",pt:"Tequatl o Sem Sol",ru:"Теqуатл Тусклый",zh:"吞噬托"},{en:"Triple Wurm",de:"Dreifach Wurm",es:"Sierpe Triple",fr:"Guivre Triple",cs:"Trojitý Červ",it:"Verme Triplo",pl:"Potrójne Robak",pt:"Verme Triplo",ru:"Тройной Червь",zh:"進化巨型叢林地虫"},{en:"Dry Top Q1",de:"Trockenkuppe Q1",es:"Cima Seca Q1",fr:"Col Aride Q1"},{en:"Dry Top Q2",de:"Trockenkuppe Q2",es:"Cima Seca Q2",fr:"Col Aride Q2"},{en:"Dry Top Q3",de:"Trockenkuppe Q3",es:"Cima Seca Q3",fr:"Col Aride Q3"},{en:"Dry Top Q4",de:"Trockenkuppe Q4",es:"Cima Seca Q4",fr:"Col Aride Q4"},{en:"Lyssa",de:"Verderbte Hohepriesterin der Lyssa",es:"Suma Sacerdotisa Corrupta de Lyssa",fr:"Grande Prêtresse Corrompue de Lyssa",cs:"Lyssa Chrám",it:"Tempio di Lyssa",pl:"Lyssa Świątynia",pt:"Templo de Lyssa",ru:"Лысса Храм",zh:"Lyssa 的寺廟"},{en:"Dwayna",de:"Besessene Dwayna-Statue",es:"Estatua Poseída de Dwayna",fr:"Statue Possédée de Dwayna",cs:"Dwayna Chrám",it:"Tempio di Dwayna",pl:"Dwayna Świątynia",pt:"Templo de Dwayna",ru:"Дwаына Храм",zh:"Dwayna 的寺廟"},{en:"Melandru",de:"Auferstandenen Priester der Melandru",es:"Sacerdote de Melandru Resurgido",fr:"Prêtre Revenant de Melandru",cs:"Melandru Chrám",it:"Tempio di Melandru",pl:"Melandru Świątynia",pt:"Templo de Melandru",ru:"Меландру Храм",zh:"Melandru 的寺廟"},{en:"Grenth",de:"Auferstandenen Priester des Grenth",es:"Sacerdote de Grenth Resurgido",fr:"Prêtre Revenant de Grenth",cs:"Grenth Chrám",it:"Tempio di Grenth",pl:"Grenth Świątynia",pt:"Templo de Grenth",ru:"Грентх Храм",zh:"Grenth 的寺廟"},{en:"Arah",de:"Tore von Arah",es:"Puertas de Arah",fr:"Portes d'Arah",cs:"Arah Brány",it:"Porte di Arah",pl:"Arah Bramy",pt:"Portões de Ará",ru:"Ворота Арах",zh:"Arah 的寺廟"},{en:"Balthazar",de:"Auferstandenen Priester des Balthasar",es:"Sacerdote de Balthazar Resurgido",fr:"Prêtre Revenant de Balthazar",cs:"Balthazar Chrám",it:"Tempio di Balthazar",pl:"Świątynia Balthazar",pt:"Templo de Balthazar",ru:"Балтхазар Храм",zh:"Balthazar 的寺廟"},{en:"Balthazar North",de:"Nord Invasion von Orr",es:"Invasión del Norte de Orr",fr:"Invasion du Nord de Orr",cs:"Severní Invaze Orr",it:"Invasione Settentrionale di Orr",pl:"Północnej Inwazja Orr",pt:"Invasão Norte de Orr",ru:"Северная Вторжение Орр",zh:"北部入侵 Orr"},{en:"Balthazar Central",de:"Zentral Invasion von Orr",es:"Invasión Central de Orr",fr:"Invasion Central de Orr",cs:"Centrální Invaze Orr",it:"Invasione Centrale di Orr",pl:"Centralny Inwazja Orr",pt:"Invasão Central Orr",ru:"Центральный Вторжение Орр",zh:"中部入侵 Orr"},{en:"Balthazar South",de:"Invasion der Südlichen Orr",es:"Invasión del Sur de Orr",fr:"Invasion du Sud de Orr",cs:"Jižní Invaze Orr",it:"Invasione del Sud di Orr",pl:"Południowej Inwazja Orr",pt:"Invasão do Sul de Orr",ru:"Южный Вторжение Орр",zh:"南部入侵 Orr"},{en:"Fire Shaman",de:"Feuerschamanen",es:"Chamán de Fuego",fr:"Chamane de Feu",cs:"Požární Šaman",it:"Sciamano Fuoco",pl:"Ognia Szaman",pt:"Xamã Fogo",ru:"Oгня Шаман",zh:"火薩滿"},{en:"Rhendak the Crazed",de:"Rhendak den Verrückten",es:"Rhendak el Perturbado",fr:"Rhendak le Fou",cs:"Poblázněný Rhendak",it:"Rhendak il Folle",pl:"Szalony Rhendak",pt:"Rhendak o Enlouquecido",ru:"Сумасшедший Рхендак",zh:"瘋狂 Rhendak"},{en:"Foulbear Chieftain",de:"Faulbär-Häuptling",es:"Cabecilla de Osoinmundo",fr:"Chef Oursefol",cs:"Foulbear Náčelník",it:"Capo Foulbear",pl:"Faulwódz Niedźwiedź",pt:"Chefe Foulbear",ru:"Фолмедведь Вождь",zh:"臭熊頭目"},{en:"Dredge Commissar",de:"Schaufler-Kommissar",es:"Comisario Draga",fr:"Kommissar Draguerre",cs:"Vybagrovat Komisař",it:"Commissario Dragare",pl:"Pogłębiarka Komisarza",pt:"Comissário Dragar",ru:"Драги Комиссар",zh:"疏浚政委"},{en:"Nebo Terrace",de:"Nebo-Terrasse",es:"Terraza de Nebo",fr:"Terrasse de Nebo",cs:"Nebo Terasa",it:"Terrazzo di Nebo",pl:"Nebo Taras",pt:"Esplanada de Nebo",ru:"Нево Терраса",zh:"階地 Nebo"},{en:"Eye of Zhaitan",de:"Auge des Zhaitan",es:"Ojo de Zhaitan",fr:"Œil de Zhaïtan",cs:"Oko Zhaitan",it:"Occhio Zhaitan",pl:"Oko Zhaitan",pt:"Olho de Zhaitan",ru:"Глаз Жаитан",zh:"眼的 Zhaitan"}],getChainTitle:function(e){if(C.Chains[e].series===C.ChainSeriesEnum.Story){if(D.isLanguageFullySupported()){return D.ChainTitle[e][O.Options.enu_Language]}else{return D.ChainTitle[e][O.OptionEnum.Language.Default]}}if(O.Options.enu_Language===O.OptionEnum.Language.Default){return C.Chains[e].title}return D.ChainTitle[e][O.Options.enu_Language]},getChainTitleAny:function(e){if(C.Chains[e].series===C.ChainSeriesEnum.Story){return C.Chains[e].title}return D.ChainTitle[e][O.Options.enu_Language]},getChainAlias:function(e){if(O.Options.enu_Language===O.OptionEnum.Language.Default){return C.Chains[e].alias}return D.getChainTitle(e)},getEventName:function(e){if(e["name_"+O.Options.enu_Language]){return e["name_"+O.Options.enu_Language]}return e["name_en"]},speechWait:0,speak:function(e,t){var n=function(e){var t;var n;if(I.BrowserUser===I.BrowserEnum.Chrome){n=document.getElementById("jsTTSFrame");t="http://translate.google.com/translate_tts?tl="+O.Options.enu_Language+"&q="+e;n.src=t}else{n=document.getElementById("jsTTSAudio");t="http://tts-api.com/tts.mp3?q="+e;n.src=t;n.load();n.play()}};if(t===undefined){var r=D.isLanguageLogographic()?4:12;t=1+Math.round(e.length/r)}var i=t*T.cMILLISECONDS_IN_SECOND;if(D.speechWait===0){D.speechWait+=i;n(e);setTimeout(function(){D.speechWait-=i},i)}else{D.speechWait+=i;setTimeout(function(){if(D.speechWait>0){n(e);D.speechWait-=i}},D.speechWait-i)}},isSpeaking:function(){if(D.speechWait===0){return false}return true},stopSpeech:function(){document.getElementById("jsTTSFrame").src="";document.getElementById("jsTTSAudio").src=""},resetSpeechQueue:function(e){if(e===undefined){e=0}if(D.speechWait>e*T.cMILLISECONDS_IN_SECOND){D.speechWait=0;D.stopSpeech()}},getSpeech:function(e,t){if(I.BrowserUser===I.BrowserEnum.Chrome){if(t){return D.getModifiedWord(e,t)}return D.getPhrase(e)}else{if(t){return t+e}return e}},getChainPronunciation:function(e){if(O.Options.enu_Language===O.OptionEnum.Language.Default||I.BrowserUser!==I.BrowserEnum.Chrome){return C.Chains[e.nexus].pronunciation}return D.getChainTitle(e.nexus)}};C={Chains:GW2T_CHAIN_DATA,cIndexSynonym:"nexus",CurrentChainSD:{},NextChainSD1:{},NextChainSD2:{},NextChainSD3:{},NextChainSD4:{},CurrentChainHC:{},NextChainHC1:{},NextChainHC2:{},NextChainHC3:{},NextChainHC4:{},CurrentChains:[],PreviousChains1:[],PreviousChains2:[],NextChains1:[],cChainTitleCharLimit:30,ScheduledChains:[],StoryChains:[],LegacyChains:[],TempleChains:[],ChainSeriesEnum:{Temple:0,Legacy:1,ScheduledCutoff:1,Standard:2,Hardcore:3,Story:4},EventPrimacyEnum:{Optional:0,Normal:1,Primary:2,Boss:3},isChainScheduled:function(e){if(e.series>C.ChainSeriesEnum.ScheduledCutoff){return true}return false},parseChainAlias:function(e){if(e.indexOf("XXX")!==-1){return e.split("XXX")[0]}return e},getEventStepNumber:function(e){if(e.length===1){return e}else{var t;var n="";for(t=0;t<e.length;t++){if(isFinite(e.charAt(t))){n+=e.charAt(t)}else{return n}}return n}},truncateTitleString:function(e,t,n){n=n||"";if(e.length>t){return e.substring(0,t)+n}return e},styleBarIcon:function(e){document.getElementById("chnIcon_"+e.nexus).src="img/chain/"+C.parseChainAlias(e.alias).toLowerCase()+I.cPNG},initializeChainAndHTML:function(e){var t,n;var r;var i="";switch(e.series){case C.ChainSeriesEnum.Standard:{i="#listChainsScheduled";C.ScheduledChains.push(e)}break;case C.ChainSeriesEnum.Hardcore:{i="#listChainsScheduled";C.ScheduledChains.push(e)}break;case C.ChainSeriesEnum.Story:{i="#listChainsScheduled";C.ScheduledChains.push(e);C.StoryChains.push(e)}break;case C.ChainSeriesEnum.Legacy:{i="#listChainsLegacy";C.LegacyChains.push(e)}break;case C.ChainSeriesEnum.Temple:{i="#listChainsTemple";C.TempleChains.push(e)}break}$(i).append("<div id='barChain_"+e.nexus+"' class='barChain'>"+"<div class='chnTitle'>"+"<img id='chnIcon_"+e.nexus+"' src='' />"+"<div id='chnCheck_"+e.nexus+"' class='chnCheck'></div>"+"<h1 id='chnTitle_"+e.nexus+"'>"+C.truncateTitleString(D.getChainTitle(e.nexus),C.cChainTitleCharLimit)+"</h1>"+"<time id='chnTime_"+e.nexus+"' class='chnTimeFutureFar'></time>"+"</div>"+"<div id='chnDetails_"+e.nexus+"' class='chnDetails'>"+"<ol id='chnEvents_"+e.nexus+"' class='chnEvents'></ol>"+"<div class='chnDetailsLinks'>"+"<ins id='chnDelete_"+e.nexus+"' title='Permanently hide this event chain (can undo in Options).'>[x]</ins>"+"</div>"+"</div>");if(C.isChainScheduled(e)){C.styleBarIcon(e)}var s=function(e,t){var n=t;var r="&lt;br /&gt;";var i=function(e){return"&lt;dfn&gt;"+e+"&lt;/dfn&gt;"};var s="";if(e.series===C.ChainSeriesEnum.Story){s=i("Event Number: ")+n.num+r+i("Start Time: ")+n.lim+r+r+"&quot;"+D.getEventName(n).replace(/["']/g,"")+"&quot;"}else{s=i("Event Number: ")+n.num+r+i("If Success Go To: ")+n.sGotoNum+r+i("If Failure Go To: ")+n.fGotoNum+r+i("If Success Wait: ")+n.sInterim+r+i("If Failure Wait: ")+n.fInterim+r+i("Time Limit: ")+n.lim+r+i("Avg to Complete: ")+n.avg+r+i("Min to Complete: ")+n.min+r+i("Max to Complete: ")+n.max+r+r+"&quot;"+D.getEventName(n).replace(/["']/g,"")+"&quot;"}var o=0;var u=44;var a=function(){o=12;u=40};var f=C.getEventStepNumber(n.num);if(f.length!==n.num.length){var l=n.num.slice(f.length);if(n.num.indexOf(".")!==-1){a()}else if(n.num.length===2){if(l.indexOf("A")===-1&&l.indexOf("a")===-1){a()}}else if(l.indexOf("A1")===-1&&l.indexOf("a1")===-1){a()}}$("#chnEvents_"+e.nexus).append("<li id='chnEvent_"+e.nexus+"_"+n.num+"' class='chnStep_"+e.nexus+"_"+n.step+"' style='margin-left:"+o+"px'>"+"<img src='img/event/"+n.icon+I.cPNG+"' title='"+s+"'/>"+"<span>"+C.truncateTitleString(D.getEventName(n),u,"..")+"</span>"+"</li>")};for(t in e.events){r=e.events[t];if(r.primacy===C.EventPrimacyEnum.Primary){e.primaryEvents.push(r)}else if(r.primacy===C.EventPrimacyEnum.Boss){e.primaryEvents.push(r);e.primaryEvents[0].minSum=0;e.primaryEvents[0].avgSum=0;e.primaryEvents[0].minavgSum=0;break}}for(t=1;t<e.primaryEvents.length;t++){var o=T.parseEventTime(e.primaryEvents[t-1].sInterim[0]);e.primaryEvents[t].minSum=T.parseEventTime(e.primaryEvents[t-1].min)+o+e.primaryEvents[t-1].minSum;e.primaryEvents[t].avgSum=T.parseEventTime(e.primaryEvents[t-1].avg)+o+e.primaryEvents[t-1].avgSum;e.primaryEvents[t].minavgSum=e.primaryEvents[t].minSum+~~(Math.abs(e.primaryEvents[t].avgSum-e.primaryEvents[t].minSum)/2)}t--;e.minFinish=e.primaryEvents[t].minSum+T.parseEventTime(e.primaryEvents[t].min);e.avgFinish=e.primaryEvents[t].avgSum+T.parseEventTime(e.primaryEvents[t].avg);e.minavgFinish=e.minFinish+~~(Math.abs(e.avgFinish-e.minFinish)/2);n=0;if(!C.isChainScheduled(e)){for(t in e.events){s(e,e.events[t])}}else{for(t in e.events){if(e.events[t].primacy!==C.EventPrimacyEnum.Optional){if(C.getEventStepNumber(e.events[t].num)!==C.getEventStepNumber(e.primaryEvents[n].num)){n++}s(e,e.events[t])}if(e.events[t].primacy===C.EventPrimacyEnum.Boss){break}}}},initializeAllChains:function(){for(var e in C.Chains){for(var t in C.Chains[e].events){C.Chains[e].events[t].step=parseInt(C.getEventStepNumber(C.Chains[e].events[t].num))-1}C.Chains[e].nexus=parseInt(e);C.Chains[e].isSorted=false;C.Chains[e].primaryEvents=new Array;C.Chains[e].scheduleKeys=new Array;C.initializeChainAndHTML(C.Chains[e])}$(".chnDetails").hide();$("#listChainsScheduled .barChain h1").addClass("chnTitleFutureFar")},isChainCurrent:function(e){for(var t in C.CurrentChains){if(e.nexus===C.CurrentChains[t].nexus){return true}}return false},isChainUnchecked:function(e){if(X.getChainChecklistState(e)===X.ChecklistEnum.Unchecked){return true}return false},isChainSubscribed:function(e){if(X.getChecklistItem(X.Checklists.ChainSubscription,e.nexus)===X.ChecklistEnum.Checked){return true}return false},updateChainTimeTooltipHTML:function(e){var t="";var n;var r="<dfn>"+D.getSentence("subscribe")+"?</dfn><br />";if(e.series===C.ChainSeriesEnum.Story){r=""}for(var i in e.scheduleKeys){n=parseInt(i)===0?r:" <br /> ";t=t+n+T.getTimeFormatted({wantSeconds:false,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(e.scheduleKeys[i])})}$("#chnTime_"+e.nexus).prop("title",t)},updateChainsTimeHTML:function(){var e;var t;var n;var r=false;for(e in C.ScheduledChains){t=C.ScheduledChains[e];C.updateChainTimeTooltipHTML(t);if(C.isChainCurrent(t)){continue}if(O.Options.bol_useCountdown){n=T.getSecondsUntilChainStarts(t);r=true}else{n=T.convertScheduleKeyToLocalSeconds(t.scheduleKeys[0]);r=false}$("#chnTime_"+t.nexus).text(T.getTimeFormatted({wantLetters:r,wantSeconds:false,customTimeInSeconds:n}))}I.qTip.init(".chnTitle time")},updateCurrentChainTimeHTML:function(e){var t=T.getCurrentTimeframeElapsedTime();var n=e.countdownToFinish-t;var r=n;var i="-";if(e.series===C.ChainSeriesEnum.Story){$("#chnTime_"+e.nexus).text(T.getTimeFormatted({reference:T.ReferenceEnum.UTC,want24:true,wantHours:false}))}else{if(n<=0){r=T.cSECONDS_IN_TIMEFRAME-t;i="−"}$("#chnTime_"+e.nexus).text(i+T.getTimeFormatted({wantHours:false,wantLetters:true,customTimeInSeconds:r}))}},initializeTimetableHTML:function(){$("#listChainsTimetable").empty();var e,t;var n;var r;var i;for(e in T.Schedule){n=T.getScheduleSlotChainsByKey(e);for(t in n){r=n[t];if(r.series!==C.ChainSeriesEnum.Standard&&r.series!==C.ChainSeriesEnum.Hardcore){break}i=T.getTimeFormatted({wantSeconds:false,customTimeInSeconds:T.convertScheduleKeyToLocalSeconds(e)});$("#listChainsTimetable").append("<div class='barChainDummy barChainDummy_"+e+"'>"+"<div class='chnTitle'>"+"<img src='img/chain/"+C.parseChainAlias(r.alias).toLowerCase()+I.cPNG+"' />"+"<h1>"+C.truncateTitleString(D.getChainTitleAny(r.nexus),C.cChainTitleCharLimit)+"</h1>"+"<time>"+i+"</time>"+"</div>"+"</div>")}}$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()).addClass("chnBarCurrent");$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()+" .chnTitle h1").addClass("chnTitleCurrent");$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(1)+" .chnTitle h1").addClass("chnTitleFuture")},sortChainsListHTML:function(){var e=0;var t=C.ScheduledChains.length;var n=0;var r=0;var i;var s;while(e<t){i=T.getTimeframeChains(n);for(r in i){if(e>=t){break}s=i[r];if(s.isSorted===false){$("#barChain_"+s.nexus).appendTo("#listChainsScheduled");s.isSorted=true;s.scheduleKeyImmediate=T.getTimeframeKey(n);e++}}n++}for(n in C.ScheduledChains){s=C.ScheduledChains[n];s.isSorted=false;for(r in s.scheduleKeys){if(s.scheduleKeys[r]===s.scheduleKeyImmediate){s.scheduleKeys=s.scheduleKeys.slice(r,s.scheduleKeys.length).concat(s.scheduleKeys.slice(0,r));break}}}O.Enact.bol_useCountdown();for(n in C.CurrentChains){s=C.CurrentChains[n];$("#barChain_"+s.nexus).addClass("chnBarCurrent");if(C.isChainUnchecked(s)){if(s.series===C.ChainSeriesEnum.Story&&O.Options.bol_expandLS||s.series!==C.ChainSeriesEnum.Story&&O.Options.bol_expandWB){$("#chnDetails_"+s.nexus).show("fast")}}$("#barChain_"+s.nexus+" h1").first().removeClass("chnTitleFuture chnTitleFutureFar").addClass("chnTitleCurrent");$("#barChain_"+s.nexus+" time").first().removeClass("chnTimeFuture chnTimeFutureFar").addClass("chnTimeCurrent")}for(n in C.PreviousChains1){s=C.PreviousChains1[n];$("#barChain_"+s.nexus).removeClass("chnBarCurrent").addClass("chnBarPrevious");if(O.Options.bol_collapseChains){$("#chnDetails_"+s.nexus).hide()}$("#barChain_"+s.nexus+" h1").first().removeClass("chnTitleCurrent").addClass("chnTitleFutureFar");$("#barChain_"+s.nexus+" time").first().removeClass("chnTimeCurrent").addClass("chnTimeFutureFar")}for(n in C.PreviousChains2){s=C.PreviousChains2[n];$("#barChain_"+s.nexus).removeClass("chnBarPrevious")}for(n in C.NextChains1){s=C.NextChains1[n];$("#barChain_"+s.nexus+" h1").first().removeClass("chnTitleFutureFar").addClass("chnTitleFuture");$("#barChain_"+s.nexus+" time").first().removeClass("chnTimeFutureFar").addClass("chnTimeFuture")}$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(-1)).removeClass("chnBarCurrent");$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()).addClass("chnBarCurrent");$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(-1)+" .chnTitle h1").removeClass("chnTitleCurrent");$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey()+" .chnTitle h1").removeClass("chnTitleFuture").addClass("chnTitleCurrent");$("#listChainsTimetable .barChainDummy_"+T.getTimeframeKey(1)+" .chnTitle h1").addClass("chnTitleFuture")},queueEventsHighlight:function(e){var t;var n=e;var r=T.getCurrentTimeframeElapsedTime();var i;var s=false;if(r>0){$(".barChain:not(.barChainCurrent) .chnEvents li").addClass("chnEventPast");for(t in n.primaryEvents){i=C.getSumBasedOnOptions(n,t);if(i>=r){if(t>0){C.highlightEvents(n,parseInt(t-1));s=true;break}}}if(s===false){i=C.getSumBasedOnOptions(n,-1);if(i>=r){C.highlightEvents(n,t)}else{C.highlightEvents(n,-1)}}}for(t in n.primaryEvents){i=C.getSumBasedOnOptions(n,t);if(i>=r){i=i-r;setTimeout(function(e,t){return function(){C.highlightEvents(e,t)}}(n,parseInt(t)),i*T.cMILLISECONDS_IN_SECOND)}}i=C.getSumBasedOnOptions(n,-1);if(i>=r){i=i-r;setTimeout(function(e){return function(){C.highlightEvents(e,-1)}}(n),i*T.cMILLISECONDS_IN_SECOND)}},highlightEvents:function(e,t){var n;var r=500;var i=320;var s=e.primaryEvents.length-1;var o;if(e.series===C.ChainSeriesEnum.Story){for(n in e.events){o=e.events[n];o.eventicon._icon.style.display="none";o.eventring._icon.style.display="none"}M.StoryEventActive=null;M.StoryEventActive=new Array}if(t>-1){e.CurrentPrimaryEvent=e.primaryEvents[t];for(n=0;n<t;n++){$(".chnStep_"+e.nexus+"_"+n).removeClass("chnEventCurrent").addClass("chnEventPast")}$(".chnStep_"+e.nexus+"_"+(t-1)).css({opacity:1}).animate({opacity:.5},r);$(".chnStep_"+e.nexus+"_"+t).each(function(){$(this).removeClass("chnEventPast chnEventFuture").addClass("chnEventCurrent").css({width:0,opacity:.5}).animate({width:i,opacity:1},r).css({width:"auto"});if(e.series===C.ChainSeriesEnum.Story){o=e.events[$(this).attr("data-eventindex")];M.StoryEventActive.push(o.eventicon);M.StoryEventActive.push(o.eventring);if(I.PageCurrent!==I.PageEnum.Map){o.eventicon._icon.style.display="block";o.eventring._icon.style.display="block"}}M.burySubmaps()});if(t<e.primaryEvents.length){for(n=t+1;n<e.primaryEvents.length;n++){$(".chnStep_"+e.nexus+"_"+n).removeClass("chnEventCurrent").addClass("chnEventFuture")}}if(O.Options.bol_tourPrediction&&I.PageCurrent===I.PageEnum.Chains&&M.isMapAJAXDone&&C.isChainUnchecked(e)){if(e.series===C.ChainSeriesEnum.Story&&O.Options.bol_expandLS||e.series!==C.ChainSeriesEnum.Story){$("#chnEvent_"+e.nexus+"_"+e.CurrentPrimaryEvent.num).trigger("click")}}}else{e.CurrentPrimaryEvent=e.primaryEvents[s];$("#chnEvents_"+e.nexus+" li").removeClass("chnEventCurrent").addClass("chnEventPast");$(".chnStep_"+e.nexus+"_"+s).css({opacity:1}).animate({opacity:.5},r);if(O.Options.int_setAlarm===O.IntEnum.Alarm.Checklist&&O.Options.bol_alertAtEnd&&I.isProgramLoaded&&e.nexus===C.CurrentChainSD.nexus&&e.series!==C.ChainSeriesEnum.Story){var u=", "+D.getSpeech("checked");var a="";var f="";var l=O.objToBool(C.NextChainSD1);var c=O.objToBool(C.NextChainHC1);var h=D.getSpeech("world boss","next")+" "+D.getSpeech("is")+" ";if(C.NextChainSD1&&!C.isChainUnchecked(C.NextChainSD1)){a=u}if(C.NextChainHC1&&!C.isChainUnchecked(C.NextChainHC1)){f=u}if(O.Options.bol_alertChecked===false){if(a.length>0){l=false}if(f.length>0){c=false}}if(l&&c){D.speak(h+D.getChainPronunciation(C.NextChainSD1)+a,5);D.speak(D.getSpeech("also")+", "+D.getChainPronunciation(C.NextChainHC1)+f,3)}else if(l){D.speak(h+D.getChainPronunciation(C.NextChainSD1)+a,5)}else if(c){D.speak(h+D.getChainPronunciation(C.NextChainHC1)+f,5)}if(l||c){D.speak(T.getTimeTillChainFormatted(C.NextChainSD1,"speech"),3)}}}},getSumBasedOnOptions:function(e,t){var n=T.getTimeOffsetSinceMidnight(T.ReferenceEnum.Server,T.UnitEnum.Hours);if(t>-1){switch(O.Options.int_setPredictor){case O.IntEnum.Predictor.Auto:{if(n>=16&&n<20){return e.primaryEvents[t].minSum}if(n>=20&&n<23){return e.primaryEvents[t].minavgSum}if(n>=23||n<12){return e.primaryEvents[t].avgSum}if(n>=12&&n<16){return e.primaryEvents[t].minavgSum}}break;case O.IntEnum.Predictor.Min:{return e.primaryEvents[t].minSum}break;case O.IntEnum.Predictor.MinAvg:{return e.primaryEvents[t].minavgSum}break;case O.IntEnum.Predictor.Avg:{return e.primaryEvents[t].avgSum}break}}else{switch(O.Options.int_setPredictor){case O.IntEnum.Predictor.Auto:{if(n>=16&&n<20){e.countdownToFinish=e.minFinish;return e.minFinish}if(n>=20&&n<23){e.countdownToFinish=e.minavgFinish;return e.minavgFinish}if(n>=23||n<12){e.countdownToFinish=e.avgFinish;return e.avgFinish}if(n>=12&&n<16){e.countdownToFinish=e.minavgFinish;return e.minavgFinish}}break;case O.IntEnum.Predictor.Min:{e.countdownToFinish=e.minFinish;return e.minFinish}break;case O.IntEnum.Predictor.MinAvg:{e.countdownToFinish=e.minavgFinish;return e.minavgFinish}break;case O.IntEnum.Predictor.Avg:{e.countdownToFinish=e.avgFinish;return e.avgFinish}break}}}};M={Zones:GW2T_ZONE_DATA,ZoneAssociations:GW2T_ZONE_ASSOCIATION,Regions:GW2T_REGION_DATA,cInitialZone:"lion",Map:{},Events:{},Resources:{},Collectibles:{},ZoneCurrent:{},currentIconSize:32,currentRingSize:256,cICON_SIZE_STANDARD:32,cRING_SIZE_MAX:256,isMapInitialized:false,isMouseOnHUD:false,isMapAJAXDone:false,isAPIRetrieved_MAPFLOOR:false,isMappingIconsGenerated:false,isEventIconsGenerated:false,cLEAFLET_PATH_OPACITY:.5,cMAP_BOUND:32768,cMAP_CENTER:[16384,16384],cMAP_MOUSEMOVE_RATE:100,cZoomLevelFactor:2,ZoomLevelEnum:{Min:0,Default:3,Space:3,Sky:5,Bird:6,Ground:7,Max:7},cZIndexBury:-999999,PinPersonal:{},PinProgram:{},PinEvent:{},PinOver:{},MappingEnum:{Sector:0,Waypoint:1,Landmark:2,Vista:3,Skill:4,Heart:5,EventIcon:6,EventRing:7},APIPOIEnum:{Sector:"sectors",Waypoint:"waypoint",Landmark:"landmark",Vista:"vista",Skill:"skill_challenges",Heart:"tasks"},PinEntities:new Array,DailyEntities:new Array,JPEntities:new Array,ChainPathEntities:new Array,isShowingIconsForDaily:true,isShowingIconsForResource:false,isShowingIconsForJP:true,isShowingIconsForCollectible:false,SubmapEntities:new Array,SubmapTemp:{},StoryEventIcons:new Array,StoryEventRings:new Array,StoryEventActive:new Array,getZoneFromID:function(e){return M.Zones[M.ZoneAssociations[e]]},getZoneName:function(e){var t;if(typeof e==="string"&&M.Zones[e]){t=M.Zones[e]}else if(e["name"]){t=e}else{return"nozonename"}if(M.isAPIRetrieved_MAPFLOOR&&D.isLanguageSecondary()===true){return t["name_"+D.getFullySupportedLanguage()]}else{return t["name"]}},getRegionName:function(e){var t=M.Regions[e];if(D.isLanguageSecondary()===true){return t[D.getFullySupportedLanguage()]}else{return t[O.OptionEnum.Language.Default]}},initializeMap:function(){M.Map=L.map("paneMap",{minZoom:M.ZoomLevelEnum.Min,maxZoom:M.ZoomLevelEnum.Max,inertiaThreshold:100,doubleClickZoom:false,touchZoom:false,zoomControl:I.isOnSmallDevice,attributionControl:false,crs:L.CRS.Simple}).setView([-128,128],M.ZoomLevelEnum.Default);L.tileLayer(U.URL_API.Tiles,{continuousWorld:true}).addTo(M.Map);for(var e in M.Zones){M.Zones[e].ZoneEntities=new Array;M.Zones[e].center=M.getZoneCenter(e);M.Zones[e].nick=e}M.ZoneCurrent=M.Zones[M.cInitialZone];M.bindHUDEventCanceler();P.generateSubmaps();P.populateMap();P.drawChainPaths();M.Map.on("click",function(e){if(M.isMouseOnHUD){return}var t=M.convertLCtoGC(e.latlng);$("#mapCoordinatesCopy").val("["+t[0]+", "+t[1]+"]").select()});M.Map.on("dblclick",function(e){if(M.isMouseOnHUD){return}M.PinPersonal.setLatLng(e.latlng)});$("#mapCoordinatesCopy").onEnterKey(function(){var e=M.parseCoordinates($(this).val());e[0]=Math.floor(e[0]);e[1]=Math.floor(e[1]);$("#mapCoordinatesCopy").val("["+e[0]+", "+e[1]+"]").select();if(e[0]!==""&&e.length===2){M.goToView(e,M.PinPersonal)}});$("#mapDisplayButton").click(function(){$("#panelRight").toggle();M.refreshMap()});M.isMapInitialized=true},refreshMap:function(){if(M.isMapInitialized){M.Map.invalidateSize()}},bindHUDEventCanceler:function(){var e=document.getElementById("paneHUD");e.onmouseover=function(){M.isMouseOnHUD=true};e.onmouseout=function(){M.isMouseOnHUD=false}},bindMapVisualChanges:function(){M.Map.on("mousemove",$.throttle(M.cMAP_MOUSEMOVE_RATE,function(e){if(M.isMouseOnHUD){return}M.showCurrentZone(M.convertLCtoGC(e.latlng))}));M.Map.on("zoomstart",function(e){if(M.SubmapEntities.length>0){M.setEntityGroupDisplay(M.SubmapEntities,"hide")}});M.Map.on("zoomend",function(e){M.adjustZoomMapping();M.adjustZoomStory()})},showCurrentZone:function(e){document.getElementById("mapCoordinatesMouse").value=e[0]+", "+e[1];if(e[0]>=M.ZoneCurrent.rect[0][0]&&e[1]>=M.ZoneCurrent.rect[0][1]&&e[0]<=M.ZoneCurrent.rect[1][0]&&e[1]<=M.ZoneCurrent.rect[1][1]){return}var t,n,r;var i=M.ZoneCurrent.nick;var s="";var o;var u;for(t in M.Zones){if(e[0]>=M.Zones[t].rect[0][0]&&e[1]>=M.Zones[t].rect[0][1]&&e[0]<=M.Zones[t].rect[1][0]&&e[1]<=M.Zones[t].rect[1][1]){for(n in M.Zones[i].ZoneEntities){M.Zones[i].ZoneEntities[n]._icon.style.display="none"}M.ZoneCurrent=M.Zones[t];s=M.getZoneName(M.ZoneCurrent);document.getElementById("mapCoordinatesName").value=s;for(r in M.ZoneCurrent.ZoneEntities){o=M.ZoneCurrent.ZoneEntities[r];u=o.options.mappingtype;if(u===M.MappingEnum.Waypoint&&O.Options.bol_displayWaypoints||u===M.MappingEnum.Landmark&&O.Options.bol_displayPOIs||u===M.MappingEnum.Vista&&O.Options.bol_displayVistas||u===M.MappingEnum.Skill&&O.Options.bol_displaySkills||u===M.MappingEnum.Heart&&O.Options.bol_displayHearts||u===M.MappingEnum.Sector&&O.Options.bol_displaySectors||u===M.MappingEnum.EventIcon&&O.Options.bol_displayEvents||u===M.MappingEnum.EventRing&&O.Options.bol_displayEvents){o._icon.style.display="block"}}M.adjustZoomMapping();break}}},refreshCurrentZone:function(){var e=M.ZoneCurrent.center;M.showCurrentZone(M.getZoneCenter("dry"));M.showCurrentZone(M.getZoneCenter("rata"));M.showCurrentZone(e)},getZoneCenter:function(e){var t=M.Zones[e].rect;var n=t[0][0]+~~((t[1][0]-t[0][0])/2);var r=t[0][1]+~~((t[1][1]-t[0][1])/2);return[n,r]},getEventCenter:function(e){var t=M.getZoneFromID(e.map_id);var n=t.continent_rect;var r=t.map_rect;var i=e.location.center;return M.convertGCtoLC([n[0][0]+(n[1][0]-n[0][0])*(i[0]-r[0][0])/(r[1][0]-r[0][0]),n[0][1]+(n[1][1]-n[0][1])*(1-(i[1]-r[0][1])/(r[1][1]-r[0][1]))])},scaleDimension:function(e,t){t=t||M.Map.getZoom();return parseInt(e/Math.pow(M.cZoomLevelFactor,M.ZoomLevelEnum.Max-t))},adjustZoomMapping:function(){var e;var t;var n=M.Map.getZoom();var r,i,s,o;var u,a;switch(n){case 7:r=40;i=32;s=32;o=256;break;case 6:r=32;i=24;s=24;o=128;break;case 5:r=26;i=16;s=16;o=64;break;case 4:r=20;i=0;s=12;o=32;break;case 3:r=16;i=0;s=0;o=0;break;default:{r=0;i=0;s=0;o=0}}switch(n){case 7:u="28px";a=.9;break;case 6:u="20px";a=.6;break;case 5:u="16px";a=.3;break;default:{u="0px";a=0}}for(e in M.ZoneCurrent.ZoneEntities){t=M.ZoneCurrent.ZoneEntities[e];switch(t.options.mappingtype){case M.MappingEnum.Waypoint:{M.changeMarkerIcon(t,U.URL_IMG.Waypoint,r)}break;case M.MappingEnum.Landmark:{M.changeMarkerIcon(t,U.URL_IMG.Landmark,i);if(n<M.ZoomLevelEnum.Max){t._icon.style.opacity=.6}else{t._icon.style.opacity=.8}}break;case M.MappingEnum.Vista:{M.changeMarkerIcon(t,U.URL_IMG.Vista,i)}break;case M.MappingEnum.Skill:{M.changeMarkerIcon(t,U.URL_IMG.Skill,i)}break;case M.MappingEnum.Heart:{M.changeMarkerIcon(t,U.URL_IMG.Heart,i)}break;case M.MappingEnum.Sector:{t._icon.style.fontSize=u;t._icon.style.opacity=a;t._icon.style.zIndex=M.cZIndexBury+1;if(O.Options.bol_displaySectors){t._icon.style.display="table"}}break;case M.MappingEnum.EventIcon:{M.changeMarkerIcon(t,t._icon.src,s);t._icon.style.zIndex=1e3}break;case M.MappingEnum.EventRing:{M.changeMarkerIcon(t,t._icon.src,o);t._icon.style.zIndex=-1e4}break}}M.burySubmaps()},adjustZoomStory:function(){var e;var t=M.Map.getZoom();var n;var r;var i;var s;switch(t){case 7:M.currentIconSize=32;break;case 6:M.currentIconSize=28;break;case 5:M.currentIconSize=24;break;case 4:M.currentIconSize=20;break;case 3:M.currentIconSize=16;break;default:{M.currentIconSize=0}}if(M.SubmapEntities.length>0){M.setEntityGroupDisplay(M.SubmapEntities,"show");for(e in M.SubmapEntities){r=M.SubmapEntities[e];i=M.scaleDimension(r.spatiality.maxwidth);s=M.scaleDimension(r.spatiality.maxheight);r.setIcon(new L.icon({iconUrl:r._icon.src,iconSize:[i,s],iconAnchor:[0,0]}));M.SubmapEntities[e]._icon.style.zIndex=M.cZIndexBury}}if(M.StoryEventIcons.length>0){M.currentRingSize=M.scaleDimension(M.cRING_SIZE_MAX);for(e in M.StoryEventIcons){n=M.StoryEventIcons[e];M.changeMarkerIcon(n,n._icon.src,M.currentIconSize);n=M.StoryEventRings[e];M.changeMarkerIcon(n,n._icon.src,M.currentRingSize);M.StoryEventIcons[e]._icon.style.zIndex=1e3;M.StoryEventRings[e]._icon.style.zIndex=1}}},burySubmaps:function(){if(M.SubmapEntities.length>0){for(var e in M.SubmapEntities){M.SubmapEntities[e]._icon.style.zIndex=M.cZIndexBury}}},changeMarkerIcon:function(e,t,n){if(n===undefined){n=M.cICON_SIZE_STANDARD}e.setIcon(new L.icon({iconUrl:t,iconSize:[n,n],iconAnchor:[n/2,n/2]}))},setEntityGroupDisplay:function(e,t){var n;var r;var i;if(t===false||t==="hide"||t<0){r="none"}else{r="block"}for(n in e){i=e[n];if(i._container!==undefined){i._container.style.display=r}else{i._icon.style.display=r}}},goToView:function(e,t,n){if(t===undefined){t=M.PinProgram}if(t!==null){t.setLatLng(M.convertGCtoLC(e))}var r;if(n){r=n}else{r=M.ZoomLevelEnum.Ground}M.Map.setView(M.convertGCtoLC(e),r);M.showCurrentZone(e)},goToURLCoords:function(){var e=U.Args[U.KeyEnum.Go];var t=[];var n;if(e){t=M.parseCoordinates(e);if(t.length===2){if(isFinite(t[0])&&isFinite(t[1])){M.goToView(t,M.PinPersonal)}}else if(t.length>=3){if(isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])){var r=M.ZoomLevelEnum.Max-T.wrapInteger(t[2],M.ZoomLevelEnum.Max);M.goToView([t[0],t[1]],M.PinPersonal,r)}}else{n=e.toLowerCase();if(M.Zones[n]){M.goToView(M.getZoneCenter(n),null,M.ZoomLevelEnum.Bird)}}}U.Args[U.KeyEnum.Go]=null},convertGCtoLC:function(e){return M.Map.unproject(e,M.Map.getMaxZoom())},convertGCtoLCMulti:function(e,t){t=t||0;var n;var r=new Array;for(n=t;n<e.length;n++){r.push(M.convertGCtoLC(e[n]))}return r},convertLCtoGC:function(e){var t=M.Map.project(e,M.ZoomLevelEnum.Max);return[Math.floor(t.x),Math.floor(t.y)]},parseCoordinates:function(e){var t=e.replace(/[^\d,-.]/g,"");return t.split(",")},getElementCoordinates:function(e){return M.parseCoordinates(e.attr("data-coord"))},bindMapLinks:function(e){$(e+" ins").each(function(){$(this).text("["+$(this).text()+"]");M.bindMapLinkBehavior($(this),M.PinProgram)})},bindMapLinkBehavior:function(e,t,n){e.click(function(){var e=M.getElementCoordinates($(this));M.goToView(e,t,n)});e.mouseover(function(){var e=M.getElementCoordinates($(this));M.PinOver.setLatLng(M.convertGCtoLC(e))});e.mouseout(function(){M.PinOver.setLatLng(M.convertGCtoLC([0,0]))})},bindMarkerZoomBehavior:function(e,t){e.on(t,function(e){if(M.Map.getZoom()===M.ZoomLevelEnum.Max){M.Map.setZoom(M.ZoomLevelEnum.Default)}else{M.Map.setView(e.latlng,M.ZoomLevelEnum.Max)}})},bindMappingZoomBehavior:function(e,t){e.on(t,function(e){if(M.Map.getZoom()===M.ZoomLevelEnum.Max){M.Map.setZoom(M.ZoomLevelEnum.Sky)}else{M.Map.setView(e.latlng,M.ZoomLevelEnum.Max)}})},bindZoneList:function(){$("#mapZoneList li").each(function(){var e=$(this).attr("data-zone");$(this).text(M.getZoneName(e));$(this).attr("data-coord",M.getZoneCenter(e).toString());M.bindMapLinkBehavior($(this),null,M.ZoomLevelEnum.Sky)});$("#mapZoneList h2").each(function(){var e=$(this).attr("data-region");$(this).text(M.getRegionName(e))})},displayIcons:function(e,t){var n;if(e===undefined||e===null){if(M.isShowingIconsForDaily){$("#mapToggle_Daily").trigger("click")}if(M.isShowingIconsForResource){$("#mapToggle_Resource").trigger("click")}else{$("#mapToggle_Resource").trigger("click").trigger("click")}if(M.isShowingIconsForCollectible){$("#mapToggle_Collectible").trigger("click")}else{$("#mapToggle_Collectible").trigger("click").trigger("click")}if(M.isShowingIconsForJP){$("#mapToggle_JP").trigger("click")}}else{if(t){if(!M["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}if(I.ArticleCurrent>=0){switch(e){case"Collectible":{for(n in M.Collectibles){if("Collectible"+I.ArticleCurrent!==n){$("#ned_"+n).trigger("click")}}}break}U.Args[U.KeyEnum.Article]=null}}else{if(e==="Resource"){if(M["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}else{$("#mapToggle_"+e).trigger("click").trigger("click")}}else if(e==="Collectible"){if(M["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}else{$("#mapToggle_"+e).trigger("click").trigger("click")}}else{if(M["isShowingIconsFor"+e]){$("#mapToggle_"+e).trigger("click")}}}}}};P={generateSubmaps:function(){},createSubmap:function(e,t,n){var r=M.scaleDimension(e[0]);var i=M.scaleDimension(e[1]);var s=L.marker(M.convertGCtoLC([t[0],t[1]]),{icon:L.icon({iconUrl:n,iconSize:[r,i],iconAnchor:[0,0]}),draggable:false,clickable:false}).addTo(M.Map);s.spatiality={maxwidth:e[0],maxheight:e[1]};M.SubmapEntities.push(s);return s},createPin:function(e){return L.marker(M.convertGCtoLC([0,0]),{icon:L.icon({iconUrl:e,iconSize:[32,32],iconAnchor:[16,16]}),draggable:true}).addTo(M.Map)},populateMap:function(){$.getJSON(U.URL_API.MapFloor,function(e){var t;var n,r,i,s,o;var u;var a;var f;var l;var c;var h;for(n in e.regions){r=e.regions[n];for(i in r.maps){if(!M.ZoneAssociations[i]){continue}s=r.maps[i];if(D.isLanguageSecondary()){M.getZoneFromID(i)["name_"+D.getFullySupportedLanguage()]=s.name}M.getZoneFromID(i).map_rect=s.map_rect;M.getZoneFromID(i).continent_rect=s.continent_rect;u=s.points_of_interest.length;for(t=0;t<u;t++){o=s.points_of_interest[t];switch(o.type){case M.APIPOIEnum.Waypoint:{c=M.MappingEnum.Waypoint;f=U.URL_IMG.Waypoint;l="mapWp";h=o.name}break;case M.APIPOIEnum.Landmark:{if(O.Options.bol_showWorldCompletion===false){continue}c=M.MappingEnum.Landmark;f=U.URL_IMG.Landmark;l="mapPoi";h=o.name}break;case M.APIPOIEnum.Vista:{if(O.Options.bol_showWorldCompletion===false){continue}c=M.MappingEnum.Vista;f=U.URL_IMG.Vista;l="mapPoi";h=D.getPhrase("Vista")}break;default:continue}a=L.marker(M.convertGCtoLC(o.coord),{title:"<span class='"+l+"'>"+h+"</span>",entityname:o.name,mappingtype:c,icon:L.icon({iconUrl:f,iconSize:[16,16],iconAnchor:[8,8]}),link:U.getChatlinkFromPoiID(o.poi_id)}).addTo(M.Map);a._icon.style.display="none";switch(o.type){case"waypoint":{a.on("mouseout",function(){this._icon.src=U.URL_IMG.Waypoint});a.on("mouseover",function(){this._icon.src=U.URL_IMG.WaypointOver})}break;case"landmark":{a.on("mouseout",function(){this._icon.src=U.URL_IMG.Landmark});a.on("mouseover",function(){this._icon.src=U.URL_IMG.LandmarkOver})}break}if(o.type==="waypoint"||o.type==="landmark"){a.on("click",function(){$("#mapCoordinatesCopy").val(this.options.link).select();$("#mapCoordinatesName").val(this.options.entityname)});M.bindMappingZoomBehavior(a,"dblclick")}else{M.bindMappingZoomBehavior(a,"click")}M.getZoneFromID(i).ZoneEntities.push(a)}if(O.Options.bol_showWorldCompletion){u=s.skill_challenges.length;for(t=0;t<u;t++){o=s.skill_challenges[t];a=L.marker(M.convertGCtoLC(o.coord),{title:"<span class='"+"mapPoi"+"'>"+D.getPhrase("Skill Challenge")+"</span>",mappingtype:M.MappingEnum.Skill,icon:L.icon({iconUrl:U.URL_IMG.Skill,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(M.Map);a._icon.style.display="none";M.bindMappingZoomBehavior(a,"click");M.getZoneFromID(i).ZoneEntities.push(a)}u=s.tasks.length;for(t=0;t<u;t++){o=s.tasks[t];a=L.marker(M.convertGCtoLC(o.coord),{title:"<span class='"+"mapPoi"+"'>"+o.objective+" ("+o.level+")"+"</span>",task:o.objective,mappingtype:M.MappingEnum.Heart,icon:L.icon({iconUrl:U.URL_IMG.Heart,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(M.Map);a._icon.style.display="none";a.on("click",function(e){var t=this.options.task;if(t.indexOf(".")===t.length-1){t=t.slice(0,-1)}U.openExternalURL(U.getWikiLanguageLink(t))});M.getZoneFromID(i).ZoneEntities.push(a)}u=s.sectors.length;for(t=0;t<u;t++){o=s.sectors[t];a=L.marker(M.convertGCtoLC(o.coord),{clickable:false,mappingtype:M.MappingEnum.Sector,icon:L.divIcon({className:"mapSec",html:"<span class='mapSecIn'>"+o.name+"</span>",iconSize:[512,64],iconAnchor:[256,32]})}).addTo(M.Map);a._icon.style.display="none";M.getZoneFromID(i).ZoneEntities.push(a)}M.isMappingIconsGenerated=true}}}}).done(function(){M.isAPIRetrieved_MAPFLOOR=true;if(O.Options.bol_showChainPaths===true&&I.PageCurrent!==I.PageEnum.Map){M.setEntityGroupDisplay(M.ChainPathEntities,"show")}if(O.Options.bol_displayEvents===false){P.donePopulation()}}).fail(function(){if(I.ModeCurrent===I.ModeEnum.Website){I.write("Guild Wars 2 API server is unreachable.<br />"+"Reasons could be:<br />"+"- The GW2 server is down for maintenance.<br />"+"- Your browser is too old (if IE then need 11+).<br />"+"- Your computer's time is out of sync.<br />"+"- This website's code encountered a bug.<br />"+"Map features will be limited.<br />",15)}}).always(function(){if(O.Options.bol_displayEvents===true){P.populateEvents()}else{P.finishPopulation()}});M.PinPersonal=P.createPin("img/map/pin_white.png");M.PinProgram=P.createPin("img/map/pin_blue.png");M.PinEvent=P.createPin("img/map/pin_green.png");M.PinOver=L.marker(M.convertGCtoLC([0,0]),{icon:L.icon({iconUrl:"img/map/pin_over.png",iconSize:[128,128],iconAnchor:[64,64]}),draggable:true}).addTo(M.Map);M.PinEntities.push(M.PinPersonal);M.PinEntities.push(M.PinProgram);M.PinEntities.push(M.PinEvent);M.PinEntities.push(M.PinOver);for(var e in M.PinEntities){M.PinEntities[e].on("click",function(){var e=M.convertLCtoGC(this.getLatLng());$("#mapCoordinatesCopy").val("["+e[0]+", "+e[1]+"]").select()});M.PinEntities[e].on("dblclick",function(){this.setLatLng(M.convertGCtoLC([0,0]))})}},populateEvents:function(){var e=function(e){if(e.indexOf("guild")!==-1||e.indexOf("subdue")!==-1||e.indexOf("skill")!==-1||e.indexOf("offshoot")!==-1||e.indexOf("vigil en")!==-1||e.indexOf("haunted")!==-1){return true}return false};var t=function(e){if(e.indexOf("free")!==-1)return"img/event/release.png";if(e.indexOf("rescue")!==-1)return"img/event/release.png";if(e.indexOf("capture")!==-1)return"img/event/flag.png";if(e.indexOf("retake")!==-1)return"img/event/flag.png";if(e.indexOf("reclaim")!==-1)return"img/event/flag.png";if(e.indexOf("liberate")!==-1)return"img/event/flag.png";if(e.indexOf("protect")!==-1)return"img/event/shield.png";if(e.indexOf("defend")!==-1)return"img/event/shield.png";if(e.indexOf("escort")!==-1)return"img/event/shield.png";if(e.indexOf("kill")!==-1)return"img/event/boss.png";if(e.indexOf("slay")!==-1)return"img/event/boss.png";if(e.indexOf("defeat")!==-1)return"img/event/boss.png";if(e.indexOf("collect")!==-1)return"img/event/collect.png";if(e.indexOf("help")!==-1)return"img/event/star.png";if(e.indexOf("destroy")!==-1)return"img/event/cog.png";if(e.indexOf("gather")!==-1)return"img/event/collect.png";if(e.indexOf("bring")!==-1)return"img/event/collect.png";if(e.indexOf("recover")!==-1)return"img/event/collect.png";if(e.indexOf("return")!==-1)return"img/event/collect.png";if(e.indexOf("retrieve")!==-1)return"img/event/collect.png";if(e.indexOf("burglar")!==-1)return"img/event/fist.png";return"img/event/swords.png"};var n=function(e){var t=e.location.radius;switch(e.location.type){case"sphere":{if(t<2e3)return"img/ring/c_s.png";return"img/ring/c_m.png"};case"cylinder":{return"img/ring/e_m_h.png"};case"poly":{return"img/ring/e_l_h.png"}}return"img/ring/c_m.png"};$.getJSON(U.URL_API.EventNames,function(e){var t;for(t in e){M.Events[e[t].id]={};M.Events[e[t].id].name=e[t].name}}).done(function(){$.getJSON(U.URL_API.EventDetails,function(r){var i;var s;var o;var u;var a;var f;var l;for(i in r.events){s=r.events[i];o=s.name.toLowerCase();u=M.Events[i]!==undefined?M.Events[i].name:s.name;l=M.getZoneFromID(s.map_id);if(M.Events[i]===undefined||l===undefined||e(o)||s.map_id===988||s.map_id===50){continue}f=M.getEventCenter(s);a=L.marker(f,{clickable:false,mappingtype:M.MappingEnum.EventRing,icon:L.icon({iconUrl:n(s),iconSize:[256,256],iconAnchor:[128,128]})}).addTo(M.Map);a._icon.style.display="none";l.ZoneEntities.push(a);a=L.marker(f,{title:"<span class='"+"mapPoi"+"'>"+u+" ("+s.level+")"+"</span>",mappingtype:M.MappingEnum.EventIcon,icon:L.icon({iconUrl:t(o),iconSize:[48,48],iconAnchor:[24,24]})}).addTo(M.Map);a._icon.style.display="none";M.bindMappingZoomBehavior(a,"click");l.ZoneEntities.push(a)}M.isEventIconsGenerated=true}).done(function(){P.donePopulation()}).fail(function(){}).always(function(){P.finishPopulation()})}).fail(function(){P.finishPopulation()}).always(function(){})},donePopulation:function(){I.qTip.init(".leaflet-marker-icon");if(O.Options.bol_tourPrediction&&I.PageCurrent===I.PageEnum.Chains&&U.Args[U.KeyEnum.Go]===undefined){M.showCurrentZone(M.getZoneCenter(M.cInitialZone));$("#chnEvent_"+C.CurrentChainSD.nexus+"_"+C.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click")}},finishPopulation:function(){M.isMapAJAXDone=true;M.bindMapVisualChanges();M.adjustZoomMapping();M.adjustZoomStory();M.goToURLCoords()},drawChainPaths:function(){var e,t;var n,r,i;var s;var o;for(e in C.Chains){n=C.Chains[e];for(t=0;t<n.primaryEvents.length;t++){i=n.primaryEvents[t];switch(t){case 0:s="red";break;case 1:s="orange";break;case 2:s="yellow";break;case 3:s="lime";break;case 4:s="cyan";break;case 5:s="blue";break;case 6:s="violet";break;case 7:s="purple";break;default:s="white"}o=M.convertGCtoLCMulti(i.path,1);M.ChainPathEntities.push(L.polyline(o,{color:s}).addTo(M.Map))}var u;for(t in n.events){r=n.events[t];u=r.num;if(u.indexOf(".")!==-1){u=u.replace(".","\\.")}$("#chnEvent_"+n.nexus+"_"+u).each(function(){var e=r.path[0];$(this).attr("data-coord",e[0]+","+e[1]);$(this).attr("data-eventindex",t);M.bindMapLinkBehavior($(this),M.PinEvent)});if(n.series===C.ChainSeriesEnum.Story){r.eventring=L.marker(M.convertGCtoLC(r.path[0]),{clickable:false,icon:L.icon({iconUrl:"img/ring/"+r.ring+I.cPNG,iconSize:[32,32],iconAnchor:[16,16]})}).addTo(M.Map);r.eventicon=L.marker(M.convertGCtoLC(r.path[0]),{title:"<span class='mapEvent'>"+D.getEventName(r)+"</span>",icon:L.icon({iconUrl:"img/event/"+r.icon+I.cPNG,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(M.Map);r.eventring._icon.style.display="none";r.eventicon._icon.style.display="none";M.StoryEventRings.push(r.eventring);M.StoryEventIcons.push(r.eventicon)}}}M.setEntityGroupDisplay(M.ChainPathEntities,"hide")},generateAndInitializeDailies:function(){P.shiftLoginTrack();$("#mapLoginTrack img").each(function(){$(this).click(function(){P.shiftLoginValue(parseInt($(this).data("i")))}).mouseenter(function(){$("#mapLoginRecordHover").text("("+(parseInt($(this).data("i"))+1)+")")})});$("#mapLoginTrack").mouseleave(function(){$("#mapLoginRecordHover").text("")});$(".mapDailyLists dt").each(function(){M.bindMapLinkBehavior($(this),null);var e=M.getElementCoordinates($(this));var t=U.getSubstringFromHTMLID($(this).parent());var n=L.marker(M.convertGCtoLC(e),{title:"<div class='mapLoc'><dfn>Daily:</dfn> "+t+"</div>"}).addTo(M.Map);n.setIcon(new L.icon({iconUrl:"img/daily/"+t.toLowerCase()+I.cPNG,iconSize:[32,32],iconAnchor:[16,16]}));n._icon.style.opacity="0.9";M.bindMarkerZoomBehavior(n,"click");M.DailyEntities.push(n)});$("#mapToggle_Daily").click(function(){M.isShowingIconsForDaily=!M.isShowingIconsForDaily;M.setEntityGroupDisplay(M.DailyEntities,M.isShowingIconsForDaily)});I.qTip.init("#mapLoginTrack img")},shiftLoginTrack:function(){var e=28;var t=1418774400;var n=~~((T.getUNIXSeconds()-t)/T.cSECONDS_IN_DAY);var r=T.wrapInteger(n-O.Options.int_shiftLogin,e);var i=T.wrapInteger(n,e);var s=0;var o=0;$("#mapLoginTrack img").each(function(){$(this).css({"border-radius":"auto",opacity:.3}).removeClass("mapLoginCurrent mapLoginOfficial").data("i",o);if(o===i){$(this).addClass("mapLoginOfficial");T.loginTrackOfficial=o}o++});$("#mapLoginTrack img").each(function(){if(s===r+1){return false}else if(s===r){$(this).addClass("mapLoginCurrent")}$(this).css({opacity:1});s++});$("#mapLoginRecordCurrent").text(r+1+" / "+e)},shiftLoginValue:function(e){var t=28;var n=T.wrapInteger(T.loginTrackOfficial-e,t);$("#opt_int_shiftLogin").val(n).trigger("change");P.shiftLoginTrack()},generateAndInitializeResourceNodes:function(){M.Resources=GW2T_RESOURCE_DATA;var e,t;var n;var r;var i=function(e,t){e.setIcon(new L.icon({iconUrl:"img/node/"+t.toLowerCase()+I.cPNG,iconSize:[32,32],iconAnchor:[16,16]}));e._icon.style.borderRadius="16px";e._icon.style.opacity="0.9";e._icon.style.border="2px solid lime";M.bindMarkerZoomBehavior(e,"click")};for(e in M.Resources){n=M.Resources[e];n.NodeEntities=new Array;if(n.nodes!==undefined){for(t in n.nodes){r=L.marker(M.convertGCtoLC(n.nodes[t])).addTo(M.Map);i(r,e);if(n.approx===true){r._icon.style.border="2px dotted lime"}n.NodeEntities.push(r)}}else if(n.zones!==undefined){for(t in n.zones){var s=n.zones[t];var o=M.getZoneCenter(s);o[0]+=n.offset[0];o[1]+=n.offset[1];r=L.marker(M.convertGCtoLC(o)).addTo(M.Map);i(r,e);r._icon.style.border="2px dashed lime";n.NodeEntities.push(r)}}}for(e in M.Resources){n=M.Resources[e];$("#mapResource_"+n.type).append("<label><input id='nod_"+e+"' type='checkbox' /> <img src='img/node/"+e.toLowerCase()+I.cPNG+"' /> "+e+"</label>")}for(e in M.Resources){$("#nod_"+e).change(function(){var e=U.getSubstringFromHTMLID($(this));M.setEntityGroupDisplay(M.Resources[e].NodeEntities,$(this).prop("checked"))})}$("#mapToggle_Resource").click(function(){M.isShowingIconsForResource=!M.isShowingIconsForResource;for(e in M.Resources){$("#nod_"+e).prop("checked",M.isShowingIconsForResource);M.setEntityGroupDisplay(M.Resources[e].NodeEntities,M.isShowingIconsForResource)}})},styleJPMarkers:function(e,t){var n="2px solid lime";switch(t){case 1:n="2px solid orange";break;case 2:n="2px solid red";break}e._icon.style.border=n},generateAndInitializeJPs:function(){X.Checklists.JP.length=$(".mapJPList dt").length;var e;var t=function(e,t,n){var r=M.getElementCoordinates(e);var i=L.marker(M.convertGCtoLC(r),{id:t,dif:n,title:"<div class='mapLoc'><dfn>JP:</dfn> "+e.text()+"<img src='"+U.getImageHosted(e.data("img"))+"' /></div>"}).addTo(M.Map);i.setIcon(new L.icon({iconUrl:"img/ui/jp.png",iconSize:[32,32],iconAnchor:[16,16]}));i._icon.style.borderRadius="50%";i._icon.style.opacity="0.9";P.styleJPMarkers(i,n);M.JPEntities.push(i)};for(e=0;e<X.Checklists.JP.length;e++){$("#mapJP_"+e).each(function(){t($(this),U.getSubstringFromHTMLID($(this)),$(this).parent().data("jpdif"))})}$("#mapToggle_JP").click(function(){M.isShowingIconsForJP=!M.isShowingIconsForJP;M.setEntityGroupDisplay(M.JPEntities,M.isShowingIconsForJP)});I.qTip.init(".leaflet-marker-icon")},generateAndInitializeJPChecklistHTML:function(){$(".mapJPList dt").each(function(){var e=$(this).text();$(this).after("&nbsp;<cite><a href='"+U.getYouTubeLink(e+" "+I.cGameNick)+"' target='_blank'>[Y]</a> <a href='"+U.getWikiLink(e)+"' target='_blank'>[W]</a></cite>");M.bindMapLinkBehavior($(this),null);$(this).after("<label><input type='checkbox' id='mapJPCheck_"+U.getSubstringFromHTMLID($(this))+"' /></label>")});U.convertExternalLink(".mapJPList a");X.initializeChecklist(X.Checklists.JP,X.Checklists.JP.length);var e=function(){var e=X.countChecklist(X.Checklists.JP,X.ChecklistEnum.Checked);var t=X.Checklists.JP.length;$("#mapJPCounter").text(e+"/"+t)};var t;for(t=0;t<X.Checklists.JP.length;t++){$("#mapJPCheck_"+t).each(function(){var e=X.getChecklistItem(X.Checklists.JP,t,O.TypeEnum.isBoolean);$(this).prop("checked",e);if(e===false){$(this).parent().prev().removeClass("mapJPListNameHover")}else{$(this).parent().prev().addClass("mapJPListNameHover");M.JPEntities[t]._icon.style.border="2px solid black"}}).change(function(){var t=X.getCheckboxEnumState($(this));var n=U.getSubintegerFromHTMLID($(this));if(t===X.ChecklistEnum.Unchecked){$(this).parent().prev().removeClass("mapJPListNameHover");P.styleJPMarkers(M.JPEntities[n],M.JPEntities[n].options.dif)}else{$(this).parent().prev().addClass("mapJPListNameHover");M.JPEntities[n]._icon.style.border="2px solid black"}X.setChecklistItem(X.Checklists.JP,n,t);e()}).parent().hover(function(){$(this).prev().css({"text-decoration":"underline"}).trigger("mouseenter")},function(){$(this).prev().css({"text-decoration":"none"}).trigger("mouseleave")});(function(e){M.JPEntities[e].on("click",function(){$("#mapJPCheck_"+e).trigger("click")});M.JPEntities[e].on("dblclick",function(){if(M.Map.getZoom()===M.ZoomLevelEnum.Max){M.Map.setZoom(M.ZoomLevelEnum.Default)}else{$("#mapJP_"+e).trigger("click")}})})(t)}$("#mapJPUncheck").click(function(){var n="";for(t=0;t<X.Checklists.JP.length;t++){$("#mapJPCheck_"+t).prop("checked",false).parent().prev().removeClass("mapJPListNameHover");P.styleJPMarkers(M.JPEntities[t],M.JPEntities[t].options.dif);n+="0"}X.Checklists.JP.value=n;localStorage[X.Checklists.JP.key]=X.Checklists.JP.value;e()});e()},styleCollectibleMarker:function(e,t){switch(t){case X.ChecklistEnum.Unfound:e._icon.style.border="2px solid lime";break;case X.ChecklistEnum.Tracked:e._icon.style.border="2px solid red";break;case X.ChecklistEnum.Found:e._icon.style.border="2px solid white";break}},generateAndInitializeCollectibles:function(){M.Collectibles=GW2T_COLLECTIBLE_DATA;var e,t,n;var r;var i;var s;var o;var u;var a;var f=function(e,t,n,r){e.setIcon(new L.divIcon({className:"mapNeedle",html:"<span style='color:"+r+"'>"+t+"</span>",iconSize:[16,16],iconAnchor:[8,8]}));e._icon.style.borderRadius="16px";e._icon.style.opacity="0.9";P.styleCollectibleMarker(e,n);e.on("click",function(e){var t=this.options.needleType;var n=this.options.needleKey;var r=this.options.needleIndex;var i=X.trackChecklistItem(X.Checklists[t],r);P.styleCollectibleMarker(this,i);var s=X.getCheckedIndexes(X.Checklists[t]);if(s.length===0){U.updateQueryString()}else{U.updateAddressBar("?"+n+"="+s)}})};for(e in M.Collectibles){r=U.Args[X.Checklists[e].urlkey];X.Checklists[e].length=M.Collectibles[e].needles.length;X.initializeChecklist(X.Checklists[e],X.Checklists[e].length,r);i=M.Collectibles[e];i.NeedleEntities=new Array;for(t in i.needles){n=parseInt(t)+1;s=i.needles[t];o=X.getChecklistItem(X.Checklists[e],t);a="<div class='mapLoc'><dfn>"+i.name+":</dfn> #"+n;if(s.i){a+="<img src='"+U.getImageHosted(s.i)+"' />"}else if(s.t){a+="<br /><span class='mapTip'>"+s.t+" (User Contributed)</span>"}a+="</div>";u=L.marker(M.convertGCtoLC(s.c),{needleIndex:t,needleType:e,needleKey:X.Checklists[e].urlkey,title:a}).addTo(M.Map);f(u,n,o,i.color);X.Checklists[e].cushion.push(u);i.NeedleEntities.push(u)}i=M.Collectibles[e];$("#mapCollectibleList").append("<div><label style='color:"+i.color+"'><input id='ned_"+e+"' type='checkbox' /> "+i.name+"</label>"+"<span class='cssRight'><cite>"+"<a href='"+U.getYouTubeLink(i.name+" "+I.cGameNick)+"'>[Y]</a>&nbsp;"+"<a href='"+i.wiki+"'>[W]</a>&nbsp;"+"<a href='"+i.credit+"'>[C]</a>&nbsp;"+"&nbsp;-&nbsp;&nbsp;</cite>"+"<a id='nedUncheck_"+e+"' class='cssRight'>Reset</a>"+"</span></div>");$("#ned_"+e).change(function(){var e=U.getSubstringFromHTMLID($(this));M.setEntityGroupDisplay(M.Collectibles[e].NeedleEntities,$(this).prop("checked"))});$("#nedUncheck_"+e).click(function(){var e=U.getSubstringFromHTMLID($(this));var t=X.Checklists[e].cushion;for(var n in t){P.styleCollectibleMarker(t[n],X.ChecklistEnum.Unfound)}X.clearChecklist(X.Checklists[e]);U.updateQueryString()})}I.qTip.init(".mapNeedle");U.convertExternalLink("#mapCollectibleList cite a");$("#mapToggle_Collectible").click(function(){M.isShowingIconsForCollectible=!M.isShowingIconsForCollectible;for(e in M.Collectibles){$("#ned_"+e).prop("checked",M.isShowingIconsForCollectible);M.setEntityGroupDisplay(M.Collectibles[e].NeedleEntities,M.isShowingIconsForCollectible)}})}};T={DST_IN_EFFECT:0,SECONDS_TILL_RESET:0,TIMESTAMP_UNIX_SECONDS:0,cUTC_OFFSET_USER:0,cUTC_OFFSET_SERVER:-8,cUTC_OFFSET_HAWAII:-10,cUTC_OFFSET_EASTERN:-4,cMILLISECONDS_IN_SECOND:1e3,cSECONDS_IN_MINUTE:60,cSECONDS_IN_HOUR:3600,cSECONDS_IN_DAY:86400,cMINUTES_IN_HOUR:60,cMINUTES_IN_DAY:1440,cHOURS_IN_MERIDIEM:12,cHOURS_IN_DAY:24,cSECONDS_IN_TIMEFRAME:900,cMINUTES_IN_TIMEFRAME:15,cMINUTES_IN_EVENTFRAME:5,cNUM_TIMEFRAMES_IN_HOUR:4,cSECS_MARK_0:0,cSECS_MARK_1:900,cSECS_MARK_2:1800,cSECS_MARK_3:2700,cSECS_MARK_4:3599,cBASE_10:10,ReferenceEnum:{UTC:0,Local:1,Server:2},UnitEnum:{Milliseconds:0,Seconds:1,Minutes:2,Hours:3},loginTrackOfficial:0,Events:{numOfSets:7,en0:"Supplies@[&BJcHAAA=] Rustbucket@[&BJYHAAA=] TendrilW@[&BIYHAAA=] Shaman@[&BIsHAAA=]"+" Victims@[&BIwHAAA=] Tootsie@[&BHYHAAA=] Crystals@[&BHIHAAA=] TendrilSE@[&BHMHAAA=]",en1:"Beetles@[&BJYHAAA=] Bridge@[&BIkHAAA=] Experiment@[&BIwHAAA=] Golem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MineE@[&BHsHAAA=]",en2:"Suit@[&BJMHAAA=] Leyline@[&BIMHAAA=] Town@[&BH4HAAA=] Basket@[&BHMHAAA=] MineNE@[&BH0HAAA=]",en3:"Eway@[&BJcHAAA=] Giant@[&BIwHAAA=] Skritts@[&BIwHAAA=] Mites@[&BHUHAAA=] Haze@[&BHIHAAA=] Explosives@[&BH4HAAA=]",en4:"DEVOURER(2)@[&BHkHAAA=] Giant@[&BIwHAAA=]",en5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritts@[&BIwHAAA=] Chickenado@[&BI4HAAA=] TWISTER(3)@[&BHoHAAA=] Haze@[&BHIHAAA=]",en6:"Beetle(5)@[&BJcHAAA=] Monster(4)@[&BHoHAAA=]",de0:"Vorräte@[&BJcHAAA=] Schrotteimer@[&BJYHAAA=] DschungelrankeW@[&BIYHAAA=] Schamanin@[&BIsHAAA=]"+" Unfallopfer@[&BIwHAAA=] Tootsie@[&BHYHAAA=] Kristalle@[&BHIHAAA=] DschungelrankeSO@[&BHMHAAA=]",de1:"Käfern@[&BJYHAAA=] Rankenbrücke@[&BIkHAAA=] Experimente@[&BIwHAAA=] Golem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MinenO@[&BHsHAAA=]",de2:"Aspektanzug@[&BJMHAAA=] Leylinien@[&BIMHAAA=] Kleinstadt@[&BH4HAAA=] Drachenkorb@[&BHMHAAA=] MinenNO@[&BH0HAAA=]",de3:"Eway@[&BJcHAAA=] Riesen@[&BIwHAAA=] Skritt@[&BIwHAAA=] Staubmilben@[&BHUHAAA=] Dunst@[&BHIHAAA=] Sprengstoff@[&BH4HAAA=]",de4:"VERSCHLINGER(2)@[&BHkHAAA=] Riesen@[&BIwHAAA=]",de5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritt@[&BIwHAAA=] Hühnado@[&BI4HAAA=] STAUBWIRBELWIND(3)@[&BHoHAAA=] Dunst@[&BHIHAAA=]",de6:"Riesenkäfer(5)@[&BJcHAAA=] Staubmonster(4)@[&BHoHAAA=]",es0:"Suministros@[&BJcHAAA=] Chatarro@[&BJYHAAA=] ZarcilloO@[&BIYHAAA=] Chamán@[&BIsHAAA=]"+" Víctimas@[&BIwHAAA=] Ñique@[&BHYHAAA=] Cristales@[&BHIHAAA=] ZarcilloSE@[&BHMHAAA=]",es1:"Escarabajos@[&BJYHAAA=] Puente@[&BIkHAAA=] Experimento@[&BIwHAAA=] Gólem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MinaE@[&BHsHAAA=]",es2:"Traje@[&BJMHAAA=] Líneasley@[&BIMHAAA=] Villa@[&BH4HAAA=] Cestas@[&BHMHAAA=] MinaNE@[&BH0HAAA=]",es3:"Eway@[&BJcHAAA=] Gigante@[&BIwHAAA=] Skritt@[&BIwHAAA=] Ácaros@[&BHUHAAA=] Bruma@[&BHIHAAA=] Explosivos@[&BH4HAAA=]",es4:"DEVORADORA(2)@[&BHkHAAA=] Gigante@[&BIwHAAA=]",es5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritt@[&BIwHAAA=] Pollonado@[&BI4HAAA=] HURACÁN(3)@[&BHoHAAA=] Bruma@[&BHIHAAA=]",es6:"Escarabajo(5)@[&BJcHAAA=] Monstruo(4)@[&BHoHAAA=]",fr0:"Provisions@[&BJcHAAA=] Tadrouille@[&BJYHAAA=] VrilleO@[&BIYHAAA=] Chamane@[&BIsHAAA=]"+" Survivants@[&BIwHAAA=] Bipbip@[&BHYHAAA=] Cristales@[&BHIHAAA=] VrilleSE@[&BHMHAAA=]",fr1:"Scarabées@[&BJYHAAA=] Pont@[&BIkHAAA=] Expériences@[&BIwHAAA=] Golem@[&BIoHAAA=]"+" Nochtli@[&BHkHAAA=] COLOCAL@[&BHwHAAA=] Serene@[&BHQHAAA=] MineE@[&BHsHAAA=]",fr2:"Combinaison@[&BJMHAAA=] Lignesforce@[&BIMHAAA=] Bourg@[&BH4HAAA=] Panier@[&BHMHAAA=] MineNE@[&BH0HAAA=]",fr3:"Eway@[&BJcHAAA=] Géant@[&BIwHAAA=] Skritts@[&BIwHAAA=] Acarides@[&BHUHAAA=] Haze@[&BHIHAAA=] Explosifs@[&BH4HAAA=]",fr4:"DÉVOREUSE(2)@[&BHkHAAA=] Géant@[&BIwHAAA=]",fr5:"Eway@[&BJcHAAA=] Chrii'kkt(4)@[&BIoHAAA=] Skritts@[&BIwHAAA=] Poulenade@[&BI4HAAA=] TORNADE(3)@[&BHoHAAA=] Haze@[&BHIHAAA=]",fr6:"Scarabée(5)@[&BJcHAAA=] Monstre(4)@[&BHoHAAA=]"},Schedule:{},Hourly:{},getCurrentStoryEvents:function(e){e=e||0;var t=new Date;var n=t.getUTCMinutes();var r=~~(n/T.cMINUTES_IN_EVENTFRAME)*T.cMINUTES_IN_EVENTFRAME+e*T.cMINUTES_IN_EVENTFRAME;return T.Hourly["t"+T.wrapInteger(r,T.cMINUTES_IN_HOUR)]+I.siteTagCurrent},initializeHourly:function(){if(C.StoryChains.length<=0){return}var e;var t=O.OptionEnum.Language.Default;if(D.isLanguageFullySupported()){t=O.Options.enu_Language}for(e=0;e<T.Events.numOfSets;e++){T.Events["Set"+e]=T.Events[t+e]}T.Hourly={t0:":00 "+T.Events.Set0,t5:":05 "+T.Events.Set1,t10:":10 "+T.Events.Set2,t15:":15 "+T.Events.Set0,t20:":20 "+T.Events.Set1,t25:":25 "+T.Events.Set2,t30:":30 "+T.Events.Set0,t35:":35 "+T.Events.Set1,t40:":40 "+T.Events.Set3,t45:":45 "+T.Events.Set4,t50:":50 "+T.Events.Set5,t55:":55 "+T.Events.Set6}},initializeSchedule:function(){C.FE=C.Chains[0];C.Golem=C.Chains[1];C.Jormag=C.Chains[2];C.Maw=C.Chains[3];C.Megades=C.Chains[4];C.SB=C.Chains[5];C.Shatterer=C.Chains[6];C.Taidha=C.Chains[7];C.Ulgoth=C.Chains[8];C.Wurm=C.Chains[9];C.Queen=C.Chains[10];C.Tequatl=C.Chains[11];C.Triple=C.Chains[12];C.Story0=C.Chains[13];C.Story1=C.Chains[14];C.Story2=C.Chains[15];C.Story3=C.Chains[16];T.Schedule={t0:{t:"00:00",c:[C.Taidha,C.Tequatl]},t15:{t:"00:15",c:[C.Maw]},t30:{t:"00:30",c:[C.Megades]},t45:{t:"00:45",c:[C.FE]},t60:{t:"01:00",c:[C.Shatterer,C.Triple]},t75:{t:"01:15",c:[C.Wurm]},t90:{t:"01:30",c:[C.Ulgoth]},t105:{t:"01:45",c:[C.SB]},t120:{t:"02:00",c:[C.Golem,C.Queen]},t135:{t:"02:15",c:[C.Maw]},t150:{t:"02:30",c:[C.Jormag]},t165:{t:"02:45",c:[C.FE]},t180:{t:"03:00",c:[C.Taidha,C.Tequatl]},t195:{t:"03:15",c:[C.Wurm]},t210:{t:"03:30",c:[C.Megades]},t225:{t:"03:45",c:[C.SB]},t240:{t:"04:00",c:[C.Shatterer,C.Triple]},t255:{t:"04:15",c:[C.Maw]},t270:{t:"04:30",c:[C.Ulgoth]},t285:{t:"04:45",c:[C.FE]},t300:{t:"05:00",c:[C.Golem]},t315:{t:"05:15",c:[C.Wurm]},t330:{t:"05:30",c:[C.Jormag]},t345:{t:"05:45",c:[C.SB]},t360:{t:"06:00",c:[C.Taidha,C.Queen]},t375:{t:"06:15",c:[C.Maw]},t390:{t:"06:30",c:[C.Megades]},t405:{t:"06:45",c:[C.FE]},t420:{t:"07:00",c:[C.Shatterer,C.Tequatl]},t435:{t:"07:15",c:[C.Wurm]},t450:{t:"07:30",c:[C.Ulgoth]},t465:{t:"07:45",c:[C.SB]},t480:{t:"08:00",c:[C.Golem,C.Triple]},t495:{t:"08:15",c:[C.Maw]},t510:{t:"08:30",c:[C.Jormag]},t525:{t:"08:45",c:[C.FE]},t540:{t:"09:00",c:[C.Taidha]},t555:{t:"09:15",c:[C.Wurm]},t570:{t:"09:30",c:[C.Megades]},t585:{t:"09:45",c:[C.SB]},t600:{t:"10:00",c:[C.Shatterer]},t615:{t:"10:15",c:[C.Maw]},t630:{t:"10:30",c:[C.Ulgoth,C.Queen]},t645:{t:"10:45",c:[C.FE]},t660:{t:"11:00",c:[C.Golem]},t675:{t:"11:15",c:[C.Wurm]},t690:{t:"11:30",c:[C.Jormag,C.Tequatl]},t705:{t:"11:45",c:[C.SB]},t720:{t:"12:00",c:[C.Taidha]},t735:{t:"12:15",c:[C.Maw]},t750:{t:"12:30",c:[C.Megades,C.Triple]},t765:{t:"12:45",c:[C.FE]},t780:{t:"13:00",c:[C.Shatterer]},t795:{t:"13:15",c:[C.Wurm]},t810:{t:"13:30",c:[C.Ulgoth]},t825:{t:"13:45",c:[C.SB]},t840:{t:"14:00",c:[C.Golem]},t855:{t:"14:15",c:[C.Maw]},t870:{t:"14:30",c:[C.Jormag]},t885:{t:"14:45",c:[C.FE]},t900:{t:"15:00",c:[C.Taidha,C.Queen]},t915:{t:"15:15",c:[C.Wurm]},t930:{t:"15:30",c:[C.Megades]},t945:{t:"15:45",c:[C.SB]},t960:{t:"16:00",c:[C.Shatterer,C.Tequatl]},t975:{t:"16:15",c:[C.Maw]},t990:{t:"16:30",c:[C.Ulgoth]},t1005:{t:"16:45",c:[C.FE]},t1020:{t:"17:00",c:[C.Golem,C.Triple]},t1035:{t:"17:15",c:[C.Wurm]},t1050:{t:"17:30",c:[C.Jormag]},t1065:{t:"17:45",c:[C.SB]},t1080:{t:"18:00",c:[C.Taidha,C.Queen]},t1095:{t:"18:15",c:[C.Maw]},t1110:{t:"18:30",c:[C.Megades]},t1125:{t:"18:45",c:[C.FE]},t1140:{t:"19:00",c:[C.Shatterer,C.Tequatl]},t1155:{t:"19:15",c:[C.Wurm]},t1170:{t:"19:30",c:[C.Ulgoth]},t1185:{t:"19:45",c:[C.SB]},t1200:{t:"20:00",c:[C.Golem,C.Triple]},t1215:{t:"20:15",c:[C.Maw]},t1230:{t:"20:30",c:[C.Jormag]},t1245:{t:"20:45",c:[C.FE]},t1260:{t:"21:00",c:[C.Taidha]},t1275:{t:"21:15",c:[C.Wurm]},t1290:{t:"21:30",c:[C.Megades]},t1305:{t:"21:45",c:[C.SB]},t1320:{t:"22:00",c:[C.Shatterer]},t1335:{t:"22:15",c:[C.Maw]},t1350:{t:"22:30",c:[C.Ulgoth]},t1365:{t:"22:45",c:[C.FE]},t1380:{t:"23:00",c:[C.Golem,C.Queen]},t1395:{t:"23:15",c:[C.Wurm]},t1410:{t:"23:30",c:[C.Jormag]},t1425:{t:"23:45",c:[C.SB]}};var e,t,n;var r=0;var i;for(e in T.Schedule){T.Schedule[e].c.push(C["Story"+r]);r++;if(r>T.cNUM_TIMEFRAMES_IN_HOUR-1){r=0}}C.ScheduledChains=new Array;C.initializeAllChains();for(e in T.Schedule){T.Schedule[e].t=T.parseChainTime(T.Schedule[e].t);i=T.Schedule[e];for(t in C.ScheduledChains){for(n in i.c){if(C.ScheduledChains[t].nexus===i.c[n].nexus){C.ScheduledChains[t].scheduleKeys.push(e);break}}}}X.initializeChainChecklist();C.CurrentChainSD=T.getStandardChain();T.initializeHourly()},getScheduleSlotTime:function(e){return T.Schedule[e].t},getScheduleSlotChainsByKey:function(e){return T.Schedule[e].c},getCurrentTimeframe:function(){var e=T.getTimeOffsetSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Minutes);return e-e%T.cMINUTES_IN_TIMEFRAME},getTimeframe:function(e){e=e||0;var t=T.getCurrentTimeframe()+e*T.cMINUTES_IN_TIMEFRAME;return T.wrapInteger(t,T.cMINUTES_IN_DAY)},getTimeframeChains:function(e){return T.Schedule["t"+T.getTimeframe(e)].c},getTimeframeChainBySeries:function(e,t){var n;var r=T.getTimeframeChains(e);for(n in r){if(r[n].series===t){return r[n]}}return null},getStandardChain:function(e){return T.getTimeframeChainBySeries(e,C.ChainSeriesEnum.Standard)},getHardcoreChain:function(e){return T.getTimeframeChainBySeries(e,C.ChainSeriesEnum.Hardcore)},getTimeframeKey:function(e){return"t"+T.getTimeframe(e)},convertScheduleKeyToLocalSeconds:function(e){var t=T.getScheduleSlotTime(e)*T.cSECONDS_IN_MINUTE-(new Date).getTimezoneOffset()*T.cSECONDS_IN_MINUTE;t=T.wrapInteger(t,T.cSECONDS_IN_DAY);return t},getCurrentTimeframeElapsedTime:function(e){var t=new Date;var n=t.getUTCMinutes();var r=t.getUTCSeconds();if(e===T.UnitEnum.Minutes){return n%T.cMINUTES_IN_TIMEFRAME}return n%T.cMINUTES_IN_TIMEFRAME*T.cSECONDS_IN_MINUTE+r},getSecondsUntilChainStarts:function(e){var t=T.convertScheduleKeyToLocalSeconds(e.scheduleKeys[0]);var n=T.getTimeOffsetSinceMidnight(T.ReferenceEnum.Local,T.UnitEnum.Seconds);var r=T.cSECONDS_IN_TIMEFRAME*T.cNUM_TIMEFRAMES_IN_HOUR;if(t>=T.cSECONDS_IN_DAY-r&&n<=r){return T.cSECONDS_IN_DAY-t+n}if(n>=T.cSECONDS_IN_DAY-r&&t<=r){return T.cSECONDS_IN_DAY-n+t}return t-n},getTimeTillChainFormatted:function(e,t){var n=T.getSecondsUntilChainStarts(e);var r=~~(n/T.cSECONDS_IN_MINUTE)%T.cSECONDS_IN_MINUTE;var i=~~(n/T.cSECONDS_IN_HOUR);var s=D.getPhrase("m");var o=D.getPhrase("h");if(t==="speech"){s=" "+D.getSpeech("minute");o=" "+D.getSpeech("hour");if(Math.abs(r)>1){s=" "+D.getSpeech("minutes")}if(Math.abs(i)>1){o=" "+D.getSpeech("hours")}if(i===0&&Math.abs(r)===30){r=D.getSpeech("half an hour");s="";o=""}}o+=" ";r=r+s;if(Math.abs(n)>=T.cSECONDS_IN_HOUR){i=i+o}else{i=""}if(n<0){return" "+i+r+" "+D.getPhrase("ago")}return" "+D.getPhrase("in")+" "+i+r},randIntRange:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},wrapInteger:function(e,t){var n=e;n=n%t;if(n<0){n=t+n}return n},parseEventTime:function(e){var t=new Array;if(e.indexOf("~")!==-1){t=e.split("~");return T.parseEventTime(t[0])+~~(T.parseEventTime(t[1])/2)}if(e==="*"){return 0}if(e.indexOf(":")===-1){return parseInt(e,T.cBASE_10)}t=e.split(":");if(t.length===2){return parseInt(t[0],T.cBASE_10)*T.cSECONDS_IN_MINUTE+parseInt(t[1],T.cBASE_10)}if(t.length===3){return parseInt(t[0])*T.cSECONDS_IN_HOUR+parseInt(t[1],T.cBASE_10)*T.cSECONDS_IN_MINUTE+parseInt(t[2],T.cBASE_10)}return NaN},parseChainTime:function(e){var t=e.split(":");return parseInt(t[0],T.cBASE_10)*T.cMINUTES_IN_HOUR+parseInt(t[1],T.cBASE_10)},checkDST:function(){Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1);var t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())};Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var e=new Date;T.DST_IN_EFFECT=e.dst()&&O.Options.bol_detectDST===false?1:0},getTimeFormatted:function(e){e=e||{};if(e.reference===undefined){e.reference=T.ReferenceEnum.Local}if(e.want24===undefined){e.want24=O.Options.bol_use24Hour}if(e.wantSeconds===undefined){e.wantSeconds=true}if(e.wantHours===undefined){e.wantHours=true}if(e.wantLetters===undefined){e.wantLetters=false}var t,n,r;var i=new Date;if(e.customTimeInSeconds===undefined){switch(e.reference){case T.ReferenceEnum.Local:{t=i.getSeconds();n=i.getMinutes();r=i.getHours()}break;case T.ReferenceEnum.Server:{t=i.getSeconds();n=i.getMinutes();r=i.getUTCHours()+T.cUTC_OFFSET_SERVER+T.DST_IN_EFFECT;r=T.wrapInteger(r,T.cHOURS_IN_DAY)}break;case T.ReferenceEnum.UTC:{t=i.getUTCSeconds();n=i.getUTCMinutes();r=i.getUTCHours()}break}}else{e.customTimeInSeconds=T.wrapInteger(e.customTimeInSeconds,T.cSECONDS_IN_DAY);t=e.customTimeInSeconds%T.cSECONDS_IN_MINUTE;n=~~(e.customTimeInSeconds/T.cSECONDS_IN_MINUTE)%T.cMINUTES_IN_HOUR;r=~~(e.customTimeInSeconds/T.cSECONDS_IN_HOUR)}var s="";if(e.wantSeconds){if(e.wantLetters){if(r===0&&n===0){s=t+"s"}else{s=n+"m"+" "+t+"s"}}else if(e.wantHours===false){s=n+":"+(t<T.cBASE_10?"0"+t:t)}else{s=(n<T.cBASE_10?"0"+n:n)+":"+(t<T.cBASE_10?"0"+t:t)}}else{if(e.wantLetters){s=n+"m"}else{s=n<T.cBASE_10?"0"+n:n}}if(e.wantLetters){if(r===0||e.wantHours===false){return s}return r+"h "+s}if(e.want24){if(e.wantHours===false){return s}return(r<T.cBASE_10?"0"+r:r)+":"+s}var o=" AM";if(r>=T.cHOURS_IN_MERIDIEM){if(r>T.cHOURS_IN_MERIDIEM){r=r%T.cHOURS_IN_MERIDIEM}o=" PM"}else if(r===0){r=T.cHOURS_IN_MERIDIEM}return r+":"+s+o},getTimeOffsetSinceMidnight:function(e,t){t=t||T.UnitEnum.Seconds;e=e||T.ReferenceEnum.UTC;var n=new Date;var r=n.getUTCHours();var i=n.getUTCMinutes();var s=n.getUTCSeconds();switch(e){case T.ReferenceEnum.Server:r=r+T.cUTC_OFFSET_SERVER+T.DST_IN_EFFECT;break;case T.ReferenceEnum.UTC:break;case T.ReferenceEnum.Local:{r=n.getHours();i=n.getMinutes();s=n.getSeconds()}break}r=T.wrapInteger(r,T.cHOURS_IN_DAY);if(t===T.UnitEnum.Hours){return r}if(t===T.UnitEnum.Minutes){return r*T.cMINUTES_IN_HOUR+i}return r*T.cSECONDS_IN_HOUR+i*T.cSECONDS_IN_MINUTE+s},getUNIXSeconds:function(){return~~((new Date).getTime()/T.cMILLISECONDS_IN_SECOND)}};K={tickerFrequency:250,tickerSecondPrevious:null,awakeTimestampPrevious:0,awakeTimestampTolerance:5,currentFrameOffsetMinutes:0,iconOpacityChecked:.4,iconOpacitySpeed:200,oldQuadrantAngle:0,cDEGREES_IN_CIRCLE:360,cDEGREES_IN_QUADRANT:90,handSecond:{},handMinute:{},handHour:{},clockBackground:{},clockCircumference:{},timeLocal:{},timeServer:{},timeBoard:{},timestampUTC:{},timestampLocal:{},timestampServer:{},timestampReset:{},WpChain0:{},WpChain1:{},WpChain2:{},WpChain3:{},IconSD0:{},IconSD1:{},IconSD2:{},IconSD3:{},IconHC0:{},IconHC1:{},IconHC2:{},IconHC3:{},IconsStandard:new Array,IconsHardcore:new Array,wpClipboards:[],lsClipboards:[],cZeroClipboardDataAttribute:"data-clipboard-text",TickerTimeout:{},initializeClock:function(){K.handSecond=$("#clkSecondHand")[0];K.handMinute=$("#clkMinuteHand")[0];K.handHour=$("#clkHourHand")[0];K.clockBackground=$("#paneClockBackground")[0];K.clockCircumference=$("#clkCircumference")[0];K.timeLocal=$("#itemTimeLocalActual")[0];K.timeServer=$("#itemTimeServer")[0];K.timeBoard=$("#itemBoardTime")[0];K.timestampUTC=$("#optTimestampUTC")[0];K.timestampLocal=$("#optTimestampLocalReset")[0];K.timestampServer=$("#optTimestampServerReset")[0];K.timestampReset=$("#optTimeTillReset")[0];K.updateTimeFrame(new Date);K.tickFrequent();K.initializeClipboard()},setClock:function(){var e=200;var t=0;switch(O.Options.int_setClock){case O.IntEnum.Clock.Compact:{$("#paneClock").show();$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").show();I.bulkAnimate([{s:"#itemClock",p:{top:"0px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"-70px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#itemClockIconSD0",p:{top:"4px",left:"290px"}},{s:"#itemClockIconSD1",p:{top:"148px",left:"290px"}},{s:"#itemClockIconSD2",p:{top:"148px",left:"4px"}},{s:"#itemClockIconSD3",p:{top:"4px",left:"4px"}},{s:"#itemClockIconHC0",p:{top:"52px",left:"306px"}},{s:"#itemClockIconHC1",p:{top:"132px",left:"306px"}},{s:"#itemClockIconHC2",p:{top:"132px",left:"20px"}},{s:"#itemClockIconHC3",p:{top:"52px",left:"20px"}},{s:"#itemClockWaypoint0",p:{top:"24px",left:"274px"}},{s:"#itemClockWaypoint1",p:{top:"164px",left:"274px"}},{s:"#itemClockWaypoint2",p:{top:"164px",left:"52px"}},{s:"#itemClockWaypoint3",p:{top:"24px",left:"52px"}},{s:"#itemClockStar0",p:{top:"-10px",left:"138px"}},{s:"#itemClockStar1",p:{top:"-10px",left:"190px"}}],e);$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"});$("#itemTimeLocal").css({width:"100%",right:"auto",bottom:"90px","text-align":"center",color:"#eee",opacity:.5});$("#itemTimeServer").css({width:"100%",top:"90px",bottom:"auto",left:"auto","text-align":"center",color:"#eee",opacity:.5});$("#itemLanguage").css({bottom:"72px",left:"10px"});$("#itemSocial").css({bottom:"100px",right:"10px"});t=I.cPANE_CLOCK_HEIGHT_COMPACT}break;case O.IntEnum.Clock.Full:{$("#paneClock").show();$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").show();I.bulkAnimate([{s:"#itemClock",p:{top:"70px",left:"70px",width:"220px",height:"220px"}},{s:"#paneClockFace",p:{width:"360px",height:"360px",top:"0px",left:"0px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"12px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"12px"}},{s:"#itemClockIconSD0",p:{top:"4px",left:"148px"}},{s:"#itemClockIconSD1",p:{top:"148px",left:"290px"}},{s:"#itemClockIconSD2",p:{top:"290px",left:"148px"}},{s:"#itemClockIconSD3",p:{top:"148px",left:"4px"}},{s:"#itemClockIconHC0",p:{top:"12px",left:"212px"}},{s:"#itemClockIconHC1",p:{top:"212px",left:"298px"}},{s:"#itemClockIconHC2",p:{top:"298px",left:"100px"}},{s:"#itemClockIconHC3",p:{top:"100px",left:"12px"}},{s:"#itemClockWaypoint0",p:{top:"52px",left:"164px"}},{s:"#itemClockWaypoint1",p:{top:"164px",left:"274px"}},{s:"#itemClockWaypoint2",p:{top:"274px",left:"164px"}},{s:"#itemClockWaypoint3",p:{top:"164px",left:"52px"}},{s:"#itemClockStar0",p:{top:"280px",left:"286px"}},{s:"#itemClockStar1",p:{top:"280px",left:"328px"}}],e);$("#paneClockIcons .iconHC").css({width:"48px",height:"48px"});$("#itemTimeLocal").css({width:"auto",right:"10px",bottom:"10px","text-align":"left",color:"#bbcc77",opacity:1});$("#itemTimeServer").css({width:"auto",top:"auto",bottom:"10px",left:"10px","text-align":"left",color:"#bbcc77",opacity:1});$("#itemLanguage").css({bottom:"0px",left:"10px"});$("#itemSocial").css({bottom:"28px",right:"10px"});t=I.cPANE_CLOCK_HEIGHT}break;case O.IntEnum.Clock.Bar:{$("#paneClock").show();$("#itemTimeLocal, #itemTimeServer, #itemLanguage, #itemSocial").hide();I.bulkAnimate([{s:"#itemClock",p:{top:"0px",left:"0px",width:"85px",height:"85px"}},{s:"#paneClockFace",p:{width:"132px",height:"132px",top:"-24px",left:"-24px"}},{s:"#paneClockIcons .iconSD",p:{"border-radius":"32px"}},{s:"#paneClockIcons .iconHC",p:{"border-radius":"24px"}},{s:"#itemClockIconSD0",p:{top:"0px",left:"82px"}},{s:"#itemClockIconSD1",p:{top:"0px",left:"152px"}},{s:"#itemClockIconSD2",p:{top:"0px",left:"222px"}},{s:"#itemClockIconSD3",p:{top:"0px",left:"292px"}},{s:"#itemClockIconHC0",p:{top:"48px",left:"98px"}},{s:"#itemClockIconHC1",p:{top:"48px",left:"168px"}},{s:"#itemClockIconHC2",p:{top:"48px",left:"238px"}},{s:"#itemClockIconHC3",p:{top:"48px",left:"308px"}},{s:"#itemClockWaypoint0",p:{top:"-8px",left:"98px"}},{s:"#itemClockWaypoint1",p:{top:"-8px",left:"168px"}},{s:"#itemClockWaypoint2",p:{top:"-8px",left:"238px"}},{s:"#itemClockWaypoint3",p:{top:"-8px",left:"308px"}},{s:"#itemClockStar0",p:{top:"-16px",left:"0px"}},{s:"#itemClockStar1",p:{top:"-16px",left:"53px"}}],e);$("#paneClockIcons .iconHC").css({width:"32px",height:"32px"});t=I.cPANE_CLOCK_HEIGHT_BAR}break;case O.IntEnum.Clock.None:{$("#paneMenu").animate({top:0},e);$(I.cContentPane).animate({top:I.cPANE_MENU_HEIGHT,"min-height":I.cPANEL_HEIGHT-I.cPANE_MENU_HEIGHT+"px"},e,function(){$("#paneClock").hide()})}break}if(O.Options.int_setClock!==O.IntEnum.Clock.None){$("#paneMenu").animate({top:t},e);$("#paneClock, #paneClockWall, #paneClockBackground, #paneClockIcons").animate({height:t},e);$(I.cContentPane).animate({top:t+I.cPANE_MENU_HEIGHT,"min-height":I.cPANEL_HEIGHT-(t+I.cPANE_MENU_HEIGHT)+"px"},e)}if(I.ModeCurrent===I.ModeEnum.Overlay){$("#itemSocial").hide()}},setMarkerAngle:function(e,t){$(e).attr("transform","rotate("+t/10+", 50, 50)")},rotateClockElement:function(e,t){e.setAttribute("transform","rotate("+t+", 50, 50)")},reapplyFilters:function(){if(I.BrowserUser===I.BrowserEnum.Firefox){var e=$("#clkCircumference");var t=$("#clkHands");var n="url(#clkFilterShadowOuter)";var r="url(#clkGradientCircumference)";var i="url(#clkFilterShadowHand)";e.removeAttr("filter").attr("filter",n);e.css("stroke",r);t.removeAttr("filter").attr("filter",i)}},initializeClockItems:function(){K.IconsStandard=null;K.IconsHardcore=null;K.IconsStandard=new Array(K.IconSD0,K.IconSD1,K.IconSD2,K.IconSD3);K.IconsHardcore=new Array(K.IconHC0,K.IconHC1,K.IconHC2,K.IconHC3);var e;var t;for(e=0;e<T.cNUM_TIMEFRAMES_IN_HOUR;e++){$([K.IconsStandard[e],K.IconsHardcore[e]]).each(function(){$(this).unbind("dblclick").dblclick(function(){t=C.Chains[$(this).data(C.cIndexSynonym)].primaryEvents[0].path[0];M.goToView(t,M.PinEvent)}).unbind("click").click(function(){$("#chnCheck_"+C.Chains[$(this).data(C.cIndexSynonym)].nexus).trigger("click")})})}},checkoffChainIcon:function(e){var t;var n=C.Chains[e];var r;var i;if(n.series===C.ChainSeriesEnum.Standard||n.series===C.ChainSeriesEnum.Hardcore){for(t=0;t<T.cNUM_TIMEFRAMES_IN_HOUR;t++){switch(n.series){case C.ChainSeriesEnum.Standard:{r=T.getStandardChain(t);i=K.IconsStandard[t]}break;case C.ChainSeriesEnum.Hardcore:{r=T.getHardcoreChain(t);i=K.IconsHardcore[t]}break}if(r&&e===r.nexus){if(X.getChainChecklistState(r)!==X.ChecklistEnum.Unchecked){i.css({opacity:1}).animate({opacity:K.iconOpacityChecked},K.iconOpacitySpeed)}else{i.css({opacity:K.iconOpacityChecked}).animate({opacity:1},K.iconOpacitySpeed)}}}}},tickFrequent:function(){var e=new Date;var t=e.getSeconds();if(K.tickerSecondPrevious===t){K.TickerTimeout=setTimeout(K.tickFrequent,K.tickerFrequency);return}else{K.tickerSecondPrevious=t;K.tickSecond(e)}},tickSecond:function(e){var t=e.getSeconds();T.TIMESTAMP_UNIX_SECONDS=T.getUNIXSeconds();T.SECONDS_TILL_RESET=T.cSECONDS_IN_DAY-T.getTimeOffsetSinceMidnight(T.ReferenceEnum.UTC,T.UnitEnum.Seconds);var n=e.getMinutes();var r=e.getHours()%T.cHOURS_IN_MERIDIEM;var i=n*60+t;var s=t*6;var o=n*6+t/10;var u=r*30+n/60*30;K.rotateClockElement(K.clockCircumference,o);K.rotateClockElement(K.handSecond,s);K.rotateClockElement(K.handMinute,o);K.rotateClockElement(K.handHour,u);var a=1-(n%T.cMINUTES_IN_TIMEFRAME*60+t)/T.cSECONDS_IN_TIMEFRAME;if(n%T.cMINUTES_IN_TIMEFRAME===0&&t===0){if(O.Options.int_setDimming===0&&I.ModeCurrent!==I.ModeEnum.Simple&&I.ModeCurrent!==I.ModeEnum.Overlay){$(K.clockBackground).fadeTo(800,1)}K.updateTimeFrame(e)}else{var f=T.TIMESTAMP_UNIX_SECONDS;if(K.awakeTimestampPrevious<f-K.awakeTimestampTolerance){K.updateTimeFrame(e)}K.awakeTimestampPrevious=f;if(O.Options.int_setDimming===0&&I.ModeCurrent!==I.ModeEnum.Simple){K.clockBackground.style.opacity=a}}C.CurrentChains.forEach(C.updateCurrentChainTimeHTML);if(t===0){if(O.Options.bol_useCountdown){C.updateChainsTimeHTML()}K.updateWaypointsClipboard();if(O.Options.int_setAlarm===O.IntEnum.Alarm.Subscription){K.doSubscribedSpeech(O.Options.int_alertSubscribedFirst);K.doSubscribedSpeech(O.Options.int_alertSubscribedSecond)}if(n%T.cMINUTES_IN_EVENTFRAME===0){K.updateStoryClipboard()}}K.timeLocal.innerHTML=T.getTimeFormatted();K.timeServer.innerHTML="("+T.getTimeFormatted({reference:T.ReferenceEnum.Server,wantSeconds:false})+")";K.timeBoard.innerHTML=T.getTimeFormatted({want24:true,wantHours:false,wantLetters:true,customTimeInSeconds:T.cSECONDS_IN_TIMEFRAME-T.getCurrentTimeframeElapsedTime()});K.timestampUTC.innerHTML=T.TIMESTAMP_UNIX_SECONDS;K.timestampLocal.innerHTML=O.Utilities.lastLocalResetTimestamp.value;K.timestampServer.innerHTML=T.TIMESTAMP_UNIX_SECONDS+T.SECONDS_TILL_RESET;K.timestampReset.innerHTML=T.getTimeFormatted({customTimeInSeconds:T.SECONDS_TILL_RESET,want24:true});if(i>=K.currentFrameOffsetMinutes&&i<K.currentFrameOffsetMinutes+C.CurrentChainSD.minFinish){K.handMinute.style.stroke="lime"}else if(i>=K.currentFrameOffsetMinutes+C.CurrentChainSD.minFinish&&i<K.currentFrameOffsetMinutes+C.CurrentChainSD.avgFinish){K.handMinute.style.stroke="orange"}else if(i>=K.currentFrameOffsetMinutes+C.CurrentChainSD.avgFinish){K.handMinute.style.stroke="red"}K.TickerTimeout=setTimeout(K.tickFrequent,K.tickerFrequency)},doSubscribedSpeech:function(e){if(e>0){var t=T.cMINUTES_IN_TIMEFRAME-T.getCurrentTimeframeElapsedTime(T.UnitEnum.Minutes);var n=C.NextChainSD1;var r=C.NextChainHC1;var i=false;var s=false;var o=D.getSpeech("world boss","subscribed")+" ";var u=5;if(e>T.cMINUTES_IN_TIMEFRAME){n=C.NextChainSD2;r=C.NextChainHC2;t+=T.cMINUTES_IN_TIMEFRAME}i=O.objToBool(n)&&C.isChainSubscribed(n)&&C.isChainUnchecked(n);s=O.objToBool(r)&&C.isChainSubscribed(r)&&C.isChainUnchecked(r);if(e===t&&(i||s)){if(i&&s){o+=D.getChainPronunciation(n)+" "+D.getSpeech("and")+" "+D.getChainPronunciation(r);u=6}else if(i){o+=D.getChainPronunciation(n)}else if(s){o+=D.getChainPronunciation(r)}D.speak(o,u);D.speak(D.getSpeech("will start")+T.getTimeTillChainFormatted(n,"speech"),3)}}},updateTimeFrame:function(e){O.checkResetTimestamp();C.CurrentChainSD=T.getStandardChain();C.NextChainSD1=T.getStandardChain(1);C.NextChainSD2=T.getStandardChain(2);C.NextChainSD3=T.getStandardChain(3);C.NextChainSD4=T.getStandardChain(4);C.CurrentChainHC=T.getHardcoreChain();C.NextChainHC1=T.getHardcoreChain(1);C.NextChainHC2=T.getHardcoreChain(2);C.NextChainHC3=T.getHardcoreChain(3);C.NextChainHC4=T.getHardcoreChain(4);C.PreviousChains2=T.getTimeframeChains(-2);C.PreviousChains1=T.getTimeframeChains(-1);C.CurrentChains=T.getTimeframeChains();C.NextChains1=T.getTimeframeChains(1);C.sortChainsListHTML();C.CurrentChains.forEach(C.queueEventsHighlight);$("#itemBoardCurrentSD").text(D.getChainTitleAny(C.CurrentChainSD.nexus));$("#itemBoardNextSD").text(D.getChainTitleAny(C.NextChainSD1.nexus));$("#itemBoardCurrentHC").text("");$("#itemBoardNextHC").text("");if(C.CurrentChainHC||C.NextChainHC1){$("#itemBoardHC").show();if(C.CurrentChainHC){$("#itemBoardCurrentHC").text(D.getChainTitleAny(C.CurrentChainHC.nexus))}if(C.NextChainHC1){$("#itemBoardNextHC").text(D.getChainTitleAny(C.NextChainHC1.nexus))}}else{$("#itemBoardHC").hide()}if(O.Options.int_setAlarm===O.IntEnum.Alarm.Checklist&&O.Options.bol_alertAtEnd){var t=", "+D.getSpeech("checked");var n="";var r="";var i="";var s="";var o=O.objToBool(C.CurrentChainSD);var u=O.objToBool(C.CurrentChainHC);var a=O.objToBool(C.NextChainSD1);var f=O.objToBool(C.NextChainHC1);var l=D.getSpeech("world boss","current")+" "+D.getSpeech("is")+" ";if(C.CurrentChainSD&&!C.isChainUnchecked(C.CurrentChainSD)){n=t}if(C.CurrentChainHC&&!C.isChainUnchecked(C.CurrentChainHC)){i=t}if(C.NextChainSD1&&!C.isChainUnchecked(C.NextChainSD1)){r=t}if(C.NextChainHC1&&!C.isChainUnchecked(C.NextChainHC1)){s=t}if(O.Options.bol_alertChecked===false){if(n.length>0){o=false}if(i.length>0){u=false}if(r.length>0){a=false}if(s.length>0){f=false}}if(o&&u){D.speak(l+D.getChainPronunciation(C.CurrentChainSD)+n,5);D.speak(D.getSpeech("and")+", "+D.getChainPronunciation(C.CurrentChainHC)+i,4)}else if(o){D.speak(l+D.getChainPronunciation(C.CurrentChainSD)+n,5)}else if(u){D.speak(l+D.getChainPronunciation(C.CurrentChainHC)+i,5)}if(o||u){if(a&&f){D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainSD1)+r,4);D.speak(D.getSpeech("and")+", "+D.getChainPronunciation(C.NextChainHC1)+s,4)}else if(a){D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainSD1)+r,4)}else if(f){D.speak(D.getSpeech("then")+", "+D.getChainPronunciation(C.NextChainHC1)+s,4)}}}var c=e.getSeconds();var h=e.getMinutes();var p=h*60+c;$("#clkMarkers line").each(function(){$(this).attr("stroke","black")});$("#paneClockIcons .iconSD").css({border:"1px solid black","box-shadow":"0px 0px 10px black"});$("#paneClockIcons .iconHC").css({border:"1px solid black","box-shadow":"0px 0px 10px black"});var d=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){$([K.IconSD0,K.IconHC0]).each(function(){$(this).css({border:"1px solid lime","box-shadow":"0px 0px 10px lime"})});$([K.IconSD1,K.IconHC1]).each(function(){$(this).css({border:"1px solid green","box-shadow":"0px 0px 10px green"})});K.setMarkerAngle(t,C.CurrentChainSD.minFinish+l);K.setMarkerAngle(n,C.CurrentChainSD.avgFinish+l);K.setMarkerAngle(i,C.NextChainSD1.minFinish+c);K.setMarkerAngle(s,C.NextChainSD1.avgFinish+c);K.setMarkerAngle(o,C.NextChainSD2.minFinish+h);K.setMarkerAngle(u,C.NextChainSD2.avgFinish+h);K.setMarkerAngle(a,C.NextChainSD3.minFinish+p);K.setMarkerAngle(f,C.NextChainSD3.avgFinish+p);var d=function(e,t){if(e){t.show();t.attr("src","img/chain/"+e.alias.toLowerCase()+I.cPNG);t.data(C.cIndexSynonym,e.nexus);if(I.ModeCurrent===I.ModeEnum.Simple){t.attr("title",D.getChainTitleAny(e.nexus));I.qTip.init(t)}if(X.getChainChecklistState(e)!==X.ChecklistEnum.Unchecked){t.css({opacity:K.iconOpacityChecked})}else{t.css({opacity:1})}}else{t.hide()}};d(C.CurrentChainSD,K.IconSD0);d(C.NextChainSD1,K.IconSD1);d(C.NextChainSD2,K.IconSD2);d(C.NextChainSD3,K.IconSD3);d(C.CurrentChainHC,K.IconHC0);d(C.NextChainHC1,K.IconHC1);d(C.NextChainHC2,K.IconHC2);d(C.NextChainHC3,K.IconHC3);$(e).attr("stroke","lime");$(t).attr("stroke","orange");$(n).attr("stroke","red");$(r).attr("stroke","green")};var v=function(e){var t,n,r,i;switch(e){case T.cSECS_MARK_0:{t="0";n="1";r="2";i="3"}break;case T.cSECS_MARK_1:{t="1";n="2";r="3";i="0"}break;case T.cSECS_MARK_2:{t="2";n="3";r="0";i="1"}break;case T.cSECS_MARK_3:{t="3";n="0";r="1";i="2"}break}K.currentFrameOffsetMinutes=e;K.WpChain0=$("#itemClockWaypoint"+t)[0];K.IconSD0=$("#itemClockIconSD"+t);K.WpChain1=$("#itemClockWaypoint"+n)[0];K.IconSD1=$("#itemClockIconSD"+n);K.WpChain2=$("#itemClockWaypoint"+r)[0];K.IconSD2=$("#itemClockIconSD"+r);K.WpChain3=$("#itemClockWaypoint"+i)[0];K.IconSD3=$("#itemClockIconSD"+i);K.IconHC0=$("#itemClockIconHC"+t);K.IconHC1=$("#itemClockIconHC"+n);K.IconHC2=$("#itemClockIconHC"+r);K.IconHC3=$("#itemClockIconHC"+i);d($("#clkMarker"+t),$("#clkMarker"+t+"A"),$("#clkMarker"+t+"B"),$("#clkMarker"+n),$("#clkMarker"+n+"A"),$("#clkMarker"+n+"B"),$("#clkMarker"+r+"A"),$("#clkMarker"+r+"B"),$("#clkMarker"+i+"A"),$("#clkMarker"+i+"B"),T["cSECS_MARK_"+t],T["cSECS_MARK_"+n],T["cSECS_MARK_"+r],T["cSECS_MARK_"+i]);var s=document.getElementById("clkQuadrant");var o=parseInt(t)*K.cDEGREES_IN_QUADRANT;if(o===0&&K.oldQuadrantAngle!==0){o=K.cDEGREES_IN_CIRCLE}$({angle:K.oldQuadrantAngle}).animate({angle:o},{duration:600,step:function(){K.rotateClockElement(s,this.angle)},done:function(){K.rotateClockElement(s,o)}});if(o===K.cDEGREES_IN_CIRCLE){o=0}K.oldQuadrantAngle=o};if(p>=T.cSECS_MARK_0&&p<T.cSECS_MARK_1){v(T.cSECS_MARK_0)}else if(p>=T.cSECS_MARK_1&&p<T.cSECS_MARK_2){v(T.cSECS_MARK_1)}else if(p>=T.cSECS_MARK_2&&p<T.cSECS_MARK_3){v(T.cSECS_MARK_2)}else if(p>=T.cSECS_MARK_3&&p<=T.cSECS_MARK_4){v(T.cSECS_MARK_3)}K.updateWaypointsClipboard();K.updateStoryClipboard();K.initializeClockItems()},initializeClipboard:function(){ZeroClipboard.config({swfPath:"bin/ZeroClipboard.swf"});for(var e=0;e<T.cNUM_TIMEFRAMES_IN_HOUR;e++){K.wpClipboards.push(new ZeroClipboard(document.getElementById("itemClockWaypoint"+e)));K.wpClipboards[e].on("aftercopy",function(e){I.write("Chat link copied to clipboard :)<br />"+e.data["text/plain"],5)})}if(C.StoryChains.length>0){for(var e=0;e<2;e++){K.lsClipboards.push(new ZeroClipboard(document.getElementById("itemClockStar"+e)));K.lsClipboards[e].on("aftercopy",function(e){I.write("Chat link copied to clipboard :)<br />"+e.data["text/plain"],5)})}}},updateWaypointsClipboard:function(){var e=function(e,t,n,r,i){var s="";s+=t.waypoint+" "+D.getChainAlias(t.nexus);if(!n){s+=T.getTimeTillChainFormatted(t)}else{s+=" "+D.getPhrase("and")+" "+n.waypoint+" "+D.getChainAlias(n.nexus)+T.getTimeTillChainFormatted(n)}s+=", "+D.getPhrase("then")+" "+r.waypoint+" "+D.getChainAlias(r.nexus);if(!i){s+=T.getTimeTillChainFormatted(r)}else{s+=" "+D.getPhrase("and")+" "+i.waypoint+" "+D.getChainAlias(i.nexus)+T.getTimeTillChainFormatted(i)}s=s+I.siteTagCurrent;e.setAttribute(K.cZeroClipboardDataAttribute,s)};e(K.WpChain0,C.CurrentChainSD,C.CurrentChainHC,C.NextChainSD1,C.NextChainHC1);e(K.WpChain1,C.NextChainSD1,C.NextChainHC1,C.NextChainSD2,C.NextChainHC2);e(K.WpChain2,C.NextChainSD2,C.NextChainHC2,C.NextChainSD3,C.NextChainHC3);e(K.WpChain3,C.NextChainSD3,C.NextChainHC3,C.NextChainSD4,C.NextChainHC4)},updateStoryClipboard:function(){if(C.StoryChains.length>0){document.getElementById("itemClockStar0").setAttribute(K.cZeroClipboardDataAttribute,T.getCurrentStoryEvents());document.getElementById("itemClockStar1").setAttribute(K.cZeroClipboardDataAttribute,T.getCurrentStoryEvents(1))}}};I={cSiteName:"GW2Timer.com",cSiteURL:"http://gw2timer.com/",cPageURLMap:"mapsrc.html",cPageURLHelp:"helpsrc.html",cPageURLWvW:"wvwsrc.html",cImageHost:"http://i.imgur.com/",cGameName:"Guild Wars 2",cGameNick:"GW2",cPNG:".png",cTextDelimiterChar:"|",cTextDelimiterRegex:/[|]/g,consoleTimeout:{},siteTagDefault:" - gw2timer.com",siteTagCurrent:" - gw2timer.com",cPANEL_WIDTH:360,cPANEL_HEIGHT:580,cPANE_CLOCK_HEIGHT:360,cPANE_CLOCK_HEIGHT_COMPACT:220,cPANE_CLOCK_HEIGHT_BAR:85,cPANE_MENU_HEIGHT:48,cPANE_BEAM_LEFT:-41,cTOOLTIP_MAX_WIDTH:360,cTOOLTIP_DEFAULT_OFFSET_X:-180,cTOOLTIP_DEFAULT_OFFSET_Y:30,cTOOLTIP_ADD_OFFSET_Y:42,cTOOLTIP_ADD_OFFSET_X:36,cTOOLTIP_MOUSEMOVE_RATE:10,isProgramLoaded:false,isProgramEmbedded:false,ModeCurrent:null,ModeEnum:{Website:"Website",Simple:"Simple",Overlay:"Overlay"},cContentPane:"#paneContent",cContentPrefix:"#layer",cMenuPrefix:"#menu",PageCurrent:"",PageEnum:{Chains:"Chains",Map:"Map",WvW:"WvW",Help:"Help",Options:"Options"},SectionEnum:{Map:{Daily:"Daily",Resource:"Resource",JP:"JP",Collectible:"Collectible",TP:"TP",Notepad:"Notepad",Personal:"Personal"},Help:{FAQ:"FAQ",About:"About",Scheduled:"Scheduled",Legacy:"Legacy",Temples:"Temples",Dungeons:"Dungeons"}},ArticleCurrent:null,contentCurrentLayer:"",isContentLoaded_Map:false,isContentLoaded_Help:false,sectionPrefix:"sectionCurrent_",sectionCurrent_Map:"",sectionCurrent_Help:"",cHeaderPrefix:"#header",BrowserUser:"Unknown",BrowserEnum:{IE:0,Opera:1,Firefox:2,Chrome:3},isOnSmallDevice:false,isOnBigDevice:false,cSMALL_DEVICE_WIDTH:800,cSMALL_DEVICE_HEIGHT:600,cBIG_DISPLAY_HEIGHT:1200,initializeFirst:function(){D.stopSpeech();if(window!==window.top){I.isProgramEmbedded=true}U.enforceURLArgumentsFirst();I.enforceProgramMode();T.checkDST();T.cUTC_OFFSET_USER=-((new Date).getTimezoneOffset()/T.cMINUTES_IN_HOUR);if(T.cUTC_OFFSET_USER<=T.cUTC_OFFSET_EASTERN&&T.cUTC_OFFSET_USER>=T.cUTC_OFFSET_HAWAII){O.Options.bol_use24Hour=false}var e=T.getUNIXSeconds();var t=parseInt(localStorage[O.Utilities.lastLocalResetTimestamp.key]);if(localStorage[O.Utilities.lastLocalResetTimestamp.key]===undefined||isFinite(t)===false||t>e){O.Utilities.lastLocalResetTimestamp.value=e;localStorage[O.Utilities.lastLocalResetTimestamp.key]=O.Utilities.lastLocalResetTimestamp.value}else{O.Utilities.lastLocalResetTimestamp.value=t}K.awakeTimestampPrevious=e;if(screen.width<=I.cSMALL_DEVICE_WIDTH&&screen.height<=I.cSMALL_DEVICE_HEIGHT&&I.ModeCurrent===I.ModeEnum.Website){I.isOnSmallDevice=true}if(window.innerHeight>I.cBIG_DISPLAY_HEIGHT){I.isOnBigDevice=true}var n=navigator.userAgent;if(n.indexOf("MSIE")!==-1){I.BrowserUser=I.BrowserEnum.IE}else if(n.indexOf("Chrome")!==-1){I.BrowserUser=I.BrowserEnum.Chrome}else if(n.indexOf("Firefox")!==-1){I.BrowserUser=I.BrowserEnum.Firefox}else if(n.indexOf("Opera")!==-1){I.BrowserUser=I.BrowserEnum.Opera}I.PageCurrent=I.PageEnum.Chains},initializeLast:function(){I.initializeTooltip();I.bindHelpButtons("#layerOptions");I.initializeUIforMenu();I.initializeUIforChains();I.initializeUIForHUD();U.enforceURLArgumentsLast();$("#paneWarning").remove();$("#jsConsoleButtonClose").click(function(){I.clear()});$("#jsConsoleButtonSelect").click(function(){I.selectText("#jsConsole")});U.convertExternalLink(".linkExternal");$(document).mouseup(function(e){var t=$(".jsRemovable");if(!t.is(e.target)&&t.has(e.target).length===0){t.remove()}});$("#mapCompassButton").one("mouseenter",M.bindZoneList).click(function(){$("#jsCenter").trigger("click")});$("#itemLanguage").hover(function(){$("#paneClock").css("z-index",3)},function(){$("#paneClock").css("z-index",0)});O.cleanLocalStorage();O.enforceProgramVersion();D.translateAfter();I.isProgramLoaded=true},write:function(e,t,n){$("#jsConsoleButtons").show();var r=$("#jsConsole");var i=24;if(e===undefined||e===null){e="emptystring"}else{e=e.toString()}if(n===undefined){n=false}if(n===true){r.empty()}if(isFinite(t)===false){t=3+parseInt(e.length/i)}r.append(e+"<br />");window.clearTimeout(I.consoleTimeout);I.consoleTimeout=setTimeout(function(){r.css({opacity:1}).animate({opacity:0},600,function(){$(this).empty().css({opacity:1});$("#jsConsoleButtons").hide()})},t*T.cMILLISECONDS_IN_SECOND)},clear:function(){window.clearTimeout(I.consoleTimeout);$("#jsConsoleButtons").hide();$("#jsConsole").empty()},log:function(e,t,n){if(t===undefined){t=30}I.write(e,t,n)},selectText:function(e){var t=document.querySelector(e);var n=window.getSelection();var r=document.createRange();r.selectNodeContents(t);n.removeAllRanges();n.addRange(r)},scrollToElement:function(e,t,n){var r=n||0;t.animate({scrollTop:e.offset().top-t.offset().top+t.scrollTop()},r)},bulkAnimate:function(e,t){var n;var r;for(n in e){r=e[n];$(r.s).animate(r.p,{duration:t,queue:false})}},generateTableOfContent:function(e){if($(e+" .jsTableOfContents").hasClass("jsTableOfContents")){var t=e.substring(1,e.length);$(e+" .jsTableOfContents").append("<h2>Table of Contents</h2><ol></ol>");$(e+" h1").each(function(){var n=$(this).text();var r=U.stripToAlphanumeric(n);$(this).html(n+"<span class='tocTop'> ↑</span>");$(this).click(function(){I.scrollToElement($("#jsTOC_"+I.PageCurrent),$(I.contentCurrentLayer),"fast")}).attr("id","toc_"+t+"_"+r);$("<li>"+n+"</li>").appendTo($(e+" .jsTableOfContents ol")).click(function(){I.scrollToElement($("#toc_"+t+"_"+r),$(I.contentCurrentLayer),"fast")})})}},generateSectionMenu:function(e){if($(e+" header.jsSection").length<=0){return}var t=e.substring(I.cContentPrefix.length,e.length);var n="menuBeam_"+t;var r=$("<div class='menuBeam' id='"+n+"'></div>").prependTo(e);$(I.cMenuPrefix+t).click(function(){$("#menuBeam_"+I.PageCurrent).css({left:0}).animate({left:I.cPANE_BEAM_LEFT},"fast")});$(e+" header.jsSection").each(function(){var n=$(this);var i=$(this).children("var").first();var s=i.data(O.Options.enu_Language)||n.text();i.text(s);n.next().hide();n.wrapInner("<span></span>");n.append("<sup>[+]</sup>");n.click(function(){var n=U.getSubstringFromHTMLID($(this));$(e+" .menuBeamIcon").removeClass("menuBeamIconActive");if($(this).next().is(":visible")){$(this).children("sup").text("[+]");M.displayIcons(n,false);I[I.sectionPrefix+t]=""}else{$(this).children("sup").text("[-]");$(e+" .menuBeamIcon[data-section='"+n+"']").addClass("menuBeamIconActive");I[I.sectionPrefix+t]=n}U.updateQueryString();if($(this).data("donotanimate")!=="true"){$(this).next().toggle("fast");I.scrollToElement($(this),$(e),"fast")}else{$(this).next().toggle()}$(this).removeData("donotanimate")});n.one("click",function(){I.loadSectionImg($(this))});$("<div class='jsSectionDone'><img src='img/ui/close.png' />"+s+"</div>").appendTo(n.next()).click(function(){$(this).parent().prev().trigger("click")});var o=U.getSubstringFromHTMLID(n);var u=n.find("img:eq(0)").attr("src");$("<img class='menuBeamIcon' data-section='"+o+"' src='"+u+"' "+"title='&lt;dfn&gt;"+D.getSentence("section")+": &lt;/dfn&gt;"+s+"' />").appendTo(r).click(function(){$(e+" header.jsSection").each(function(){if($(this).next().is(":visible")&&$(this).attr("id")!==n.attr("id")){$(this).data("donotanimate","true");$(this).trigger("click")}});n.trigger("click")})});$("<img class='menuBeamIcon' src='img/ui/exit.png' "+"title='&lt;dfn&gt;Close All Sections&lt;/dfn&gt;' />").appendTo(r).click(function(){$(e+" header.jsSection").each(function(){if($(this).next().is(":visible")){$(this).trigger("click")}});$(e+" .menuBeamIcon").removeClass("menuBeamIconActive")});I.qTip.init(e+" .menuBeamIcon")},loadSectionImg:function(e){e.next().find("img").each(function(){if($(this).attr("data-src")){$(this)[0].src=$(this).data("src")}})},bindHelpButtons:function(e){$(e+" .jsHelpCollapsible").each(function(){$(this).text("[?+]").attr("title","<dfn>More Info</dfn>");$(this).next().hide();$(this).click(function(){$(this).next().toggle();if($(this).next().is(":visible")){$(this).text("[?-]")}else{$(this).text("[?+]")}})});$(e+" .jsHelpTooltip").each(function(){var e="<dfn>Info:</dfn> "+$(this).attr("title");$(this).text("[?]").attr("title",e)});I.qTip.init(e+" .jsHelpCollapsible");I.qTip.init(e+" .jsHelpTooltip")},initializeUIforMenu:function(){(function(){var e=200;var t=.5;$("#paneMenu").hover(function(){$(".menuButton").each(function(){if(!$(this).is(":hover")){$(this).animate({opacity:t},e)}})},function(){$(".menuButton").finish().each(function(){$(this).animate({opacity:1},e)})});$(".menuButton").hover(function(){$(this).animate({opacity:1},e)},function(){$(this).animate({opacity:t},e)}).mousedown(function(){$(this).finish().css({opacity:t})}).mouseup(function(){$(this).finish().css({opacity:1})})})();$(".menuButton").each(function(){$(this).click(function(){var e=$(this).attr("id");I.PageCurrent=e.substring(I.cMenuPrefix.length-1,e.length);I.contentCurrentLayer=I.cContentPrefix+I.PageCurrent;switch(I.PageCurrent){case I.PageEnum.Chains:{$("#jsTop").hide();if(O.Options.bol_tourPrediction){$("#chnEvent_"+C.CurrentChainSD.nexus+"_"+C.CurrentChainSD.CurrentPrimaryEvent.num).trigger("click")}}break;case I.PageEnum.Map:{$("#jsTop").show();$("#jsCenter").trigger("click");M.PinEvent.setLatLng(M.convertGCtoLC([0,0]))}break;case I.PageEnum.WvW:{$("#jsTop").hide()}break;case I.PageEnum.Help:{$("#jsTop").show()}break;default:{$("#jsTop").hide()}break}$("#paneContent article").hide();$(I.contentCurrentLayer+" .cntHeader").css({opacity:0}).animate({opacity:1},400);$(I.contentCurrentLayer).animate({width:"show"},200);U.updateQueryString();if(O.Options.bol_showChainPaths){if(I.PageCurrent===I.PageEnum.Map){M.setEntityGroupDisplay(M.ChainPathEntities,"hide");M.setEntityGroupDisplay(M.StoryEventIcons,"hide");M.setEntityGroupDisplay(M.StoryEventRings,"hide")}else{M.setEntityGroupDisplay(M.ChainPathEntities,"show");M.setEntityGroupDisplay(M.StoryEventActive,"show")}}})});$("#menuMap").one("click",I.loadMapLayer);$("#menuHelp").one("click",I.loadHelpLayer);$("#jsTop").click(function(){$(I.contentCurrentLayer).animate({scrollTop:0},"fast")});$("#jsCenter").click(function(){M.Map.setView(M.convertGCtoLC(M.cMAP_CENTER),M.ZoomLevelEnum.Default)})},bindAfterAJAXContent:function(e){I.generateTableOfContent(e);I.generateSectionMenu(e);I.bindHelpButtons(e);M.bindMapLinks(e);U.convertExternalLink(e+" a");I.qTip.init("button")},loadHelpLayer:function(){$("#layerHelp").load(I.cPageURLHelp,function(){I.bindAfterAJAXContent("#layerHelp");$(".jsCopyCode").click(function(){$(this).select()});U.openSectionFromURL();D.translatePageHeader(I.PageEnum.Help);I.isContentLoaded_Help=true})},loadMapLayer:function(){$("#layerMap").load(I.cPageURLMap,function(){I.bindAfterAJAXContent("#layerMap");$("#headerMap_Daily").one("click",function(){P.generateAndInitializeDailies()});$("#headerMap_Resource").one("click",function(){P.generateAndInitializeResourceNodes()});$("#headerMap_JP").one("click",function(){P.generateAndInitializeJPs();P.generateAndInitializeJPChecklistHTML()});$("#headerMap_Personal").one("click",function(){X.initializeDungeonChecklist();X.initializeCustomChecklist()});$("#headerMap_TP").one("click",function(){E.initializeCalculator();E.initializeTrading();E.initializeExchange()});$("#headerMap_Notepad").one("click",function(){X.initializeNotepad()});$("#headerMap_Collectible").one("click",function(){P.generateAndInitializeCollectibles()});$("#headerMap_Daily, #headerMap_Resource, #headerMap_JP, #headerMap_Collectible").each(function(){$(this).click(function(){if($(this).children("sup").text()==="[-]"){M.displayIcons(U.getSubstringFromHTMLID($(this)),true)}})});$("<img class='menuBeamIcon menuBeamIconCenter' src='img/ui/star.png' "+"title='&lt;dfn&gt;Map Center&lt;/dfn&gt;' />").appendTo("#menuBeam_Map").click(function(){$("#jsCenter").trigger("click")});I.qTip.init("#layerMap .menuBeamIconCenter, #layerMap label");U.openSectionFromURL();D.translatePageHeader(I.PageEnum.Map);I.isContentLoaded_Map=true})},initializeUIforChains:function(){$("#layerChains header").click(function(){$(this).next().slideToggle("fast",function(){if($(this).is(":visible")){var e=$(I.cContentPrefix+I.PageEnum.Chains);var t=$(this).prev();t.find("ins").html("[-]");I.scrollToElement(t,e,"fast")}else{$(this).prev().find("ins").html("[+]")}})});$("#layerChains header:not(:first)").each(function(){$(this).next().toggle(0);$(this).find("ins").html("[+]")});$("#layerChains header:first").each(function(){$(this).find("ins").html("[-]")});$("#listChainsLegacy").prev().one("click",function(){C.LegacyChains.forEach(C.styleBarIcon)});$("#listChainsTemple").prev().one("click",function(){C.TempleChains.forEach(C.styleBarIcon)});$(".chnTitle h1").click(function(){$(this).parent().next().slideToggle(100)});$("#headerTimetable").one("click",function(){C.initializeTimetableHTML()})},initializeUIForHUD:function(){var e=200;$("#mapOptions").hover(function(){$("#mapOptionsPopup").show().animate({opacity:.8},e)},function(){$("#mapOptionsPopup").animate({opacity:0},e)});$("#mapZones").hover(function(){$("#mapZonesPopup").animate({opacity:.8},e)},function(){$("#mapZonesPopup").animate({opacity:0},e)})},enforceProgramMode:function(){switch(I.ModeCurrent){case I.ModeEnum.Overlay:{$("#paneWarning").remove();$(".itemMapLinks a, .itemMapLinks span, #itemSocial").hide();$("#jsConsole").css({top:"12px",left:"12px","font-size":"12px"});$("#jsConsoleButtons").css({right:"0px",left:"auto",bottom:"0px"})}break;case I.ModeEnum.Simple:{$("#panelLeft, #paneMenu, #paneContent").hide();$("#panelRight").css({background:"radial-gradient(ellipse at center, #333 0%, #222 50%, #111 100%)"});$("#paneClock").css({top:"auto",right:"auto",bottom:"auto",left:"auto",border:"none","box-shadow":"none"});I.readjustSimpleClock();$(window).resize(function(){I.readjustSimpleClock()});$("#paneClockWall, #paneClockBackground").css({opacity:0});$("#itemTimeServer, #itemSocial").hide();$("#itemLanguage").css({position:"fixed",top:"10px",right:"10px",bottom:"auto",left:"auto"});$("#itemClockStar0").css({top:"68px",left:"122px"});$("#itemClockStar1").css({top:"68px",left:"206px"});$("#itemLanguage span").css({opacity:.7});$("#itemLanguagePopup a").each(function(){var e=$(this).attr("href");$(this).attr("href",e+"&mode=Simple")});$("#itemTimeLocal").css({position:"fixed",bottom:"0px",color:"#eee",opacity:.5});I.qTip.init($("<a title='&lt;dfn&gt;Shortcut to this page&lt;/dfn&gt;: gw2timer.com/m' href='./'>"+" <img id='iconSimpleHome' src='img/ui/about.png' /></a>").appendTo("#itemTimeLocalExtra"));$("#paneBoard").show()}break}if(I.isProgramEmbedded){$("#paneWarning").remove();$(".itemMapLinks a, .itemMapLinks span").hide()}},readjustSimpleClock:function(){var e=$(window).height()/2;var t=$(window).width()/2;var n=I.cPANE_CLOCK_HEIGHT/2;$("#paneBoard").css({"margin-top":e-n-72});$("#paneClock").css({"margin-top":e-n,"margin-left":t-n})},initializeTooltip:function(){I.qTip.init("a, ins, span, img, fieldset, label, input, button, .menuButton");$("#panelRight").mousemove($.throttle(I.cTOOLTIP_MOUSEMOVE_RATE,function(e){if($("#qTip").height()+e.pageY+I.cTOOLTIP_ADD_OFFSET_Y>$(window).height()){I.qTip.offsetY=-$("#qTip").height()-I.cTOOLTIP_ADD_OFFSET_Y}else{I.qTip.offsetY=I.cTOOLTIP_DEFAULT_OFFSET_Y}if(I.ModeCurrent===I.ModeEnum.Overlay){if($(window).width()-e.pageX>I.cPANEL_WIDTH/2){I.qTip.offsetX=$(window).width()-e.pageX-I.cPANEL_WIDTH}else{I.qTip.offsetX=I.cTOOLTIP_DEFAULT_OFFSET_X}}else{I.qTip.offsetX=I.cTOOLTIP_DEFAULT_OFFSET_X}}));$("#panelLeft").mousemove($.throttle(I.cTOOLTIP_MOUSEMOVE_RATE,function(e){if(I.cTOOLTIP_MAX_WIDTH+e.pageX+I.cTOOLTIP_ADD_OFFSET_X>$(window).width()){I.qTip.offsetX=-I.cTOOLTIP_MAX_WIDTH-I.cTOOLTIP_ADD_OFFSET_X}else{I.qTip.offsetX=24}if($("#qTip").height()-24+e.pageY>$(window).height()){I.qTip.offsetY=-$("#qTip").height()-I.cTOOLTIP_ADD_OFFSET_Y}else if(e.pageY<42){I.qTip.offsetY=32}else{I.qTip.offsetY=-42}}))},qTip:{name:"qTip",offsetX:-180,offsetY:15,a:null,init:function(e){if(!t)var t="qTip";var n=document.getElementById(t);n||(n=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","div"):document.createElement("div"),n.setAttribute("id",t),document.getElementsByTagName("body").item(0).appendChild(n));if(document.getElementById){this.a=document.getElementById(this.name);if(this.a){document.onmousemove=function(e){I.qTip.move(e)}}$(e).each(function(){t=$(this)[0];n=t.getAttribute("title");if(t&&n){t.setAttribute("tiptitle",n),t.removeAttribute("title"),t.removeAttribute("alt"),t.onmouseover=function(){I.qTip.show(this.getAttribute("tiptitle"))},t.onmouseout=function(){I.qTip.hide()}}})}},move:function(e){var t=0,n=0;document.all?(t=document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,n=document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,t+=window.event.clientX,n+=window.event.clientY):(t=e.pageX,n=e.pageY);this.a.style.left=t+this.offsetX+"px";this.a.style.top=n+this.offsetY+"px"},show:function(e){this.a&&(this.a.innerHTML=e,this.a.style.display="block")},hide:function(){this.a&&(this.a.innerHTML="",this.a.style.display="none")}}};I.initializeFirst();O.initializeOptions();T.initializeSchedule();M.initializeMap();K.initializeClock();I.initializeLast()})